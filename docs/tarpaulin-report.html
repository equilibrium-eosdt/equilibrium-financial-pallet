<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <style>html, body {
  margin: 0;
  padding: 0;
}

.app {
  margin: 10px;
  padding: 0;
}

.files-list {
  margin: 10px 0 0;
  width: 100%;
  border-collapse: collapse;
}
.files-list__head {
  border: 1px solid #999;
}
.files-list__head > tr > th {
  padding: 10px;
  border: 1px solid #999;
  text-align: left;
  font-weight: normal;
  background: #ddd;
}
.files-list__body {
}
.files-list__file {
  cursor: pointer;
}
.files-list__file:hover {
  background: #ccf;
}
.files-list__file > td {
  padding: 10px;
  border: 1px solid #999;
}
.files-list__file > td:first-child::before {
  content: '\01F4C4';
  margin-right: 1em;
}
.files-list__file_low {
  background: #fcc;
}
.files-list__file_medium {
  background: #ffc;
}
.files-list__file_high {
  background: #cfc;
}
.files-list__file_folder > td:first-child::before {
  content: '\01F4C1';
  margin-right: 1em;
}

.file-header {
  border: 1px solid #999;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.file-header__back {
  margin: 10px;
  cursor: pointer;
  flex-shrink: 0;
  flex-grow: 0;
  text-decoration: underline;
  color: #338;
}

.file-header__name {
  margin: 10px;
  flex-shrink: 2;
  flex-grow: 2;
}

.file-header__stat {
  margin: 10px;
  flex-shrink: 0;
  flex-grow: 0;
}

.file-content {
  margin: 10px 0 0;
  border: 1px solid #999;
  padding: 10px;
}

.code-line {
  margin: 0;
  padding: 0.3em;
  height: 1em;
}
.code-line_covered {
  background: #cfc;
}
.code-line_uncovered {
  background: #fcc;
}
</style>
</head>
<body>
    <div id="root"></div>
    <script>
        var data = {"files":[{"path":["/","home","rotor","work","src","polka","equilibrium-financial-pallet","common","src","lib.rs"],"content":"#![cfg_attr(not(feature = \"std\"), no_std)]\n\nuse core::slice::Iter;\nuse financial_primitives::IntoTypeIterator;\nuse frame_support::codec::{Decode, Encode};\n#[cfg(feature = \"std\")]\nuse serde::{Deserialize, Serialize};\nuse sp_std::vec;\n\n#[derive(Encode, Decode, Debug, PartialEq, Eq, Clone, Copy, Hash)]\n#[cfg_attr(feature = \"std\", derive(Serialize, Deserialize))]\npub enum Asset {\n    Unknown,\n    Usd,\n    Eq,\n    Eth,\n    Btc,\n    Eos,\n}\n\nimpl Default for Asset {\n    fn default() -\u003e Asset {\n        Asset::Unknown\n    }\n}\n\nimpl Asset {\n    pub fn iterator() -\u003e Iter\u003c'static, Asset\u003e {\n        static ASSETS: [Asset; 5] = [Asset::Usd, Asset::Eq, Asset::Eth, Asset::Btc, Asset::Eos];\n        ASSETS.iter()\n    }\n}\n\nimpl IntoTypeIterator for Asset {\n    type Iterator = sp_std::vec::IntoIter\u003cSelf\u003e;\n\n    fn into_type_iter() -\u003e Self::Iterator {\n        vec![Asset::Usd, Asset::Eq, Asset::Eth, Asset::Btc, Asset::Eos].into_iter()\n    }\n}\n","traces":[{"line":22,"address":[21253040],"length":1,"stats":{"Line":0},"fn_name":"default"},{"line":23,"address":[91789652],"length":1,"stats":{"Line":0},"fn_name":null},{"line":28,"address":[85187200],"length":1,"stats":{"Line":0},"fn_name":"iterator"},{"line":29,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":30,"address":[4209691],"length":1,"stats":{"Line":0},"fn_name":null},{"line":37,"address":[4209744],"length":1,"stats":{"Line":0},"fn_name":"into_type_iter"},{"line":38,"address":[4209751],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":0,"coverable":7},{"path":["/","home","rotor","work","src","polka","equilibrium-financial-pallet","financial-primitives","src","capvec.rs"],"content":"// Copyright (C) 2020 equilibrium.\n// SPDX-License-Identifier: Apache-2.0\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nuse frame_support::codec::{Decode, Encode};\nuse sp_std::ops::Range;\nuse sp_std::prelude::Vec;\n\nenum OneOfThree\u003cT1, T2, T3\u003e {\n    First(T1),\n    Second(T2),\n    Third(T3),\n}\n\nfn split_range(\n    range: \u0026Range\u003cusize\u003e,\n    head: usize,\n    length: usize,\n) -\u003e OneOfThree\u003c(), Range\u003cusize\u003e, (Range\u003cusize\u003e, Range\u003cusize\u003e)\u003e {\n    assert!(\n        range.start \u003c= length,\n        \"range start index {} out of range for CapVec of length {}\",\n        range.start,\n        length\n    );\n    assert!(\n        range.end \u003c= length,\n        \"range end index {} out of range for CapVec of length {}\",\n        range.start,\n        length\n    );\n\n    if range.is_empty() {\n        OneOfThree::First(())\n    } else {\n        let upper_start = range.start + head;\n        let upper_end = range.end + head;\n\n        if upper_start \u003c length \u0026\u0026 upper_end \u003c= length {\n            // Range fits in the upper part\n            OneOfThree::Second(upper_start..upper_end)\n        } else {\n            let lower_start = upper_start % length;\n            let lower_end = upper_end % length;\n\n            if lower_start \u003c head \u0026\u0026 lower_end \u003c= head {\n                // Range fits in the lower part\n                OneOfThree::Second(lower_start..lower_end)\n            } else {\n                // Range located in both upper and lower parts\n                OneOfThree::Third((upper_start..length, 0..lower_end))\n            }\n        }\n    }\n}\n\n#[derive(Encode, Decode, Clone, Default, PartialEq, Eq, Debug)]\npub struct CapVec\u003cT\u003e {\n    head_index: u32,\n    len_cap: u32,\n    items: Vec\u003cT\u003e,\n}\n\nuse sp_std::fmt::Debug;\nimpl\u003cT: Debug\u003e CapVec\u003cT\u003e {\n    /// # Examples\n    /// ```\n    /// # use financial_primitives::capvec::CapVec;\n    /// let mut items = CapVec::\u003cu64\u003e::new(2);\n    /// ```\n    pub fn new(length: u32) -\u003e CapVec\u003cT\u003e {\n        CapVec {\n            head_index: 0,\n            len_cap: length,\n            items: Vec::new(),\n        }\n    }\n\n    /// # Examples\n    /// ```\n    /// # use financial_primitives::capvec::CapVec;\n    /// let mut items = CapVec::\u003cu64\u003e::new(2);\n    /// items.push(1);\n    /// ```\n    pub fn push(\u0026mut self, item: T) {\n        if self.items.len() \u003c (self.len_cap as usize) {\n            self.items.push(item);\n        } else {\n            self.items[self.head_index as usize] = item;\n            self.head_index = (self.head_index + 1) % (self.items.len() as u32);\n        }\n    }\n\n    /// # Examples\n    /// ```\n    /// # use financial_primitives::capvec::CapVec;\n    /// let mut items = CapVec::\u003cu64\u003e::new(2);\n    /// items.push(1);\n    /// items.push(2);\n    /// items.push(3);\n    /// let items_vec: Vec\u003c_\u003e = items.iter().copied().collect();\n    /// assert_eq!(items_vec, vec![2, 3]);\n    /// ```\n    pub fn iter(\u0026self) -\u003e impl Iterator\u003cItem = \u0026T\u003e {\n        let head = self.head_index as usize;\n        let first_part = self.items[head..].iter();\n        let last_part = self.items[..head].iter();\n\n        first_part.chain(last_part)\n    }\n\n    pub fn iter_range(\u0026self, range: \u0026Range\u003cusize\u003e) -\u003e impl Iterator\u003cItem = \u0026T\u003e {\n        let ranges = split_range(range, self.head_index as usize, self.items.len());\n        let (range1, range2) = match ranges {\n            OneOfThree::First(_) =\u003e ((0..0), (0..0)),\n            OneOfThree::Second(r) =\u003e (r, (0..0)),\n            OneOfThree::Third((r1, r2)) =\u003e (r1, r2),\n        };\n\n        let first_part = self.items[range1].iter();\n        let last_part = self.items[range2].iter();\n\n        first_part.chain(last_part)\n    }\n\n    /// # Examples\n    /// ```\n    /// # use financial_primitives::capvec::CapVec;\n    /// let mut items = CapVec::\u003cu64\u003e::new(2);\n    /// assert_eq!(items.len_cap(), 2);\n    /// ```\n    pub fn len_cap(\u0026self) -\u003e u32 {\n        self.len_cap\n    }\n\n    pub fn len(\u0026self) -\u003e usize {\n        self.items.len()\n    }\n\n    /// # Examples\n    /// ```\n    /// # use financial_primitives::capvec::CapVec;\n    /// let mut items = CapVec::\u003cu64\u003e::new(2);\n    /// assert_eq!(items.last(), None);\n    /// ```\n    /// ```\n    /// # use financial_primitives::capvec::CapVec;\n    /// let mut items = CapVec::\u003cu64\u003e::new(2);\n    /// items.push(1);\n    /// items.push(2);\n    /// items.push(3);\n    /// assert_eq!(items.last(), Some(\u00263));\n    /// ```\n    pub fn last(\u0026self) -\u003e Option\u003c\u0026T\u003e {\n        let len = self.items.len();\n\n        if len == 0 {\n            None\n        } else if len \u003c (self.len_cap as usize) {\n            Some(\u0026self.items[len - 1])\n        } else {\n            let index = (self.len_cap + self.head_index - 1) % (self.len_cap);\n            Some(\u0026self.items[index as usize])\n        }\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_empty() {\n        let capvec = CapVec::\u003cu32\u003e::new(5);\n\n        let actual: Vec\u003c_\u003e = capvec.iter().cloned().collect();\n        let expected: Vec\u003cu32\u003e = vec![];\n\n        assert_eq!(actual, expected);\n    }\n\n    #[test]\n    fn test_not_capped() {\n        let mut capvec = CapVec::\u003cu32\u003e::new(5);\n        capvec.push(1);\n        capvec.push(2);\n        capvec.push(3);\n\n        let actual: Vec\u003c_\u003e = capvec.iter().cloned().collect();\n        let expected: Vec\u003cu32\u003e = vec![1, 2, 3];\n\n        assert_eq!(actual, expected);\n    }\n\n    #[test]\n    fn test_capped() {\n        let mut capvec = CapVec::\u003cu32\u003e::new(5);\n        capvec.push(1);\n        capvec.push(2);\n        capvec.push(3);\n        capvec.push(4);\n        capvec.push(5);\n        capvec.push(6);\n\n        let actual: Vec\u003c_\u003e = capvec.iter().cloned().collect();\n        let expected: Vec\u003cu32\u003e = vec![2, 3, 4, 5, 6];\n\n        assert_eq!(actual, expected);\n    }\n\n    #[test]\n    fn test_last_empty() {\n        let capvec = CapVec::\u003cu32\u003e::new(5);\n\n        let actual = capvec.last();\n        let expected = None;\n\n        assert_eq!(actual, expected);\n    }\n\n    #[test]\n    fn test_last_non_empty() {\n        let mut capvec = CapVec::\u003cu32\u003e::new(5);\n        capvec.push(1);\n        capvec.push(2);\n        capvec.push(3);\n        capvec.push(4);\n        capvec.push(5);\n        capvec.push(6);\n\n        let actual = capvec.last();\n        let expected = Some(\u00266);\n\n        assert_eq!(actual, expected);\n    }\n\n    fn from_vec\u003cT: Debug\u003e(cap: u32, items: Vec\u003cT\u003e) -\u003e CapVec\u003cT\u003e {\n        let mut capvec = CapVec::\u003cT\u003e::new(cap);\n        for item in items.into_iter() {\n            capvec.push(item);\n        }\n\n        capvec\n    }\n\n    #[test]\n    fn test_iter_range_full_range() {\n        let capvec = from_vec(5, vec![1, 2, 3, 4, 5]);\n\n        let actual: Vec\u003c_\u003e = capvec.iter_range(\u0026(0..5)).copied().collect();\n        let expected = vec![1, 2, 3, 4, 5];\n\n        assert_eq!(actual, expected);\n    }\n\n    #[test]\n    fn test_iter_range_empty_range() {\n        let capvec = from_vec(5, vec![1, 2, 3, 4, 5]);\n\n        let actual: Vec\u003c_\u003e = capvec.iter_range(\u0026(0..0)).copied().collect();\n        let expected = vec![];\n\n        assert_eq!(actual, expected);\n    }\n\n    #[test]\n    fn test_iter_range_first_part_range() {\n        let capvec = from_vec(6, vec![1, 2, 3, 4, 5, 6, 7, 8, 9]);\n\n        let actual: Vec\u003c_\u003e = capvec.iter_range(\u0026(1..3)).copied().collect();\n        let expected = vec![5, 6];\n\n        assert_eq!(actual, expected);\n    }\n\n    #[test]\n    fn test_iter_range_second_part_range() {\n        let capvec = from_vec(6, vec![1, 2, 3, 4, 5, 6, 7, 8, 9]);\n\n        let actual: Vec\u003c_\u003e = capvec.iter_range(\u0026(4..6)).copied().collect();\n        let expected = vec![8, 9];\n\n        assert_eq!(actual, expected);\n    }\n\n    #[test]\n    fn test_iter_range_both_parts_range() {\n        let capvec = from_vec(6, vec![1, 2, 3, 4, 5, 6, 7, 8, 9]);\n\n        let actual: Vec\u003c_\u003e = capvec.iter_range(\u0026(2..5)).copied().collect();\n        let expected = vec![6, 7, 8];\n\n        assert_eq!(actual, expected);\n    }\n\n    #[test]\n    fn test_iter_range_small_range_start_on_zero() {\n        let capvec = from_vec(5, vec![1, 2, 3, 4, 5]);\n\n        let actual: Vec\u003c_\u003e = capvec.iter_range(\u0026(1..3)).copied().collect();\n        let expected = vec![2, 3];\n\n        assert_eq!(actual, expected);\n    }\n}\n","traces":[{"line":26,"address":[4224784],"length":1,"stats":{"Line":4},"fn_name":"split_range"},{"line":31,"address":[4224833,4224937],"length":1,"stats":{"Line":4},"fn_name":null},{"line":32,"address":[4224818],"length":1,"stats":{"Line":4},"fn_name":null},{"line":37,"address":[4224898,4225256],"length":1,"stats":{"Line":7},"fn_name":null},{"line":38,"address":[4224883],"length":1,"stats":{"Line":7},"fn_name":null},{"line":44,"address":[4225220,4225558,4226205,4225499],"length":1,"stats":{"Line":19},"fn_name":null},{"line":45,"address":[4225551],"length":1,"stats":{"Line":1},"fn_name":null},{"line":47,"address":[4226223,4225568,4225521],"length":1,"stats":{"Line":12},"fn_name":null},{"line":48,"address":[4226253,4225592],"length":1,"stats":{"Line":6},"fn_name":null},{"line":50,"address":[4226203,4225788,4225633],"length":1,"stats":{"Line":11},"fn_name":null},{"line":52,"address":[4225728],"length":1,"stats":{"Line":4},"fn_name":null},{"line":54,"address":[4226283,4225692,4225798],"length":1,"stats":{"Line":4},"fn_name":null},{"line":55,"address":[4226313,4225818,4226343],"length":1,"stats":{"Line":2},"fn_name":null},{"line":57,"address":[4225892,4226136],"length":1,"stats":{"Line":3},"fn_name":null},{"line":59,"address":[4226143],"length":1,"stats":{"Line":1},"fn_name":null},{"line":62,"address":[4225955],"length":1,"stats":{"Line":1},"fn_name":null},{"line":82,"address":[],"length":0,"stats":{"Line":10},"fn_name":null},{"line":86,"address":[],"length":0,"stats":{"Line":10},"fn_name":null},{"line":96,"address":[],"length":0,"stats":{"Line":9},"fn_name":null},{"line":97,"address":[],"length":0,"stats":{"Line":28},"fn_name":null},{"line":98,"address":[],"length":0,"stats":{"Line":9},"fn_name":null},{"line":100,"address":[],"length":0,"stats":{"Line":18},"fn_name":null},{"line":101,"address":[],"length":0,"stats":{"Line":12},"fn_name":null},{"line":115,"address":[],"length":0,"stats":{"Line":3},"fn_name":null},{"line":116,"address":[],"length":0,"stats":{"Line":4},"fn_name":null},{"line":117,"address":[],"length":0,"stats":{"Line":4},"fn_name":null},{"line":118,"address":[],"length":0,"stats":{"Line":4},"fn_name":null},{"line":120,"address":[],"length":0,"stats":{"Line":4},"fn_name":null},{"line":123,"address":[],"length":0,"stats":{"Line":4},"fn_name":null},{"line":124,"address":[],"length":0,"stats":{"Line":4},"fn_name":null},{"line":125,"address":[],"length":0,"stats":{"Line":4},"fn_name":null},{"line":126,"address":[],"length":0,"stats":{"Line":3},"fn_name":null},{"line":127,"address":[],"length":0,"stats":{"Line":4},"fn_name":null},{"line":128,"address":[],"length":0,"stats":{"Line":1},"fn_name":null},{"line":131,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":132,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":134,"address":[],"length":0,"stats":{"Line":5},"fn_name":null},{"line":143,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":144,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":147,"address":[],"length":0,"stats":{"Line":1},"fn_name":null},{"line":148,"address":[],"length":0,"stats":{"Line":1},"fn_name":null},{"line":165,"address":[],"length":0,"stats":{"Line":3},"fn_name":null},{"line":166,"address":[],"length":0,"stats":{"Line":3},"fn_name":null},{"line":168,"address":[],"length":0,"stats":{"Line":8},"fn_name":null},{"line":169,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":170,"address":[],"length":0,"stats":{"Line":5},"fn_name":null},{"line":171,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":173,"address":[],"length":0,"stats":{"Line":6},"fn_name":null},{"line":174,"address":[],"length":0,"stats":{"Line":3},"fn_name":null},{"line":184,"address":[4218880,4218885],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":185,"address":[4226711],"length":1,"stats":{"Line":1},"fn_name":null},{"line":187,"address":[4226811,4226756],"length":1,"stats":{"Line":2},"fn_name":null},{"line":188,"address":[4226818],"length":1,"stats":{"Line":1},"fn_name":null},{"line":190,"address":[4226842,4226995,4226949],"length":1,"stats":{"Line":2},"fn_name":null},{"line":194,"address":[4218917,4218912],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":195,"address":[4227399],"length":1,"stats":{"Line":1},"fn_name":null},{"line":196,"address":[4227441],"length":1,"stats":{"Line":1},"fn_name":null},{"line":197,"address":[4227458],"length":1,"stats":{"Line":1},"fn_name":null},{"line":198,"address":[4227487],"length":1,"stats":{"Line":1},"fn_name":null},{"line":200,"address":[4227507],"length":1,"stats":{"Line":1},"fn_name":null},{"line":201,"address":[4227567],"length":1,"stats":{"Line":1},"fn_name":null},{"line":203,"address":[4227780,4227640],"length":1,"stats":{"Line":1},"fn_name":null},{"line":207,"address":[4228192,4228216],"length":1,"stats":{"Line":3},"fn_name":"test_capped"},{"line":208,"address":[4228199],"length":1,"stats":{"Line":1},"fn_name":null},{"line":209,"address":[4228241],"length":1,"stats":{"Line":1},"fn_name":null},{"line":210,"address":[4228258],"length":1,"stats":{"Line":1},"fn_name":null},{"line":211,"address":[4228287],"length":1,"stats":{"Line":1},"fn_name":null},{"line":212,"address":[4228304],"length":1,"stats":{"Line":1},"fn_name":null},{"line":213,"address":[4228321],"length":1,"stats":{"Line":1},"fn_name":null},{"line":214,"address":[4228338],"length":1,"stats":{"Line":1},"fn_name":null},{"line":216,"address":[4228358],"length":1,"stats":{"Line":1},"fn_name":null},{"line":217,"address":[4228418],"length":1,"stats":{"Line":1},"fn_name":null},{"line":219,"address":[4228505,4228645],"length":1,"stats":{"Line":1},"fn_name":null},{"line":223,"address":[4218976,4218981],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":224,"address":[4229063],"length":1,"stats":{"Line":1},"fn_name":null},{"line":226,"address":[4229100],"length":1,"stats":{"Line":1},"fn_name":null},{"line":227,"address":[4229125],"length":1,"stats":{"Line":1},"fn_name":null},{"line":229,"address":[4229145,4229247,4229268],"length":1,"stats":{"Line":2},"fn_name":null},{"line":233,"address":[4219008,4219013],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":234,"address":[4229623],"length":1,"stats":{"Line":1},"fn_name":null},{"line":235,"address":[4229665],"length":1,"stats":{"Line":1},"fn_name":null},{"line":236,"address":[4229682],"length":1,"stats":{"Line":1},"fn_name":null},{"line":237,"address":[4229711],"length":1,"stats":{"Line":1},"fn_name":null},{"line":238,"address":[4229728],"length":1,"stats":{"Line":1},"fn_name":null},{"line":239,"address":[4229745],"length":1,"stats":{"Line":1},"fn_name":null},{"line":240,"address":[4229762],"length":1,"stats":{"Line":1},"fn_name":null},{"line":242,"address":[4229774],"length":1,"stats":{"Line":1},"fn_name":null},{"line":243,"address":[4229799],"length":1,"stats":{"Line":1},"fn_name":null},{"line":245,"address":[4229822,4229930],"length":1,"stats":{"Line":1},"fn_name":null},{"line":248,"address":[4218368,4218431],"length":1,"stats":{"Line":6},"fn_name":"from_vec\u003ci32\u003e"},{"line":249,"address":[4218385],"length":1,"stats":{"Line":6},"fn_name":null},{"line":250,"address":[4218732,4218608,4218446,4218664,4218525],"length":1,"stats":{"Line":24},"fn_name":null},{"line":251,"address":[4218715],"length":1,"stats":{"Line":6},"fn_name":null},{"line":258,"address":[4219040,4219045],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":259,"address":[4230369,4230279],"length":1,"stats":{"Line":2},"fn_name":null},{"line":261,"address":[4230392,4230470],"length":1,"stats":{"Line":2},"fn_name":null},{"line":262,"address":[4230487],"length":1,"stats":{"Line":1},"fn_name":null},{"line":264,"address":[4230573,4230709],"length":1,"stats":{"Line":1},"fn_name":null},{"line":268,"address":[4219072,4219077],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":269,"address":[4231217,4231127],"length":1,"stats":{"Line":2},"fn_name":null},{"line":271,"address":[4231240,4231318],"length":1,"stats":{"Line":2},"fn_name":null},{"line":272,"address":[4231325],"length":1,"stats":{"Line":1},"fn_name":null},{"line":274,"address":[4231458,4231352,4231504],"length":1,"stats":{"Line":2},"fn_name":null},{"line":278,"address":[4219104,4219109],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":279,"address":[4231927,4232045],"length":1,"stats":{"Line":2},"fn_name":null},{"line":281,"address":[4232068,4232146],"length":1,"stats":{"Line":2},"fn_name":null},{"line":282,"address":[4232163],"length":1,"stats":{"Line":1},"fn_name":null},{"line":284,"address":[4232228,4232364],"length":1,"stats":{"Line":1},"fn_name":null},{"line":288,"address":[4219136,4219141],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":289,"address":[4232893,4232775],"length":1,"stats":{"Line":2},"fn_name":null},{"line":291,"address":[4232916,4232994],"length":1,"stats":{"Line":2},"fn_name":null},{"line":292,"address":[4233011],"length":1,"stats":{"Line":1},"fn_name":null},{"line":294,"address":[4233076,4233212],"length":1,"stats":{"Line":1},"fn_name":null},{"line":298,"address":[4219168,4219173],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":299,"address":[4233741,4233623],"length":1,"stats":{"Line":2},"fn_name":null},{"line":301,"address":[4233764,4233842],"length":1,"stats":{"Line":2},"fn_name":null},{"line":302,"address":[4233859],"length":1,"stats":{"Line":1},"fn_name":null},{"line":304,"address":[4234067,4233931],"length":1,"stats":{"Line":1},"fn_name":null},{"line":308,"address":[4219200,4219205],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":309,"address":[4234577,4234487],"length":1,"stats":{"Line":2},"fn_name":null},{"line":311,"address":[4234600,4234678],"length":1,"stats":{"Line":2},"fn_name":null},{"line":312,"address":[4234695],"length":1,"stats":{"Line":1},"fn_name":null},{"line":314,"address":[4234760,4234896],"length":1,"stats":{"Line":1},"fn_name":null}],"covered":123,"coverable":123},{"path":["/","home","rotor","work","src","polka","equilibrium-financial-pallet","financial-primitives","src","lib.rs"],"content":"// Copyright (C) 2020 equilibrium.\n// SPDX-License-Identifier: Apache-2.0\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n//#![warn(missing_docs)]\n#![cfg_attr(not(feature = \"std\"), no_std)]\n\npub mod capvec;\n\nuse core::time::Duration;\nuse frame_support::dispatch::DispatchError;\nuse sp_std::iter::Iterator;\n\npub struct Asset;\n\npub trait OnPriceSet {\n    type Asset;\n    type Price;\n\n    fn on_price_set(asset: Self::Asset, value: Self::Price) -\u003e Result\u003c(), DispatchError\u003e;\n}\n\npub trait IntoTypeIterator: Sized {\n    type Iterator: Iterator\u003cItem = Self\u003e;\n\n    fn into_type_iter() -\u003e Self::Iterator;\n}\n\n#[derive(Debug, Eq, PartialEq)]\npub enum PricePeriodError {\n    DivisionByZero,\n    Overflow,\n}\n\npub type PricePeriodResult\u003cT\u003e = Result\u003cT, PricePeriodError\u003e;\n\npub struct PricePeriod(pub u32);\n\nimpl PricePeriod {\n    pub fn get_period_id(\u0026self, now: Duration) -\u003e Result\u003cu64, PricePeriodError\u003e {\n        let seconds = now.as_secs();\n        let period = self.0 as u64;\n\n        seconds\n            .checked_div(60)\n            .and_then(|x| x.checked_div(period))\n            .ok_or(PricePeriodError::DivisionByZero)\n    }\n\n    pub fn get_period_id_start(\u0026self, period_id: u64) -\u003e Result\u003cDuration, PricePeriodError\u003e {\n        let period = self.0 as u64;\n        let seconds: Result\u003c_, PricePeriodError\u003e = period_id\n            .checked_mul(60)\n            .and_then(|x| x.checked_mul(period))\n            .ok_or(PricePeriodError::Overflow);\n\n        Ok(Duration::from_secs(seconds?))\n    }\n\n    pub fn get_period_start(\u0026self, now: Duration) -\u003e Result\u003cDuration, PricePeriodError\u003e {\n        self.get_period_id_start(self.get_period_id(now)?)\n    }\n\n    pub fn is_valid_period_start(\u0026self, period_start: Duration) -\u003e PricePeriodResult\u003cbool\u003e {\n        Ok(period_start == self.get_period_start(period_start)?)\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    #[cfg(test)]\n    mod price_period {\n        use super::super::*;\n        use chrono::prelude::*;\n\n        fn create_duration(\n            year: i32,\n            month: u32,\n            day: u32,\n            hour: u32,\n            minute: u32,\n            second: u32,\n        ) -\u003e Duration {\n            let timestamp = Utc\n                .ymd(year, month, day)\n                .and_hms(hour, minute, second)\n                .timestamp();\n            Duration::from_secs(timestamp as u64)\n        }\n\n        #[test]\n        fn period_id_are_same_within_period() {\n            let time1 = create_duration(2020, 9, 14, 12, 31, 0);\n            let time2 = create_duration(2020, 9, 14, 12, 54, 0);\n\n            // period is one hour\n            let period = PricePeriod(60);\n\n            let period_id_1 = period.get_period_id(time1);\n            let period_id_2 = period.get_period_id(time2);\n\n            assert!(period_id_1.is_ok());\n            assert!(period_id_2.is_ok());\n            assert_eq!(period_id_1, period_id_2);\n        }\n\n        #[test]\n        fn period_id_are_different_for_different_periods() {\n            let time1 = create_duration(2020, 9, 14, 12, 31, 0);\n            let time2 = create_duration(2020, 9, 14, 13, 2, 0);\n\n            // period is one hour\n            let period = PricePeriod(60);\n\n            let period_id_1 = period.get_period_id(time1);\n            let period_id_2 = period.get_period_id(time2);\n\n            assert!(period_id_1.is_ok());\n            assert!(period_id_2.is_ok());\n            assert!(period_id_1 != period_id_2);\n        }\n    }\n}\n","traces":[{"line":51,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":52,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":53,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":55,"address":[],"length":0,"stats":{"Line":6},"fn_name":null},{"line":57,"address":[],"length":0,"stats":{"Line":6},"fn_name":null},{"line":58,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":61,"address":[],"length":0,"stats":{"Line":1},"fn_name":null},{"line":62,"address":[],"length":0,"stats":{"Line":1},"fn_name":null},{"line":63,"address":[],"length":0,"stats":{"Line":3},"fn_name":null},{"line":65,"address":[],"length":0,"stats":{"Line":3},"fn_name":null},{"line":66,"address":[],"length":0,"stats":{"Line":1},"fn_name":null},{"line":68,"address":[],"length":0,"stats":{"Line":1},"fn_name":null},{"line":71,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":72,"address":[],"length":0,"stats":{"Line":3},"fn_name":null},{"line":75,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":76,"address":[],"length":0,"stats":{"Line":3},"fn_name":null},{"line":87,"address":[4216464],"length":1,"stats":{"Line":1},"fn_name":"create_duration"},{"line":95,"address":[4216495],"length":1,"stats":{"Line":1},"fn_name":null},{"line":99,"address":[4216616],"length":1,"stats":{"Line":1},"fn_name":null},{"line":103,"address":[4219237,4219232],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":104,"address":[4216666],"length":1,"stats":{"Line":1},"fn_name":null},{"line":105,"address":[4216724],"length":1,"stats":{"Line":1},"fn_name":null},{"line":108,"address":[4216779],"length":1,"stats":{"Line":1},"fn_name":null},{"line":110,"address":[4216787],"length":1,"stats":{"Line":1},"fn_name":null},{"line":111,"address":[4216811],"length":1,"stats":{"Line":1},"fn_name":null},{"line":113,"address":[4216881,4216838],"length":1,"stats":{"Line":1},"fn_name":null},{"line":114,"address":[4216862,4216915,4217009],"length":1,"stats":{"Line":2},"fn_name":null},{"line":115,"address":[4217043,4216921,4217057],"length":1,"stats":{"Line":2},"fn_name":null},{"line":119,"address":[4219264,4219269],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":120,"address":[4217351],"length":1,"stats":{"Line":1},"fn_name":null},{"line":121,"address":[4217403],"length":1,"stats":{"Line":1},"fn_name":null},{"line":124,"address":[4217452],"length":1,"stats":{"Line":1},"fn_name":null},{"line":126,"address":[4217460],"length":1,"stats":{"Line":1},"fn_name":null},{"line":127,"address":[4217484],"length":1,"stats":{"Line":1},"fn_name":null},{"line":129,"address":[4217508,4217548],"length":1,"stats":{"Line":1},"fn_name":null},{"line":130,"address":[4217532,4217582,4217609],"length":1,"stats":{"Line":2},"fn_name":null},{"line":131,"address":[4217684,4217643,4217588,4217654],"length":1,"stats":{"Line":2},"fn_name":null}],"covered":37,"coverable":37},{"path":["/","home","rotor","work","src","polka","equilibrium-financial-pallet","node","build.rs"],"content":"use substrate_build_script_utils::{generate_cargo_keys, rerun_if_git_head_changed};\n\nfn main() {\n    generate_cargo_keys();\n\n    rerun_if_git_head_changed();\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","rotor","work","src","polka","equilibrium-financial-pallet","node","src","chain_spec.rs"],"content":"use common::Asset;\nuse core::time::Duration;\nuse financial_primitives::PricePeriod;\nuse node_template_runtime::{\n    AccountId, AuraConfig, BalancesConfig, FinancialConfig, FixedNumber, GenesisConfig,\n    GrandpaConfig, OracleConfig, Signature, SudoConfig, SystemConfig, WASM_BINARY,\n};\nuse sc_service::ChainType;\nuse sp_consensus_aura::sr25519::AuthorityId as AuraId;\nuse sp_core::{sr25519, Pair, Public};\nuse sp_finality_grandpa::AuthorityId as GrandpaId;\nuse sp_runtime::traits::{IdentifyAccount, Verify};\nuse std::time::{SystemTime, UNIX_EPOCH};\nuse substrate_fixed::traits::LossyFrom;\n\n// The URL for the telemetry server.\n// const STAGING_TELEMETRY_URL: \u0026str = \"wss://telemetry.polkadot.io/submit/\";\n\n/// Specialized `ChainSpec`. This is a specialization of the general Substrate ChainSpec type.\npub type ChainSpec = sc_service::GenericChainSpec\u003cGenesisConfig\u003e;\n\n/// Generate a crypto pair from seed.\npub fn get_from_seed\u003cTPublic: Public\u003e(seed: \u0026str) -\u003e \u003cTPublic::Pair as Pair\u003e::Public {\n    TPublic::Pair::from_string(\u0026format!(\"//{}\", seed), None)\n        .expect(\"static values are valid; qed\")\n        .public()\n}\n\ntype AccountPublic = \u003cSignature as Verify\u003e::Signer;\n\n/// Generate an account ID from seed.\npub fn get_account_id_from_seed\u003cTPublic: Public\u003e(seed: \u0026str) -\u003e AccountId\nwhere\n    AccountPublic: From\u003c\u003cTPublic::Pair as Pair\u003e::Public\u003e,\n{\n    AccountPublic::from(get_from_seed::\u003cTPublic\u003e(seed)).into_account()\n}\n\n/// Generate an Aura authority key.\npub fn authority_keys_from_seed(s: \u0026str) -\u003e (AuraId, GrandpaId) {\n    (get_from_seed::\u003cAuraId\u003e(s), get_from_seed::\u003cGrandpaId\u003e(s))\n}\n\npub fn development_config() -\u003e Result\u003cChainSpec, String\u003e {\n    let wasm_binary = WASM_BINARY.ok_or(\"Development wasm binary not available\".to_string())?;\n\n    Ok(ChainSpec::from_genesis(\n        // Name\n        \"Development\",\n        // ID\n        \"dev\",\n        ChainType::Development,\n        move || {\n            testnet_genesis(\n                wasm_binary,\n                // Initial PoA authorities\n                vec![authority_keys_from_seed(\"Alice\")],\n                // Sudo account\n                get_account_id_from_seed::\u003csr25519::Public\u003e(\"Alice\"),\n                // Pre-funded accounts\n                vec![\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Alice\"),\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Bob\"),\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Alice//stash\"),\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Bob//stash\"),\n                ],\n                true,\n                vec![\n                    (Asset::Usd, 1),\n                    (Asset::Eq, 25),\n                    (Asset::Eth, 250),\n                    (Asset::Btc, 10_000),\n                    (Asset::Eos, 3),\n                ]\n                .into_iter()\n                .map(|(a, x)| (a, FixedNumber::lossy_from(x)))\n                .collect(),\n            )\n        },\n        // Bootnodes\n        vec![],\n        // Telemetry\n        None,\n        // Protocol ID\n        None,\n        // Properties\n        None,\n        // Extensions\n        None,\n    ))\n}\n\npub fn local_testnet_config() -\u003e Result\u003cChainSpec, String\u003e {\n    let wasm_binary = WASM_BINARY.ok_or(\"Development wasm binary not available\".to_string())?;\n\n    Ok(ChainSpec::from_genesis(\n        // Name\n        \"Local Testnet\",\n        // ID\n        \"local_testnet\",\n        ChainType::Local,\n        move || {\n            testnet_genesis(\n                wasm_binary,\n                // Initial PoA authorities\n                vec![\n                    authority_keys_from_seed(\"Alice\"),\n                    authority_keys_from_seed(\"Bob\"),\n                ],\n                // Sudo account\n                get_account_id_from_seed::\u003csr25519::Public\u003e(\"Alice\"),\n                // Pre-funded accounts\n                vec![\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Alice\"),\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Bob\"),\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Charlie\"),\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Dave\"),\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Eve\"),\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Ferdie\"),\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Alice//stash\"),\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Bob//stash\"),\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Charlie//stash\"),\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Dave//stash\"),\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Eve//stash\"),\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Ferdie//stash\"),\n                ],\n                true,\n                vec![\n                    (Asset::Usd, 1),\n                    (Asset::Eq, 25),\n                    (Asset::Eth, 250),\n                    (Asset::Btc, 10_000),\n                    (Asset::Eos, 3),\n                ]\n                .into_iter()\n                .map(|(a, x)| (a, FixedNumber::lossy_from(x)))\n                .collect(),\n            )\n        },\n        // Bootnodes\n        vec![],\n        // Telemetry\n        None,\n        // Protocol ID\n        None,\n        // Properties\n        None,\n        // Extensions\n        None,\n    ))\n}\n\nfn get_prev_period_start(price_period: u32) -\u003e Duration {\n    let price_period = PricePeriod(price_period);\n    let now = SystemTime::now()\n        .duration_since(UNIX_EPOCH)\n        .expect(\"Unable to get current Unix timestamp\");\n    let now_period_id = price_period\n        .get_period_id(now)\n        .expect(\"Unable to get current period id\");\n    let prev_period_id = now_period_id\n        .checked_sub(1)\n        .expect(\"Unable to get previous period id\");\n    let prev_period_start = price_period\n        .get_period_id_start(prev_period_id)\n        .expect(\"Unable to get previous period Unix timestamp\");\n\n    prev_period_start\n}\n\n/// Configure initial storage state for FRAME modules.\nfn testnet_genesis(\n    wasm_binary: \u0026[u8],\n    initial_authorities: Vec\u003c(AuraId, GrandpaId)\u003e,\n    root_key: AccountId,\n    endowed_accounts: Vec\u003cAccountId\u003e,\n    _enable_println: bool,\n    prices: Vec\u003c(Asset, FixedNumber)\u003e,\n) -\u003e GenesisConfig {\n    let prev_period_start = get_prev_period_start(node_template_runtime::PricePeriod::get());\n    GenesisConfig {\n        frame_system: Some(SystemConfig {\n            // Add Wasm runtime to storage.\n            code: wasm_binary.to_vec(),\n            changes_trie_config: Default::default(),\n        }),\n        pallet_balances: Some(BalancesConfig {\n            // Configure endowed accounts with initial balance of 1 \u003c\u003c 60.\n            balances: endowed_accounts\n                .iter()\n                .cloned()\n                .map(|k| (k, 1 \u003c\u003c 60))\n                .collect(),\n        }),\n        pallet_aura: Some(AuraConfig {\n            authorities: initial_authorities.iter().map(|x| (x.0.clone())).collect(),\n        }),\n        pallet_grandpa: Some(GrandpaConfig {\n            authorities: initial_authorities\n                .iter()\n                .map(|x| (x.1.clone(), 1))\n                .collect(),\n        }),\n        pallet_sudo: Some(SudoConfig {\n            // Assign network admin rights.\n            key: root_key,\n        }),\n        oracle: Some(OracleConfig {\n            prices: prices.iter().cloned().collect(),\n        }),\n        financial_pallet: Some(FinancialConfig {\n            prices: prices\n                .iter()\n                .cloned()\n                .map(|(a, p)| (a, vec![p], prev_period_start))\n                .collect(),\n        }),\n    }\n}\n","traces":[{"line":23,"address":[5118608,5119206,5119104,5118710,5119600,5119702],"length":1,"stats":{"Line":0},"fn_name":"get_from_seed\u003csp_consensus_aura::sr25519::app_sr25519::Public\u003e"},{"line":24,"address":[5118730,5119447,5119722,5118635,5119943,5119226,5118951,5119131,5119627],"length":1,"stats":{"Line":0},"fn_name":null},{"line":32,"address":[5120112],"length":1,"stats":{"Line":0},"fn_name":"get_account_id_from_seed\u003csp_core::sr25519::Public\u003e"},{"line":36,"address":[5120129],"length":1,"stats":{"Line":0},"fn_name":null},{"line":40,"address":[8001952],"length":1,"stats":{"Line":0},"fn_name":"authority_keys_from_seed"},{"line":41,"address":[8001969],"length":1,"stats":{"Line":0},"fn_name":null},{"line":44,"address":[8002112,8002173],"length":1,"stats":{"Line":0},"fn_name":"development_config"},{"line":45,"address":[8002129,8002462,8002188,8002349],"length":1,"stats":{"Line":0},"fn_name":null},{"line":47,"address":[8002515,8002682],"length":1,"stats":{"Line":0},"fn_name":null},{"line":52,"address":[8002294],"length":1,"stats":{"Line":0},"fn_name":null},{"line":53,"address":[5120288,5120400],"length":1,"stats":{"Line":0},"fn_name":"{{closure}}"},{"line":54,"address":[5121129],"length":1,"stats":{"Line":0},"fn_name":null},{"line":55,"address":[5120306],"length":1,"stats":{"Line":0},"fn_name":null},{"line":57,"address":[5120415,5120345,5121238],"length":1,"stats":{"Line":0},"fn_name":null},{"line":59,"address":[5120472],"length":1,"stats":{"Line":0},"fn_name":null},{"line":61,"address":[5120630,5120509,5121291],"length":1,"stats":{"Line":0},"fn_name":null},{"line":62,"address":[5120522],"length":1,"stats":{"Line":0},"fn_name":null},{"line":63,"address":[5120549],"length":1,"stats":{"Line":0},"fn_name":null},{"line":64,"address":[5120576],"length":1,"stats":{"Line":0},"fn_name":null},{"line":65,"address":[5120603],"length":1,"stats":{"Line":0},"fn_name":null},{"line":68,"address":[5121076,5120779,5120919],"length":1,"stats":{"Line":0},"fn_name":null},{"line":69,"address":[5120784],"length":1,"stats":{"Line":0},"fn_name":null},{"line":70,"address":[5120811],"length":1,"stats":{"Line":0},"fn_name":null},{"line":71,"address":[5120838],"length":1,"stats":{"Line":0},"fn_name":null},{"line":72,"address":[5120865],"length":1,"stats":{"Line":0},"fn_name":null},{"line":73,"address":[5120892],"length":1,"stats":{"Line":0},"fn_name":null},{"line":76,"address":[5120192,5120210],"length":1,"stats":{"Line":0},"fn_name":"{{closure}}"},{"line":81,"address":[8002330],"length":1,"stats":{"Line":0},"fn_name":null},{"line":83,"address":[8002471],"length":1,"stats":{"Line":0},"fn_name":null},{"line":85,"address":[8002483],"length":1,"stats":{"Line":0},"fn_name":null},{"line":87,"address":[8002495],"length":1,"stats":{"Line":0},"fn_name":null},{"line":89,"address":[8002507],"length":1,"stats":{"Line":0},"fn_name":null},{"line":93,"address":[8002877,8002816],"length":1,"stats":{"Line":0},"fn_name":"local_testnet_config"},{"line":94,"address":[8003053,8003166,8002833,8002892],"length":1,"stats":{"Line":0},"fn_name":null},{"line":96,"address":[8003219,8003386],"length":1,"stats":{"Line":0},"fn_name":null},{"line":101,"address":[8002998],"length":1,"stats":{"Line":0},"fn_name":null},{"line":102,"address":[5121616,5121504],"length":1,"stats":{"Line":0},"fn_name":"{{closure}}"},{"line":103,"address":[5122879],"length":1,"stats":{"Line":0},"fn_name":null},{"line":104,"address":[5121522],"length":1,"stats":{"Line":0},"fn_name":null},{"line":106,"address":[5121658,5122988,5121561],"length":1,"stats":{"Line":0},"fn_name":null},{"line":107,"address":[5121592],"length":1,"stats":{"Line":0},"fn_name":null},{"line":108,"address":[5121631],"length":1,"stats":{"Line":0},"fn_name":null},{"line":111,"address":[5121766],"length":1,"stats":{"Line":0},"fn_name":null},{"line":113,"address":[5121803,5122140,5123041],"length":1,"stats":{"Line":0},"fn_name":null},{"line":114,"address":[5121816],"length":1,"stats":{"Line":0},"fn_name":null},{"line":115,"address":[5121843],"length":1,"stats":{"Line":0},"fn_name":null},{"line":116,"address":[5121870],"length":1,"stats":{"Line":0},"fn_name":null},{"line":117,"address":[5121897],"length":1,"stats":{"Line":0},"fn_name":null},{"line":118,"address":[5121924],"length":1,"stats":{"Line":0},"fn_name":null},{"line":119,"address":[5121951],"length":1,"stats":{"Line":0},"fn_name":null},{"line":120,"address":[5121978],"length":1,"stats":{"Line":0},"fn_name":null},{"line":121,"address":[5122005],"length":1,"stats":{"Line":0},"fn_name":null},{"line":122,"address":[5122032],"length":1,"stats":{"Line":0},"fn_name":null},{"line":123,"address":[5122059],"length":1,"stats":{"Line":0},"fn_name":null},{"line":124,"address":[5122086],"length":1,"stats":{"Line":0},"fn_name":null},{"line":125,"address":[5122113],"length":1,"stats":{"Line":0},"fn_name":null},{"line":128,"address":[5122529,5122669,5122826],"length":1,"stats":{"Line":0},"fn_name":null},{"line":129,"address":[5122534],"length":1,"stats":{"Line":0},"fn_name":null},{"line":130,"address":[5122561],"length":1,"stats":{"Line":0},"fn_name":null},{"line":131,"address":[5122588],"length":1,"stats":{"Line":0},"fn_name":null},{"line":132,"address":[5122615],"length":1,"stats":{"Line":0},"fn_name":null},{"line":133,"address":[5122642],"length":1,"stats":{"Line":0},"fn_name":null},{"line":136,"address":[5121426,5121408],"length":1,"stats":{"Line":0},"fn_name":"{{closure}}"},{"line":141,"address":[8003034],"length":1,"stats":{"Line":0},"fn_name":null},{"line":143,"address":[8003175],"length":1,"stats":{"Line":0},"fn_name":null},{"line":145,"address":[8003187],"length":1,"stats":{"Line":0},"fn_name":null},{"line":147,"address":[8003199],"length":1,"stats":{"Line":0},"fn_name":null},{"line":149,"address":[8003211],"length":1,"stats":{"Line":0},"fn_name":null},{"line":153,"address":[8003520],"length":1,"stats":{"Line":0},"fn_name":"get_prev_period_start"},{"line":154,"address":[8003534],"length":1,"stats":{"Line":0},"fn_name":null},{"line":155,"address":[8003538],"length":1,"stats":{"Line":0},"fn_name":null},{"line":158,"address":[8003644],"length":1,"stats":{"Line":0},"fn_name":null},{"line":161,"address":[8003719],"length":1,"stats":{"Line":0},"fn_name":null},{"line":164,"address":[8003803],"length":1,"stats":{"Line":0},"fn_name":null},{"line":172,"address":[8003904,8004041],"length":1,"stats":{"Line":0},"fn_name":"testnet_genesis"},{"line":180,"address":[8004063,8003959,8004140],"length":1,"stats":{"Line":0},"fn_name":null},{"line":182,"address":[8004236],"length":1,"stats":{"Line":0},"fn_name":null},{"line":187,"address":[8004563],"length":1,"stats":{"Line":0},"fn_name":null},{"line":195,"address":[8004786],"length":1,"stats":{"Line":0},"fn_name":null},{"line":198,"address":[8004991],"length":1,"stats":{"Line":0},"fn_name":null},{"line":204,"address":[8005086],"length":1,"stats":{"Line":0},"fn_name":null},{"line":208,"address":[8005289],"length":1,"stats":{"Line":0},"fn_name":null},{"line":211,"address":[8005531],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":0,"coverable":83},{"path":["/","home","rotor","work","src","polka","equilibrium-financial-pallet","node","src","cli.rs"],"content":"use sc_cli::{RunCmd, Subcommand};\nuse structopt::StructOpt;\n\n#[derive(Debug, StructOpt)]\npub struct Cli {\n    #[structopt(subcommand)]\n    pub subcommand: Option\u003cSubcommand\u003e,\n\n    #[structopt(flatten)]\n    pub run: RunCmd,\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","rotor","work","src","polka","equilibrium-financial-pallet","node","src","command.rs"],"content":"// This file is part of Substrate.\n\n// Copyright (C) 2017-2020 Parity Technologies (UK) Ltd.\n// SPDX-License-Identifier: Apache-2.0\n\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// \thttp://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nuse crate::chain_spec;\nuse crate::cli::Cli;\nuse crate::service;\nuse crate::service::new_partial;\nuse sc_cli::{ChainSpec, Role, RuntimeVersion, SubstrateCli};\nuse sc_service::PartialComponents;\n\nimpl SubstrateCli for Cli {\n    fn impl_name() -\u003e String {\n        \"Substrate Node\".into()\n    }\n\n    fn impl_version() -\u003e String {\n        env!(\"SUBSTRATE_CLI_IMPL_VERSION\").into()\n    }\n\n    fn description() -\u003e String {\n        env!(\"CARGO_PKG_DESCRIPTION\").into()\n    }\n\n    fn author() -\u003e String {\n        env!(\"CARGO_PKG_AUTHORS\").into()\n    }\n\n    fn support_url() -\u003e String {\n        \"support.anonymous.an\".into()\n    }\n\n    fn copyright_start_year() -\u003e i32 {\n        2017\n    }\n\n    fn load_spec(\u0026self, id: \u0026str) -\u003e Result\u003cBox\u003cdyn sc_service::ChainSpec\u003e, String\u003e {\n        Ok(match id {\n            \"dev\" =\u003e Box::new(chain_spec::development_config()?),\n            \"\" | \"local\" =\u003e Box::new(chain_spec::local_testnet_config()?),\n            path =\u003e Box::new(chain_spec::ChainSpec::from_json_file(\n                std::path::PathBuf::from(path),\n            )?),\n        })\n    }\n\n    fn native_runtime_version(_: \u0026Box\u003cdyn ChainSpec\u003e) -\u003e \u0026'static RuntimeVersion {\n        \u0026node_template_runtime::VERSION\n    }\n}\n\n/// Parse and run command line arguments\npub fn run() -\u003e sc_cli::Result\u003c()\u003e {\n    let cli = Cli::from_args();\n\n    match cli.subcommand {\n        Some(ref subcommand) =\u003e {\n            let runner = cli.create_runner(subcommand)?;\n            runner.run_subcommand(subcommand, |config| {\n                let PartialComponents {\n                    client,\n                    backend,\n                    task_manager,\n                    import_queue,\n                    ..\n                } = new_partial(\u0026config)?;\n                Ok((client, backend, import_queue, task_manager))\n            })\n        }\n        None =\u003e {\n            let runner = cli.create_runner(\u0026cli.run)?;\n            runner.run_node_until_exit(|config| match config.role {\n                Role::Light =\u003e service::new_light(config),\n                _ =\u003e service::new_full(config),\n            })\n        }\n    }\n}\n","traces":[{"line":26,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":27,"address":[25564011],"length":1,"stats":{"Line":0},"fn_name":null},{"line":30,"address":[25564048],"length":1,"stats":{"Line":0},"fn_name":"impl_version"},{"line":31,"address":[25564059],"length":1,"stats":{"Line":0},"fn_name":null},{"line":34,"address":[25564096],"length":1,"stats":{"Line":0},"fn_name":"description"},{"line":35,"address":[25564107],"length":1,"stats":{"Line":0},"fn_name":null},{"line":38,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":39,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":42,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":43,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":46,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":47,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":50,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":51,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":52,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":53,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":54,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":55,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":60,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":61,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":66,"address":[13658226,13658160],"length":1,"stats":{"Line":0},"fn_name":"run"},{"line":67,"address":[13658176],"length":1,"stats":{"Line":0},"fn_name":null},{"line":69,"address":[13658301,13658890],"length":1,"stats":{"Line":0},"fn_name":null},{"line":70,"address":[13658241,13658311],"length":1,"stats":{"Line":0},"fn_name":null},{"line":71,"address":[13658389,13658646,13658327,13658861,13658813],"length":1,"stats":{"Line":0},"fn_name":null},{"line":72,"address":[13658542],"length":1,"stats":{"Line":0},"fn_name":null},{"line":74,"address":[18707247],"length":1,"stats":{"Line":0},"fn_name":null},{"line":75,"address":[18707263],"length":1,"stats":{"Line":0},"fn_name":null},{"line":76,"address":[18707279],"length":1,"stats":{"Line":0},"fn_name":null},{"line":77,"address":[18707315],"length":1,"stats":{"Line":0},"fn_name":null},{"line":79,"address":[18707091,18707561,18707034,18707379,18707949,18707114],"length":1,"stats":{"Line":0},"fn_name":null},{"line":80,"address":[18707633],"length":1,"stats":{"Line":0},"fn_name":null},{"line":84,"address":[13658267,13659122,13658911,13659283],"length":1,"stats":{"Line":0},"fn_name":null},{"line":85,"address":[13659047],"length":1,"stats":{"Line":0},"fn_name":null},{"line":86,"address":[18708342,18708266],"length":1,"stats":{"Line":0},"fn_name":null},{"line":87,"address":[18708288],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":0,"coverable":36},{"path":["/","home","rotor","work","src","polka","equilibrium-financial-pallet","node","src","lib.rs"],"content":"pub mod chain_spec;\npub mod rpc;\npub mod service;\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","rotor","work","src","polka","equilibrium-financial-pallet","node","src","main.rs"],"content":"//! Substrate Node Template CLI library.\n#![warn(missing_docs)]\n\nmod chain_spec;\n#[macro_use]\nmod service;\nmod cli;\nmod command;\nmod rpc;\n\nfn main() -\u003e sc_cli::Result\u003c()\u003e {\n    command::run()\n}\n","traces":[{"line":11,"address":[20327248],"length":1,"stats":{"Line":0},"fn_name":"main"},{"line":12,"address":[20327256],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":0,"coverable":2},{"path":["/","home","rotor","work","src","polka","equilibrium-financial-pallet","node","src","rpc.rs"],"content":"//! A collection of node-specific RPC methods.\n//! Substrate provides the `sc-rpc` crate, which defines the core RPC layer\n//! used by Substrate nodes. This file extends those RPC definitions with\n//! capabilities that are specific to this project's runtime configuration.\n\n#![warn(missing_docs)]\n\nuse std::sync::Arc;\n\nuse node_template_runtime::{opaque::Block, AccountId, Balance, Index};\npub use sc_rpc_api::DenyUnsafe;\nuse sp_api::ProvideRuntimeApi;\nuse sp_block_builder::BlockBuilder;\nuse sp_blockchain::{Error as BlockChainError, HeaderBackend, HeaderMetadata};\nuse sp_transaction_pool::TransactionPool;\n\n/// Full client dependencies.\npub struct FullDeps\u003cC, P\u003e {\n    /// The client instance to use.\n    pub client: Arc\u003cC\u003e,\n    /// Transaction pool instance.\n    pub pool: Arc\u003cP\u003e,\n    /// Whether to deny unsafe calls\n    pub deny_unsafe: DenyUnsafe,\n}\n\n/// Instantiate all full RPC extensions.\npub fn create_full\u003cC, P\u003e(deps: FullDeps\u003cC, P\u003e) -\u003e jsonrpc_core::IoHandler\u003csc_rpc::Metadata\u003e\nwhere\n    C: ProvideRuntimeApi\u003cBlock\u003e,\n    C: HeaderBackend\u003cBlock\u003e + HeaderMetadata\u003cBlock, Error = BlockChainError\u003e + 'static,\n    C: Send + Sync + 'static,\n    C::Api: substrate_frame_rpc_system::AccountNonceApi\u003cBlock, AccountId, Index\u003e,\n    C::Api: pallet_transaction_payment_rpc::TransactionPaymentRuntimeApi\u003cBlock, Balance\u003e,\n    C::Api: BlockBuilder\u003cBlock\u003e,\n    P: TransactionPool + 'static,\n{\n    use pallet_transaction_payment_rpc::{TransactionPayment, TransactionPaymentApi};\n    use substrate_frame_rpc_system::{FullSystem, SystemApi};\n\n    let mut io = jsonrpc_core::IoHandler::default();\n    let FullDeps {\n        client,\n        pool,\n        deny_unsafe,\n    } = deps;\n\n    io.extend_with(SystemApi::to_delegate(FullSystem::new(\n        client.clone(),\n        pool,\n        deny_unsafe,\n    )));\n\n    io.extend_with(TransactionPaymentApi::to_delegate(TransactionPayment::new(\n        client.clone(),\n    )));\n\n    // Extend this RPC with a custom API by using the following syntax.\n    // `YourRpcStruct` should have a reference to a client, which is needed\n    // to call into the runtime.\n    // `io.extend_with(YourRpcTrait::to_delegate(YourRpcStruct::new(ReferenceToClient, ...)));`\n\n    io\n}\n","traces":[{"line":28,"address":[22082033,22081600],"length":1,"stats":{"Line":0},"fn_name":"create_full\u003csc_service::client::client::Client\u003csc_client_db::Backend\u003csp_runtime::generic::block::Block\u003csp_runtime::generic::header::Header\u003cu32, sp_runtime::traits::BlakeTwo256\u003e, sp_runtime::OpaqueExtrinsic\u003e\u003e, sc_service::client::call_executor::LocalCallExecutor\u003csc_client_db::Backend\u003csp_runtime::generic::block::Block\u003csp_runtime::generic::header::Header\u003cu32, sp_runtime::traits::BlakeTwo256\u003e, sp_runtime::OpaqueExtrinsic\u003e\u003e, sc_executor::native_executor::NativeExecutor\u003cnode_template::service::Executor\u003e\u003e, sp_runtime::generic::block::Block\u003csp_runtime::generic::header::Header\u003cu32, sp_runtime::traits::BlakeTwo256\u003e, sp_runtime::OpaqueExtrinsic\u003e, node_template_runtime::RuntimeApi\u003e,sc_transaction_pool::BasicPool\u003csc_transaction_pool::api::FullChainApi\u003csc_service::client::client::Client\u003csc_client_db::Backend\u003csp_runtime::generic::block::Block\u003csp_runtime::generic::header::Header\u003cu32, sp_runtime::traits::BlakeTwo256\u003e, sp_runtime::OpaqueExtrinsic\u003e\u003e, sc_service::client::call_executor::LocalCallExecutor\u003csc_client_db::Backend\u003csp_runtime::generic::block::Block\u003csp_runtime::generic::header::Header\u003cu32, sp_runtime::traits::BlakeTwo256\u003e, sp_runtime::OpaqueExtrinsic\u003e\u003e, sc_executor::native_executor::NativeExecutor\u003cnode_template::service::Executor\u003e\u003e, sp_runtime::generic::block::Block\u003csp_runtime::generic::header::Header\u003cu32, sp_runtime::traits::BlakeTwo256\u003e, sp_runtime::OpaqueExtrinsic\u003e, node_template_runtime::RuntimeApi\u003e, sp_runtime::generic::block::Block\u003csp_runtime::generic::header::Header\u003cu32, sp_runtime::traits::BlakeTwo256\u003e, sp_runtime::OpaqueExtrinsic\u003e\u003e, sp_runtime::generic::block::Block\u003csp_runtime::generic::header::Header\u003cu32, sp_runtime::traits::BlakeTwo256\u003e, sp_runtime::OpaqueExtrinsic\u003e\u003e\u003e"},{"line":41,"address":[22081610],"length":1,"stats":{"Line":0},"fn_name":null},{"line":43,"address":[22081680],"length":1,"stats":{"Line":0},"fn_name":null},{"line":44,"address":[22081709],"length":1,"stats":{"Line":0},"fn_name":null},{"line":45,"address":[22081734],"length":1,"stats":{"Line":0},"fn_name":null},{"line":48,"address":[22081753,22081830],"length":1,"stats":{"Line":0},"fn_name":null},{"line":49,"address":[22081770],"length":1,"stats":{"Line":0},"fn_name":null},{"line":50,"address":[22081813],"length":1,"stats":{"Line":0},"fn_name":null},{"line":54,"address":[22081932,22081898],"length":1,"stats":{"Line":0},"fn_name":null},{"line":55,"address":[22081915],"length":1,"stats":{"Line":0},"fn_name":null},{"line":63,"address":[22081984],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":0,"coverable":11},{"path":["/","home","rotor","work","src","polka","equilibrium-financial-pallet","node","src","service.rs"],"content":"//! Service and ServiceFactory implementation. Specialized wrapper over substrate service.\n\nuse node_template_runtime::{self, opaque::Block, RuntimeApi};\nuse sc_client_api::{ExecutorProvider, RemoteBackend};\nuse sc_executor::native_executor_instance;\npub use sc_executor::NativeExecutor;\nuse sc_finality_grandpa::{\n    FinalityProofProvider as GrandpaFinalityProofProvider, SharedVoterState,\n};\nuse sc_service::{error::Error as ServiceError, Configuration, TaskManager};\nuse sp_consensus_aura::sr25519::AuthorityPair as AuraPair;\nuse sp_inherents::InherentDataProviders;\nuse std::sync::Arc;\nuse std::time::Duration;\n\n// Our native executor instance.\nnative_executor_instance!(\n    pub Executor,\n    node_template_runtime::api::dispatch,\n    node_template_runtime::native_version,\n);\n\ntype FullClient = sc_service::TFullClient\u003cBlock, RuntimeApi, Executor\u003e;\ntype FullBackend = sc_service::TFullBackend\u003cBlock\u003e;\ntype FullSelectChain = sc_consensus::LongestChain\u003cFullBackend, Block\u003e;\n\npub fn new_partial(\n    config: \u0026Configuration,\n) -\u003e Result\u003c\n    sc_service::PartialComponents\u003c\n        FullClient,\n        FullBackend,\n        FullSelectChain,\n        sp_consensus::DefaultImportQueue\u003cBlock, FullClient\u003e,\n        sc_transaction_pool::FullPool\u003cBlock, FullClient\u003e,\n        (\n            sc_consensus_aura::AuraBlockImport\u003c\n                Block,\n                FullClient,\n                sc_finality_grandpa::GrandpaBlockImport\u003c\n                    FullBackend,\n                    Block,\n                    FullClient,\n                    FullSelectChain,\n                \u003e,\n                AuraPair,\n            \u003e,\n            sc_finality_grandpa::LinkHalf\u003cBlock, FullClient, FullSelectChain\u003e,\n        ),\n    \u003e,\n    ServiceError,\n\u003e {\n    let inherent_data_providers = sp_inherents::InherentDataProviders::new();\n\n    let (client, backend, keystore, task_manager) =\n        sc_service::new_full_parts::\u003cBlock, RuntimeApi, Executor\u003e(\u0026config)?;\n    let client = Arc::new(client);\n\n    let select_chain = sc_consensus::LongestChain::new(backend.clone());\n\n    let transaction_pool = sc_transaction_pool::BasicPool::new_full(\n        config.transaction_pool.clone(),\n        config.prometheus_registry(),\n        task_manager.spawn_handle(),\n        client.clone(),\n    );\n\n    let (grandpa_block_import, grandpa_link) = sc_finality_grandpa::block_import(\n        client.clone(),\n        \u0026(client.clone() as Arc\u003c_\u003e),\n        select_chain.clone(),\n    )?;\n\n    let aura_block_import = sc_consensus_aura::AuraBlockImport::\u003c_, _, _, AuraPair\u003e::new(\n        grandpa_block_import.clone(),\n        client.clone(),\n    );\n\n    let import_queue = sc_consensus_aura::import_queue::\u003c_, _, _, AuraPair, _, _\u003e(\n        sc_consensus_aura::slot_duration(\u0026*client)?,\n        aura_block_import.clone(),\n        Some(Box::new(grandpa_block_import.clone())),\n        None,\n        client.clone(),\n        inherent_data_providers.clone(),\n        \u0026task_manager.spawn_handle(),\n        config.prometheus_registry(),\n        sp_consensus::CanAuthorWithNativeVersion::new(client.executor().clone()),\n    )?;\n\n    Ok(sc_service::PartialComponents {\n        client,\n        backend,\n        task_manager,\n        import_queue,\n        keystore,\n        select_chain,\n        transaction_pool,\n        inherent_data_providers,\n        other: (aura_block_import, grandpa_link),\n    })\n}\n\n/// Builds a new service for a full client.\npub fn new_full(config: Configuration) -\u003e Result\u003cTaskManager, ServiceError\u003e {\n    let sc_service::PartialComponents {\n        client,\n        backend,\n        mut task_manager,\n        import_queue,\n        keystore,\n        select_chain,\n        transaction_pool,\n        inherent_data_providers,\n        other: (block_import, grandpa_link),\n    } = new_partial(\u0026config)?;\n\n    let finality_proof_provider =\n        GrandpaFinalityProofProvider::new_for_service(backend.clone(), client.clone());\n\n    let (network, network_status_sinks, system_rpc_tx, network_starter) =\n        sc_service::build_network(sc_service::BuildNetworkParams {\n            config: \u0026config,\n            client: client.clone(),\n            transaction_pool: transaction_pool.clone(),\n            spawn_handle: task_manager.spawn_handle(),\n            import_queue,\n            on_demand: None,\n            block_announce_validator_builder: None,\n            finality_proof_request_builder: None,\n            finality_proof_provider: Some(finality_proof_provider.clone()),\n        })?;\n\n    if config.offchain_worker.enabled {\n        sc_service::build_offchain_workers(\n            \u0026config,\n            backend.clone(),\n            task_manager.spawn_handle(),\n            client.clone(),\n            network.clone(),\n        );\n    }\n\n    let role = config.role.clone();\n    let force_authoring = config.force_authoring;\n    let name = config.network.node_name.clone();\n    let enable_grandpa = !config.disable_grandpa;\n    let prometheus_registry = config.prometheus_registry().cloned();\n    let telemetry_connection_sinks = sc_service::TelemetryConnectionSinks::default();\n\n    let rpc_extensions_builder = {\n        let client = client.clone();\n        let pool = transaction_pool.clone();\n\n        Box::new(move |deny_unsafe, _| {\n            let deps = crate::rpc::FullDeps {\n                client: client.clone(),\n                pool: pool.clone(),\n                deny_unsafe,\n            };\n\n            crate::rpc::create_full(deps)\n        })\n    };\n\n    sc_service::spawn_tasks(sc_service::SpawnTasksParams {\n        network: network.clone(),\n        client: client.clone(),\n        keystore: keystore.clone(),\n        task_manager: \u0026mut task_manager,\n        transaction_pool: transaction_pool.clone(),\n        telemetry_connection_sinks: telemetry_connection_sinks.clone(),\n        rpc_extensions_builder: rpc_extensions_builder,\n        on_demand: None,\n        remote_blockchain: None,\n        backend,\n        network_status_sinks,\n        system_rpc_tx,\n        config,\n    })?;\n\n    if role.is_authority() {\n        let proposer = sc_basic_authorship::ProposerFactory::new(\n            client.clone(),\n            transaction_pool,\n            prometheus_registry.as_ref(),\n        );\n\n        let can_author_with =\n            sp_consensus::CanAuthorWithNativeVersion::new(client.executor().clone());\n\n        let aura = sc_consensus_aura::start_aura::\u003c_, _, _, _, _, AuraPair, _, _, _\u003e(\n            sc_consensus_aura::slot_duration(\u0026*client)?,\n            client.clone(),\n            select_chain,\n            block_import,\n            proposer,\n            network.clone(),\n            inherent_data_providers.clone(),\n            force_authoring,\n            keystore.clone(),\n            can_author_with,\n        )?;\n\n        // the AURA authoring task is considered essential, i.e. if it\n        // fails we take down the service with it.\n        task_manager\n            .spawn_essential_handle()\n            .spawn_blocking(\"aura\", aura);\n    }\n\n    // if the node isn't actively participating in consensus then it doesn't\n    // need a keystore, regardless of which protocol we use below.\n    let keystore = if role.is_authority() {\n        Some(keystore as sp_core::traits::BareCryptoStorePtr)\n    } else {\n        None\n    };\n\n    let grandpa_config = sc_finality_grandpa::Config {\n        // FIXME #1578 make this available through chainspec\n        gossip_duration: Duration::from_millis(333),\n        justification_period: 512,\n        name: Some(name),\n        observer_enabled: false,\n        keystore,\n        is_authority: role.is_network_authority(),\n    };\n\n    if enable_grandpa {\n        // start the full GRANDPA voter\n        // NOTE: non-authorities could run the GRANDPA observer protocol, but at\n        // this point the full voter should provide better guarantees of block\n        // and vote data availability than the observer. The observer has not\n        // been tested extensively yet and having most nodes in a network run it\n        // could lead to finality stalls.\n        let grandpa_config = sc_finality_grandpa::GrandpaParams {\n            config: grandpa_config,\n            link: grandpa_link,\n            network,\n            inherent_data_providers,\n            telemetry_on_connect: Some(telemetry_connection_sinks.on_connect_stream()),\n            voting_rule: sc_finality_grandpa::VotingRulesBuilder::default().build(),\n            prometheus_registry,\n            shared_voter_state: SharedVoterState::empty(),\n        };\n\n        // the GRANDPA voter task is considered infallible, i.e.\n        // if it fails we take down the service with it.\n        task_manager.spawn_essential_handle().spawn_blocking(\n            \"grandpa-voter\",\n            sc_finality_grandpa::run_grandpa_voter(grandpa_config)?,\n        );\n    } else {\n        sc_finality_grandpa::setup_disabled_grandpa(client, \u0026inherent_data_providers, network)?;\n    }\n\n    network_starter.start_network();\n    Ok(task_manager)\n}\n\n/// Builds a new service for a light client.\npub fn new_light(config: Configuration) -\u003e Result\u003cTaskManager, ServiceError\u003e {\n    let (client, backend, keystore, mut task_manager, on_demand) =\n        sc_service::new_light_parts::\u003cBlock, RuntimeApi, Executor\u003e(\u0026config)?;\n\n    let transaction_pool = Arc::new(sc_transaction_pool::BasicPool::new_light(\n        config.transaction_pool.clone(),\n        config.prometheus_registry(),\n        task_manager.spawn_handle(),\n        client.clone(),\n        on_demand.clone(),\n    ));\n\n    let grandpa_block_import = sc_finality_grandpa::light_block_import(\n        client.clone(),\n        backend.clone(),\n        \u0026(client.clone() as Arc\u003c_\u003e),\n        Arc::new(on_demand.checker().clone()) as Arc\u003c_\u003e,\n    )?;\n    let finality_proof_import = grandpa_block_import.clone();\n    let finality_proof_request_builder =\n        finality_proof_import.create_finality_proof_request_builder();\n\n    let import_queue = sc_consensus_aura::import_queue::\u003c_, _, _, AuraPair, _, _\u003e(\n        sc_consensus_aura::slot_duration(\u0026*client)?,\n        grandpa_block_import,\n        None,\n        Some(Box::new(finality_proof_import)),\n        client.clone(),\n        InherentDataProviders::new(),\n        \u0026task_manager.spawn_handle(),\n        config.prometheus_registry(),\n        sp_consensus::NeverCanAuthor,\n    )?;\n\n    let finality_proof_provider =\n        GrandpaFinalityProofProvider::new_for_service(backend.clone(), client.clone());\n\n    let (network, network_status_sinks, system_rpc_tx, network_starter) =\n        sc_service::build_network(sc_service::BuildNetworkParams {\n            config: \u0026config,\n            client: client.clone(),\n            transaction_pool: transaction_pool.clone(),\n            spawn_handle: task_manager.spawn_handle(),\n            import_queue,\n            on_demand: Some(on_demand.clone()),\n            block_announce_validator_builder: None,\n            finality_proof_request_builder: Some(finality_proof_request_builder),\n            finality_proof_provider: Some(finality_proof_provider),\n        })?;\n\n    if config.offchain_worker.enabled {\n        sc_service::build_offchain_workers(\n            \u0026config,\n            backend.clone(),\n            task_manager.spawn_handle(),\n            client.clone(),\n            network.clone(),\n        );\n    }\n\n    sc_service::spawn_tasks(sc_service::SpawnTasksParams {\n        remote_blockchain: Some(backend.remote_blockchain()),\n        transaction_pool,\n        task_manager: \u0026mut task_manager,\n        on_demand: Some(on_demand),\n        rpc_extensions_builder: Box::new(|_, _| ()),\n        telemetry_connection_sinks: sc_service::TelemetryConnectionSinks::default(),\n        config,\n        client,\n        keystore,\n        backend,\n        network,\n        network_status_sinks,\n        system_rpc_tx,\n    })?;\n\n    network_starter.start_network();\n\n    Ok(task_manager)\n}\n","traces":[{"line":27,"address":[22280944,22280752],"length":1,"stats":{"Line":0},"fn_name":"new_partial"},{"line":53,"address":[22280776],"length":1,"stats":{"Line":0},"fn_name":null},{"line":55,"address":[22281638,22280959,22281411,22281599],"length":1,"stats":{"Line":0},"fn_name":null},{"line":57,"address":[22281715,22281315],"length":1,"stats":{"Line":0},"fn_name":null},{"line":59,"address":[22281739],"length":1,"stats":{"Line":0},"fn_name":null},{"line":62,"address":[22281801],"length":1,"stats":{"Line":0},"fn_name":null},{"line":63,"address":[22281831],"length":1,"stats":{"Line":0},"fn_name":null},{"line":64,"address":[22281858],"length":1,"stats":{"Line":0},"fn_name":null},{"line":65,"address":[22281901],"length":1,"stats":{"Line":0},"fn_name":null},{"line":69,"address":[22282011],"length":1,"stats":{"Line":0},"fn_name":null},{"line":70,"address":[22282058],"length":1,"stats":{"Line":0},"fn_name":null},{"line":71,"address":[22282128],"length":1,"stats":{"Line":0},"fn_name":null},{"line":75,"address":[22283071],"length":1,"stats":{"Line":0},"fn_name":null},{"line":76,"address":[22283094],"length":1,"stats":{"Line":0},"fn_name":null},{"line":80,"address":[22283538,22283312,22283262,22283164,22283236],"length":1,"stats":{"Line":0},"fn_name":null},{"line":81,"address":[22283543,22283302],"length":1,"stats":{"Line":0},"fn_name":null},{"line":82,"address":[22283567,22283672],"length":1,"stats":{"Line":0},"fn_name":null},{"line":83,"address":[22283711],"length":1,"stats":{"Line":0},"fn_name":null},{"line":84,"address":[22283788,22283739],"length":1,"stats":{"Line":0},"fn_name":null},{"line":85,"address":[22283812,22283858],"length":1,"stats":{"Line":0},"fn_name":null},{"line":86,"address":[22283874],"length":1,"stats":{"Line":0},"fn_name":null},{"line":87,"address":[22283924],"length":1,"stats":{"Line":0},"fn_name":null},{"line":88,"address":[22283983,22284089],"length":1,"stats":{"Line":0},"fn_name":null},{"line":91,"address":[22285452],"length":1,"stats":{"Line":0},"fn_name":null},{"line":92,"address":[22284778],"length":1,"stats":{"Line":0},"fn_name":null},{"line":93,"address":[22284794],"length":1,"stats":{"Line":0},"fn_name":null},{"line":94,"address":[22284810],"length":1,"stats":{"Line":0},"fn_name":null},{"line":95,"address":[22284900],"length":1,"stats":{"Line":0},"fn_name":null},{"line":96,"address":[22284964],"length":1,"stats":{"Line":0},"fn_name":null},{"line":97,"address":[22284980],"length":1,"stats":{"Line":0},"fn_name":null},{"line":98,"address":[22284996],"length":1,"stats":{"Line":0},"fn_name":null},{"line":99,"address":[22285012],"length":1,"stats":{"Line":0},"fn_name":null},{"line":100,"address":[22285028],"length":1,"stats":{"Line":0},"fn_name":null},{"line":105,"address":[22286912,22287275],"length":1,"stats":{"Line":0},"fn_name":"new_full"},{"line":106,"address":[22287306,22288159,22286929,22287970],"length":1,"stats":{"Line":0},"fn_name":null},{"line":107,"address":[22287449],"length":1,"stats":{"Line":0},"fn_name":null},{"line":108,"address":[22287473],"length":1,"stats":{"Line":0},"fn_name":null},{"line":109,"address":[22287497],"length":1,"stats":{"Line":0},"fn_name":null},{"line":110,"address":[22287544],"length":1,"stats":{"Line":0},"fn_name":null},{"line":111,"address":[22287616],"length":1,"stats":{"Line":0},"fn_name":null},{"line":112,"address":[22287640],"length":1,"stats":{"Line":0},"fn_name":null},{"line":113,"address":[22287664],"length":1,"stats":{"Line":0},"fn_name":null},{"line":114,"address":[22287688],"length":1,"stats":{"Line":0},"fn_name":null},{"line":115,"address":[22287712],"length":1,"stats":{"Line":0},"fn_name":null},{"line":118,"address":[22287952,22288342,22296968],"length":1,"stats":{"Line":0},"fn_name":null},{"line":121,"address":[22288777,22289207,22289239,22289488],"length":1,"stats":{"Line":0},"fn_name":null},{"line":124,"address":[22288459],"length":1,"stats":{"Line":0},"fn_name":null},{"line":125,"address":[22288539,22288498],"length":1,"stats":{"Line":0},"fn_name":null},{"line":126,"address":[22288547],"length":1,"stats":{"Line":0},"fn_name":null},{"line":127,"address":[22288589],"length":1,"stats":{"Line":0},"fn_name":null},{"line":128,"address":[22288661],"length":1,"stats":{"Line":0},"fn_name":null},{"line":129,"address":[22288673],"length":1,"stats":{"Line":0},"fn_name":null},{"line":130,"address":[22288685],"length":1,"stats":{"Line":0},"fn_name":null},{"line":131,"address":[22288705,22288746],"length":1,"stats":{"Line":0},"fn_name":null},{"line":134,"address":[22289975,22290266,22289470],"length":1,"stats":{"Line":0},"fn_name":null},{"line":137,"address":[22289988],"length":1,"stats":{"Line":0},"fn_name":null},{"line":138,"address":[22290027],"length":1,"stats":{"Line":0},"fn_name":null},{"line":139,"address":[22290070],"length":1,"stats":{"Line":0},"fn_name":null},{"line":140,"address":[22290117],"length":1,"stats":{"Line":0},"fn_name":null},{"line":144,"address":[22290276],"length":1,"stats":{"Line":0},"fn_name":null},{"line":145,"address":[22290306],"length":1,"stats":{"Line":0},"fn_name":null},{"line":146,"address":[22290319],"length":1,"stats":{"Line":0},"fn_name":null},{"line":147,"address":[22290370],"length":1,"stats":{"Line":0},"fn_name":null},{"line":148,"address":[22290442,22290386],"length":1,"stats":{"Line":0},"fn_name":null},{"line":149,"address":[22290481],"length":1,"stats":{"Line":0},"fn_name":null},{"line":152,"address":[22290520],"length":1,"stats":{"Line":0},"fn_name":null},{"line":153,"address":[22290567,22290609],"length":1,"stats":{"Line":0},"fn_name":null},{"line":155,"address":[8554725,8554656],"length":1,"stats":{"Line":0},"fn_name":"{{closure}}"},{"line":156,"address":[8554786],"length":1,"stats":{"Line":0},"fn_name":null},{"line":157,"address":[8554745,8554691],"length":1,"stats":{"Line":0},"fn_name":null},{"line":158,"address":[8554755],"length":1,"stats":{"Line":0},"fn_name":null},{"line":162,"address":[8554817],"length":1,"stats":{"Line":0},"fn_name":null},{"line":166,"address":[22291647,22291693,22291268,22291618],"length":1,"stats":{"Line":0},"fn_name":null},{"line":167,"address":[22290809],"length":1,"stats":{"Line":0},"fn_name":null},{"line":168,"address":[22290848,22290890],"length":1,"stats":{"Line":0},"fn_name":null},{"line":169,"address":[22290944,22290906],"length":1,"stats":{"Line":0},"fn_name":null},{"line":171,"address":[22290960,22290998],"length":1,"stats":{"Line":0},"fn_name":null},{"line":172,"address":[22291014],"length":1,"stats":{"Line":0},"fn_name":null},{"line":173,"address":[22291044],"length":1,"stats":{"Line":0},"fn_name":null},{"line":174,"address":[22291060],"length":1,"stats":{"Line":0},"fn_name":null},{"line":175,"address":[22291072],"length":1,"stats":{"Line":0},"fn_name":null},{"line":176,"address":[22291084],"length":1,"stats":{"Line":0},"fn_name":null},{"line":177,"address":[22291100],"length":1,"stats":{"Line":0},"fn_name":null},{"line":178,"address":[22291116],"length":1,"stats":{"Line":0},"fn_name":null},{"line":179,"address":[22291156],"length":1,"stats":{"Line":0},"fn_name":null},{"line":182,"address":[22292042],"length":1,"stats":{"Line":0},"fn_name":null},{"line":184,"address":[22292094],"length":1,"stats":{"Line":0},"fn_name":null},{"line":185,"address":[22292133],"length":1,"stats":{"Line":0},"fn_name":null},{"line":186,"address":[22292173],"length":1,"stats":{"Line":0},"fn_name":null},{"line":189,"address":[22292294],"length":1,"stats":{"Line":0},"fn_name":null},{"line":193,"address":[22292477,22292527,22292394,22292760],"length":1,"stats":{"Line":0},"fn_name":null},{"line":194,"address":[22292509,22292773],"length":1,"stats":{"Line":0},"fn_name":null},{"line":195,"address":[22292789],"length":1,"stats":{"Line":0},"fn_name":null},{"line":196,"address":[22292821],"length":1,"stats":{"Line":0},"fn_name":null},{"line":197,"address":[22292965],"length":1,"stats":{"Line":0},"fn_name":null},{"line":198,"address":[22293021],"length":1,"stats":{"Line":0},"fn_name":null},{"line":199,"address":[22293068,22293142],"length":1,"stats":{"Line":0},"fn_name":null},{"line":201,"address":[22293166],"length":1,"stats":{"Line":0},"fn_name":null},{"line":202,"address":[22293181],"length":1,"stats":{"Line":0},"fn_name":null},{"line":207,"address":[22293625,22293915],"length":1,"stats":{"Line":0},"fn_name":null},{"line":209,"address":[22293958,22293866],"length":1,"stats":{"Line":0},"fn_name":null},{"line":214,"address":[22294020,22294079],"length":1,"stats":{"Line":0},"fn_name":null},{"line":215,"address":[22294088],"length":1,"stats":{"Line":0},"fn_name":null},{"line":217,"address":[22294059],"length":1,"stats":{"Line":0},"fn_name":null},{"line":222,"address":[22294133],"length":1,"stats":{"Line":0},"fn_name":null},{"line":224,"address":[22294170],"length":1,"stats":{"Line":0},"fn_name":null},{"line":227,"address":[22294282],"length":1,"stats":{"Line":0},"fn_name":null},{"line":230,"address":[22296000,22294503,22295944],"length":1,"stats":{"Line":0},"fn_name":null},{"line":242,"address":[22294795],"length":1,"stats":{"Line":0},"fn_name":null},{"line":243,"address":[22294862,22294957],"length":1,"stats":{"Line":0},"fn_name":null},{"line":245,"address":[22295012],"length":1,"stats":{"Line":0},"fn_name":null},{"line":250,"address":[22295310,22295639],"length":1,"stats":{"Line":0},"fn_name":null},{"line":252,"address":[22295685,22295516,22295471,22295356,22295494],"length":1,"stats":{"Line":0},"fn_name":null},{"line":255,"address":[22294529,22296005,22295965],"length":1,"stats":{"Line":0},"fn_name":null},{"line":258,"address":[22296156],"length":1,"stats":{"Line":0},"fn_name":null},{"line":259,"address":[22296183],"length":1,"stats":{"Line":0},"fn_name":null},{"line":263,"address":[22299520,22299795],"length":1,"stats":{"Line":0},"fn_name":"new_light"},{"line":264,"address":[22299969],"length":1,"stats":{"Line":0},"fn_name":null},{"line":267,"address":[22300656,22300561],"length":1,"stats":{"Line":0},"fn_name":null},{"line":268,"address":[22300112],"length":1,"stats":{"Line":0},"fn_name":null},{"line":269,"address":[22300429],"length":1,"stats":{"Line":0},"fn_name":null},{"line":270,"address":[22300456],"length":1,"stats":{"Line":0},"fn_name":null},{"line":271,"address":[22300499],"length":1,"stats":{"Line":0},"fn_name":null},{"line":272,"address":[22300546],"length":1,"stats":{"Line":0},"fn_name":null},{"line":276,"address":[22300703],"length":1,"stats":{"Line":0},"fn_name":null},{"line":277,"address":[22300742],"length":1,"stats":{"Line":0},"fn_name":null},{"line":278,"address":[22300781,22300822],"length":1,"stats":{"Line":0},"fn_name":null},{"line":279,"address":[22300869,22300907,22300978],"length":1,"stats":{"Line":0},"fn_name":null},{"line":281,"address":[22301631],"length":1,"stats":{"Line":0},"fn_name":null},{"line":282,"address":[22301654],"length":1,"stats":{"Line":0},"fn_name":null},{"line":286,"address":[22302050,22301725,22301811,22302239,22302296],"length":1,"stats":{"Line":0},"fn_name":null},{"line":287,"address":[22301827],"length":1,"stats":{"Line":0},"fn_name":null},{"line":288,"address":[22301891],"length":1,"stats":{"Line":0},"fn_name":null},{"line":289,"address":[22302301,22301911],"length":1,"stats":{"Line":0},"fn_name":null},{"line":290,"address":[22302348,22302443],"length":1,"stats":{"Line":0},"fn_name":null},{"line":291,"address":[22302459],"length":1,"stats":{"Line":0},"fn_name":null},{"line":292,"address":[22302494],"length":1,"stats":{"Line":0},"fn_name":null},{"line":293,"address":[22302555],"length":1,"stats":{"Line":0},"fn_name":null},{"line":297,"address":[22307241,22303324],"length":1,"stats":{"Line":0},"fn_name":null},{"line":300,"address":[22304324],"length":1,"stats":{"Line":0},"fn_name":null},{"line":303,"address":[22303472],"length":1,"stats":{"Line":0},"fn_name":null},{"line":304,"address":[22303511],"length":1,"stats":{"Line":0},"fn_name":null},{"line":305,"address":[22303542],"length":1,"stats":{"Line":0},"fn_name":null},{"line":306,"address":[22303587],"length":1,"stats":{"Line":0},"fn_name":null},{"line":307,"address":[22303705,22303667],"length":1,"stats":{"Line":0},"fn_name":null},{"line":308,"address":[22303713],"length":1,"stats":{"Line":0},"fn_name":null},{"line":309,"address":[22303725],"length":1,"stats":{"Line":0},"fn_name":null},{"line":310,"address":[22303765],"length":1,"stats":{"Line":0},"fn_name":null},{"line":313,"address":[22304747,22305038,22304460],"length":1,"stats":{"Line":0},"fn_name":null},{"line":316,"address":[22304760],"length":1,"stats":{"Line":0},"fn_name":null},{"line":317,"address":[22304799],"length":1,"stats":{"Line":0},"fn_name":null},{"line":318,"address":[22304842],"length":1,"stats":{"Line":0},"fn_name":null},{"line":319,"address":[22304889],"length":1,"stats":{"Line":0},"fn_name":null},{"line":323,"address":[22305974,22305538,22305928],"length":1,"stats":{"Line":0},"fn_name":null},{"line":324,"address":[22305048],"length":1,"stats":{"Line":0},"fn_name":null},{"line":325,"address":[22305126],"length":1,"stats":{"Line":0},"fn_name":null},{"line":327,"address":[22305150],"length":1,"stats":{"Line":0},"fn_name":null},{"line":328,"address":[8554928,8554946],"length":1,"stats":{"Line":0},"fn_name":"{{closure}}"},{"line":329,"address":[22305295],"length":1,"stats":{"Line":0},"fn_name":null},{"line":330,"address":[22305325],"length":1,"stats":{"Line":0},"fn_name":null},{"line":331,"address":[22305402],"length":1,"stats":{"Line":0},"fn_name":null},{"line":332,"address":[22305418],"length":1,"stats":{"Line":0},"fn_name":null},{"line":333,"address":[22305434],"length":1,"stats":{"Line":0},"fn_name":null},{"line":334,"address":[22305450],"length":1,"stats":{"Line":0},"fn_name":null},{"line":335,"address":[22305466],"length":1,"stats":{"Line":0},"fn_name":null},{"line":336,"address":[22305482],"length":1,"stats":{"Line":0},"fn_name":null},{"line":339,"address":[22306184],"length":1,"stats":{"Line":0},"fn_name":null},{"line":341,"address":[22306211],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":0,"coverable":168},{"path":["/","home","rotor","work","src","polka","equilibrium-financial-pallet","pallets","financial","src","lib.rs"],"content":"// Copyright (C) 2020 equilibrium.\n// SPDX-License-Identifier: Apache-2.0\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n//! # Financial Pallet Module\n//! ## Overview\n//!\n//! Equilibrium's Financial Pallet is an open-source substrate module that subscribes to external\n//! price feed/oracle, gathers asset prices and calculates financial metrics based on the\n//! information collected.\n//!\n//! ## Genesis Config\n//!\n//! You can provide initial price logs for the assets using [`GenesisConfig`](./struct.GenesisConfig.html).\n\n#![warn(missing_docs)]\n#![cfg_attr(not(feature = \"std\"), no_std)]\n\nuse core::ops::{AddAssign, BitOrAssign, ShlAssign};\nuse core::time::Duration;\nuse financial_primitives::capvec::CapVec;\nuse financial_primitives::{IntoTypeIterator, OnPriceSet, PricePeriod, PricePeriodError};\nuse frame_support::codec::{Codec, Decode, Encode};\nuse frame_support::dispatch::{DispatchError, Parameter};\nuse frame_support::traits::{Get, UnixTime};\nuse frame_support::{decl_error, decl_event, decl_module, decl_storage, dispatch, ensure};\nuse frame_system::ensure_signed;\nuse math::{\n    calc_return_func, calc_return_func_exp_vola, calc_return_iter, decay, demeaned, exp_corr,\n    exp_vola, last_recurrent_ewma, mean, mul, regular_corr, regular_vola, squared, sum, ConstType,\n    MathError, MathResult,\n};\nuse sp_std::cmp::{max, min};\nuse sp_std::convert::TryInto;\nuse sp_std::iter::Iterator;\nuse sp_std::ops::Range;\nuse sp_std::prelude::Vec;\nuse sp_std::vec;\nuse substrate_fixed::traits::{FixedSigned, ToFixed};\nuse substrate_fixed::transcendental::sqrt;\n\npub use math::{CalcCorrelationType, CalcReturnType, CalcVolatilityType};\n\nmod math;\n\n#[cfg(test)]\nmod mock;\n\n#[cfg(test)]\nmod tests;\n\n/// The module configuration trait.\npub trait Trait: frame_system::Trait {\n    /// The overarching event type.\n    type Event: From\u003cEvent\u003cSelf\u003e\u003e + Into\u003c\u003cSelf as frame_system::Trait\u003e::Event\u003e;\n    /// Implementation for the current unix timestamp provider. The\n    /// [`pallet_timestamp`](https://crates.parity.io/pallet_timestamp/index.html) is\n    /// right choice in most cases.\n    type UnixTime: UnixTime;\n    /// Number of price data points stored and used for calculations.\n    type PriceCount: Get\u003cu32\u003e;\n    /// The period of the collected prices in minutes.\n    type PricePeriod: Get\u003cu32\u003e;\n    /// System wide type for representing various assets such as BTC, ETH, EOS, etc.\n    type Asset: Parameter + Copy + IntoTypeIterator;\n    /// Primitive integer type that [`FixedNumber`](#associatedtype.FixedNumber) based on.\n    type FixedNumberBits: Copy + ToFixed + AddAssign + BitOrAssign + ShlAssign;\n    /// Fixed point data type with a required precision that used for all financial calculations.\n    type FixedNumber: Clone\n        + Copy\n        + Codec\n        + FixedSigned\u003cBits = Self::FixedNumberBits\u003e\n        + PartialOrd\u003cConstType\u003e\n        + From\u003cConstType\u003e;\n    /// System wide type for representing price values. It must be convertable to and\n    /// from [`FixedNumber`](#associatedtype.FixedNumber).\n    type Price: Parameter + Clone + From\u003cSelf::FixedNumber\u003e + Into\u003cSelf::FixedNumber\u003e;\n}\n\n/// Information about latest price update.\n#[derive(Encode, Decode, Clone, Default, PartialEq, Eq, Debug)]\npub struct PriceUpdate\u003cP\u003e {\n    /// Timestamp of the price period start for the latest price received.\n    pub period_start: Duration,\n    /// Latest price timestamp.\n    pub time: Duration,\n    /// Latest price value.\n    pub price: P,\n}\n\nimpl\u003cP\u003e PriceUpdate\u003cP\u003e {\n    #[cfg(test)]\n    fn new(period_start: Duration, time: Duration, price: P) -\u003e PriceUpdate\u003cP\u003e {\n        PriceUpdate {\n            period_start,\n            time,\n            price,\n        }\n    }\n}\n\n/// History of price changes for asset\n#[derive(Encode, Decode, Clone, Default, PartialEq, Eq, Debug)]\npub struct PriceLog\u003cF\u003e {\n    /// Timestamp of the latest point in the log.\n    pub latest_timestamp: Duration,\n    /// History of prices changes for last [`PriceCount`](./trait.Trait.html#associatedtype.PriceCount) periods in succesion.\n    pub prices: CapVec\u003cF\u003e,\n}\n\n/// Financial metrics for asset\n#[derive(Encode, Decode, Clone, Default, PartialEq, Eq, Debug)]\npub struct FinancialMetrics\u003cA, P\u003e {\n    /// Start of the period inclusive for which metcis were calculated.\n    pub period_start: Duration,\n    /// End of the period exclusive for which metcis were calculated.\n    pub period_end: Duration,\n    /// Log returns\n    pub log_returns: Vec\u003cP\u003e,\n    /// Volatility\n    pub volatility: P,\n    /// Correlations for all assets\n    pub correlations: Vec\u003c(A, P)\u003e,\n}\n\ndecl_storage! {\n    trait Store for Module\u003cT: Trait\u003e as FinancialModule {\n        /// Latest price updates on per asset basis.\n        Updates get(fn updates): map hasher(blake2_128_concat) T::Asset =\u003e Option\u003cPriceUpdate\u003cT::FixedNumber\u003e\u003e;\n        /// Price log on per asset basis.\n        PriceLogs get(fn price_logs): map hasher(blake2_128_concat) T::Asset =\u003e PriceLog\u003cT::FixedNumber\u003e;\n        /// Financial metrics on per asset basis.\n        Metrics get(fn metrics): map hasher(blake2_128_concat) T::Asset =\u003e Option\u003cFinancialMetrics\u003cT::Asset, T::Price\u003e\u003e;\n    }\n\n    add_extra_genesis {\n        /// Initial price logs on per asset basis.\n        config(prices): Vec\u003c(T::Asset, Vec\u003cT::Price\u003e, Duration)\u003e;\n\n        build(|config| {\n            let max_price_count = 180;\n            // Limit max value of `PricePeriod` to 7 days\n            let max_price_period = 7 * 24 * 60;\n\n            let price_count = T::PriceCount::get();\n            assert!(price_count \u003c= max_price_count, \"PriceCount can not be greater than {}\", max_price_count);\n\n            let price_period = T::PricePeriod::get();\n            assert!(price_period \u003c= max_price_period, \"PricePeriod can not be greater than {}\", max_price_period);\n\n            // We assume that each config item for a given asset contains prices of the past perionds going in\n            // succession. Timestamp of the last period is specified in `latest_timestamp`.\n            for (asset, values, latest_timestamp) in config.prices.iter() {\n                let mut prices = CapVec::\u003cT::FixedNumber\u003e::new(price_count);\n\n                for v in values.iter() {\n                    prices.push(v.clone().into());\n                }\n\n                PriceLogs::\u003cT\u003e::insert(asset, PriceLog {\n                    latest_timestamp: *latest_timestamp,\n                    prices\n                });\n            }\n        });\n    }\n}\n\ndecl_event!(\n    pub enum Event\u003cT\u003e\n    where\n        Asset = \u003cT as Trait\u003e::Asset,\n    {\n        /// Financial parameters for the specified asset have been recalculeted\n        Recalculated(Asset),\n    }\n);\n\ndecl_error! {\n    /// Error for the Financial Pallet module.\n    pub enum Error for Module\u003cT: Trait\u003e {\n        /// Timestamp of the received price is in the past.\n        PeriodIsInThePast,\n        /// Overflow occured during financial calculation process.\n        Overflow,\n        /// Division by zero occured during financial calculation process.\n        DivisionByZero,\n        /// Price log is not long enough to calculate required value.\n        NotEnoughPoints,\n        /// Required functionality is not implemented.\n        NotImplemented,\n        /// Storage of the pallet is in an unexpected state.\n        InvalidStorage,\n        /// Specified period start timestamp is invalid for current\n        /// [`PricePeriod`](./trait.Trait.html#associatedtype.PricePeriod) value.\n        InvalidPeriodStart,\n        /// An invalid argument passed to the transcendental function (i.e. log, sqrt, etc.)\n        /// during financial calculation process.\n        Transcendental,\n        /// An invalid argument passed to the function.\n        InvalidArgument,\n    }\n}\n\ndecl_module! {\n    /// Financial Pallet module declaration.\n    pub struct Module\u003cT: Trait\u003e for enum Call where origin: T::Origin {\n        type Error = Error\u003cT\u003e;\n\n        fn deposit_event() = default;\n\n        const PriceCount: u32 = T::PriceCount::get();\n        const PricePeriod: u32 = T::PricePeriod::get();\n\n        /// Recalculates financial metrics for a given asset\n        #[weight = 10_000 + T::DbWeight::get().writes(1)]\n        pub fn recalc(origin, asset: T::Asset) -\u003e dispatch::DispatchResult {\n            ensure_signed(origin)?;\n\n            let return_type = CalcReturnType::Log;\n            let log_returns = \u003cModule\u003cT\u003e as Financial\u003e::calc_return(return_type, asset)?;\n            let volatility = \u003cModule\u003cT\u003e as Financial\u003e::calc_vol(return_type, CalcVolatilityType::Regular, asset)?;\n\n            let mut correlations = vec![];\n\n            let mut period: Option\u003cRange\u003cDuration\u003e\u003e = None;\n\n            for asset2 in T::Asset::into_type_iter() {\n                let (correlation, curr_period) = \u003cModule\u003cT\u003e as Financial\u003e::calc_corr(return_type, CalcCorrelationType::Regular, asset, asset2)?;\n\n                if let Some(ref prev_period) = period {\n                    // Ensure that all correlations calculated for the same period\n                    if prev_period != \u0026curr_period {\n                        return Err(Error::\u003cT\u003e::NotEnoughPoints.into());\n                    }\n                } else {\n                    period = Some(curr_period);\n                }\n\n                correlations.push((asset2, correlation));\n            }\n\n            if let Some(period) = period {\n                Metrics::\u003cT\u003e::mutate(\u0026asset, |metrics| {\n                    *metrics = Some(FinancialMetrics {\n                        period_start: period.start,\n                        period_end: period.end,\n                        log_returns,\n                        volatility,\n                        correlations,\n                    });\n                });\n\n                Ok(())\n            } else {\n                Err(Error::\u003cT\u003e::NotEnoughPoints.into())\n            }\n        }\n    }\n}\n\n#[derive(Debug, Eq, PartialEq)]\nenum GetNewPricesError {\n    Overflow,\n}\n\nfn get_new_prices\u003cP: Clone\u003e(\n    last_price: Option\u003cP\u003e,\n    new_price: P,\n    empty_periods: u32,\n    max_periods: u32,\n) -\u003e Result\u003cVec\u003cP\u003e, GetNewPricesError\u003e {\n    match last_price {\n        None =\u003e Ok(vec![new_price]),\n        Some(last_price) =\u003e {\n            // Calculate how many values to pre-populate the array with\n            // We will pre-fill up to `max_periods` elements (leaving out one for the new price)\n            let prices_size = min(\n                empty_periods,\n                max_periods\n                    .checked_sub(1)\n                    .ok_or(GetNewPricesError::Overflow)?,\n            ) as usize;\n\n            // Init the vector filled with last_price\n            let mut new_prices = vec![last_price.clone(); prices_size];\n\n            new_prices.push(new_price);\n\n            Ok(new_prices)\n        }\n    }\n}\n\nimpl\u003cT: Trait\u003e From\u003cGetNewPricesError\u003e for Error\u003cT\u003e {\n    fn from(error: GetNewPricesError) -\u003e Self {\n        match error {\n            GetNewPricesError::Overflow =\u003e Error::\u003cT\u003e::Overflow,\n        }\n    }\n}\n\n#[derive(Debug, Eq, PartialEq)]\nenum PricePeriodAction {\n    RemainsUnchanged,\n    StartedNew(u32),\n}\n\n#[derive(Debug, Eq, PartialEq)]\nstruct PricePeriodChange {\n    pub period_start: Duration,\n    pub action: PricePeriodAction,\n}\n\n#[derive(Debug, Eq, PartialEq)]\nenum PricePeriodChangeError {\n    DivisionByZero,\n    Overflow,\n    PeriodIsInThePast,\n    InvalidPeriodStart,\n}\n\nimpl From\u003cPricePeriodError\u003e for PricePeriodChangeError {\n    fn from(error: PricePeriodError) -\u003e Self {\n        match error {\n            PricePeriodError::DivisionByZero =\u003e PricePeriodChangeError::DivisionByZero,\n            PricePeriodError::Overflow =\u003e PricePeriodChangeError::Overflow,\n        }\n    }\n}\n\nimpl\u003cT: Trait\u003e From\u003cPricePeriodChangeError\u003e for Error\u003cT\u003e {\n    fn from(error: PricePeriodChangeError) -\u003e Self {\n        match error {\n            PricePeriodChangeError::DivisionByZero =\u003e Error::\u003cT\u003e::DivisionByZero,\n            PricePeriodChangeError::Overflow =\u003e Error::\u003cT\u003e::Overflow,\n            PricePeriodChangeError::PeriodIsInThePast =\u003e Error::\u003cT\u003e::PeriodIsInThePast,\n            PricePeriodChangeError::InvalidPeriodStart =\u003e Error::\u003cT\u003e::InvalidPeriodStart,\n        }\n    }\n}\n\n/// Calculates start timestamp of the period which contains `now` timestamp.\n/// Also  calculates number of periods elapsed since `prev_start` timestamp up until `now` timestamp.\nfn get_curr_period_info(\n    price_period: \u0026PricePeriod,\n    prev_start: Duration,\n    now: Duration,\n) -\u003e Result\u003c(Duration, i32), PricePeriodError\u003e {\n    let prev_period_id = price_period.get_period_id(prev_start)?;\n    let curr_period_id = price_period.get_period_id(now)?;\n\n    let prev: i32 = prev_period_id\n        .try_into()\n        .map_err(|_| PricePeriodError::Overflow)?;\n    let curr: i32 = curr_period_id\n        .try_into()\n        .map_err(|_| PricePeriodError::Overflow)?;\n    let delta: Result\u003c_, PricePeriodError\u003e =\n        curr.checked_sub(prev).ok_or(PricePeriodError::Overflow);\n    Ok((price_period.get_period_id_start(curr_period_id)?, delta?))\n}\n\n/// Dicides if the period change took place.\nfn get_period_change(\n    price_period: \u0026PricePeriod,\n    period_start: Option\u003cDuration\u003e,\n    now: Duration,\n) -\u003e Result\u003cPricePeriodChange, PricePeriodChangeError\u003e {\n    if let Some(period_start) = period_start {\n        ensure!(\n            price_period.is_valid_period_start(period_start)?,\n            PricePeriodChangeError::InvalidPeriodStart\n        );\n    }\n\n    match period_start {\n        // No `period_start` exists. It means that we received price update for the first time.\n        None =\u003e {\n            let period_start = price_period.get_period_start(now)?;\n\n            Ok(PricePeriodChange {\n                period_start,\n                action: PricePeriodAction::StartedNew(0),\n            })\n        }\n        Some(last_start) =\u003e {\n            let (current_start, periods_elapsed) =\n                get_curr_period_info(price_period, last_start, now)?;\n\n            if periods_elapsed \u003c 0 {\n                // Current period is in the past\n\n                Err(PricePeriodChangeError::PeriodIsInThePast)\n            } else if periods_elapsed == 0 {\n                // Period is not changed\n\n                Ok(PricePeriodChange {\n                    period_start: last_start,\n                    action: PricePeriodAction::RemainsUnchanged,\n                })\n            } else {\n                // Period is changed\n\n                let empty_periods = (periods_elapsed - 1) as u32;\n\n                Ok(PricePeriodChange {\n                    period_start: current_start,\n                    action: PricePeriodAction::StartedNew(empty_periods),\n                })\n            }\n        }\n    }\n}\n\nimpl\u003cT: Trait\u003e OnPriceSet for Module\u003cT\u003e {\n    type Asset = T::Asset;\n    type Price = T::Price;\n\n    fn on_price_set(asset: T::Asset, value: T::Price) -\u003e Result\u003c(), DispatchError\u003e {\n        let value: T::FixedNumber = value.into();\n        let now = T::UnixTime::now();\n        let price_count = T::PriceCount::get();\n\n        let update = Self::updates(asset);\n        let log = Self::price_logs(asset);\n\n        // Maximum price log size can be either 0 or `PriceCount`.\n        // If size is 0 it means then no information exists for a given `asset` yet.\n        // If size is `PriceCount` then we already have some price points received by previous\n        // `on_price_set` call or from genesis block.\n        ensure!(\n            log.prices.len_cap() == 0 || log.prices.len_cap() == price_count,\n            Error::\u003cT\u003e::InvalidStorage\n        );\n        let init_prices = log.prices.len_cap() == 0;\n\n        let period_start = update.map(|x| x.period_start);\n        let price_period = PricePeriod(T::PricePeriod::get());\n        let period_change =\n            get_period_change(\u0026price_period, period_start, now).map_err(Into::\u003cError\u003cT\u003e\u003e::into)?;\n\n        let period_start = period_change.period_start;\n\n        // Every point received is stores to the `Update`.\n        // Meanwhile only first point received in the current period is stored in the price log.\n        match period_change.action {\n            PricePeriodAction::RemainsUnchanged =\u003e {\n                Updates::\u003cT\u003e::mutate(\u0026asset, |update| {\n                    *update = Some(PriceUpdate {\n                        period_start: period_start,\n                        time: now,\n                        price: value,\n                    });\n                });\n            }\n            PricePeriodAction::StartedNew(empty_periods) =\u003e {\n                let new_prices = get_new_prices(\n                    log.prices.last().cloned(),\n                    value,\n                    empty_periods,\n                    price_count,\n                )\n                .map_err(Into::\u003cError\u003cT\u003e\u003e::into)?;\n\n                Updates::\u003cT\u003e::mutate(\u0026asset, |update| {\n                    *update = Some(PriceUpdate {\n                        period_start: period_start,\n                        time: now,\n                        price: value,\n                    })\n                });\n                PriceLogs::\u003cT\u003e::mutate(\u0026asset, |log| {\n                    log.latest_timestamp = now;\n\n                    if init_prices {\n                        log.prices = CapVec::\u003cT::FixedNumber\u003e::new(price_count);\n                    }\n\n                    for p in new_prices {\n                        log.prices.push(p);\n                    }\n                });\n            }\n        }\n\n        Ok(())\n    }\n}\n\n/// Important financial functions that uses [`prices`](./struct.Module.html#method.prices) as a data source.\npub trait Financial {\n    /// System wide type for representing various assets such as BTC, ETH, EOS, etc.\n    type Asset;\n    /// System wide type for representing price values.\n    type Price;\n    /// System wide type for representing account id.\n    type AccountId;\n\n    /// Calculates return.\n    fn calc_return(\n        return_type: CalcReturnType,\n        asset: Self::Asset,\n    ) -\u003e Result\u003cVec\u003cSelf::Price\u003e, DispatchError\u003e;\n    /// Calculates volatility.\n    fn calc_vol(\n        return_type: CalcReturnType,\n        volatility_type: CalcVolatilityType,\n        asset: Self::Asset,\n    ) -\u003e Result\u003cSelf::Price, DispatchError\u003e;\n    /// Calculates pairwise correlation between two specified assets.\n    fn calc_corr(\n        return_type: CalcReturnType,\n        correlation_type: CalcCorrelationType,\n        asset1: Self::Asset,\n        asset2: Self::Asset,\n    ) -\u003e Result\u003c(Self::Price, Range\u003cDuration\u003e), DispatchError\u003e;\n    /// Calculates portfolio volatility.\n    fn calc_portf_vol(account_id: Self::AccountId) -\u003e Result\u003cSelf::Price, DispatchError\u003e;\n    /// Calculates portfolio value at risk.\n    fn calc_portf_var(\n        account_id: Self::AccountId,\n        return_type: CalcReturnType,\n        z_score: u32,\n    ) -\u003e Result\u003cSelf::Price, DispatchError\u003e;\n}\n\nfn calc_volatility\u003cF\u003e(\n    return_type: CalcReturnType,\n    volatility_type: CalcVolatilityType,\n    prices: \u0026[F],\n) -\u003e MathResult\u003cF\u003e\nwhere\n    F: FixedSigned + PartialOrd\u003cConstType\u003e + From\u003cConstType\u003e,\n    F::Bits: Copy + ToFixed + AddAssign + BitOrAssign + ShlAssign,\n{\n    match volatility_type {\n        CalcVolatilityType::Regular =\u003e {\n            let return_func = calc_return_func(return_type);\n            let returns: MathResult\u003cVec\u003cF\u003e\u003e = calc_return_iter(\u0026prices, return_func).collect();\n            let returns = returns?;\n\n            let mean_return: F = mean(\u0026returns)?;\n\n            let demeaned_return = demeaned(returns.iter(), mean_return);\n            let squared_demeaned_return = squared(demeaned_return);\n\n            let volatility: F = sqrt(regular_vola(returns.len(), sum(squared_demeaned_return)?)?)\n                .map_err(|_| MathError::Transcendental)?;\n\n            Ok(volatility)\n        }\n        CalcVolatilityType::Exponential(ewma_length) =\u003e {\n            let return_func = calc_return_func_exp_vola(return_type);\n            let returns = calc_return_iter(\u0026prices, return_func);\n            let squared_returns = squared(returns);\n            let decay = decay(ewma_length)?;\n            let var = last_recurrent_ewma(squared_returns, decay)?;\n            let last_price = prices.last().copied().ok_or(MathError::NotEnoughPoints)?;\n            let vola = exp_vola(return_type, var, last_price)?;\n\n            Ok(vola)\n        }\n    }\n}\n\nimpl From\u003cPricePeriodError\u003e for MathError {\n    fn from(error: PricePeriodError) -\u003e Self {\n        match error {\n            PricePeriodError::DivisionByZero =\u003e MathError::DivisionByZero,\n            PricePeriodError::Overflow =\u003e MathError::Overflow,\n        }\n    }\n}\n\nfn calc_correlation\u003cF\u003e(\n    return_type: CalcReturnType,\n    correlation_type: CalcCorrelationType,\n    prices1: \u0026[F],\n    prices2: \u0026[F],\n) -\u003e MathResult\u003cF\u003e\nwhere\n    F: FixedSigned + PartialOrd\u003cConstType\u003e + From\u003cConstType\u003e,\n    F::Bits: Copy + ToFixed + AddAssign + BitOrAssign + ShlAssign,\n{\n    let return_func = calc_return_func(return_type);\n\n    let returns1: MathResult\u003cVec\u003cF\u003e\u003e = calc_return_iter(\u0026prices1, return_func).collect();\n    let returns1 = returns1?;\n\n    let returns2: MathResult\u003cVec\u003cF\u003e\u003e = calc_return_iter(\u0026prices2, return_func).collect();\n    let returns2 = returns2?;\n\n    let mean_return1: F = mean(\u0026returns1)?;\n    let mean_return2: F = mean(\u0026returns2)?;\n\n    let demeaned_returns1: MathResult\u003cVec\u003cF\u003e\u003e = demeaned(returns1.iter(), mean_return1).collect();\n    let demeaned_returns1 = demeaned_returns1?;\n    let demeaned_returns2: MathResult\u003cVec\u003cF\u003e\u003e = demeaned(returns2.iter(), mean_return2).collect();\n    let demeaned_returns2 = demeaned_returns2?;\n\n    let demeaned_returns_product = mul(\n        demeaned_returns1.iter().copied(),\n        demeaned_returns2.iter().copied(),\n    );\n\n    let squared_demeaned_returns1 = squared(demeaned_returns1.iter().map(|\u0026x| Ok(x)));\n    let squared_demeaned_returns2 = squared(demeaned_returns2.iter().map(|\u0026x| Ok(x)));\n\n    let volatility1: F = sqrt(regular_vola(\n        returns1.len(),\n        sum(squared_demeaned_returns1)?,\n    )?)\n    .map_err(|_| MathError::Transcendental)?;\n    let volatility2: F = sqrt(regular_vola(\n        returns2.len(),\n        sum(squared_demeaned_returns2)?,\n    )?)\n    .map_err(|_| MathError::Transcendental)?;\n\n    match correlation_type {\n        CalcCorrelationType::Regular =\u003e {\n            let products_sum = sum(demeaned_returns_product)?;\n            let products_len = min(returns1.len(), returns2.len());\n            let result = regular_corr(products_len, products_sum, volatility1, volatility2)?;\n            Ok(result)\n        }\n        CalcCorrelationType::Exponential(ewma_length) =\u003e {\n            let decay = decay(ewma_length)?;\n            let last_covar = last_recurrent_ewma(demeaned_returns_product, decay)?;\n            let result = exp_corr(last_covar, volatility1, volatility2)?;\n            Ok(result)\n        }\n    }\n}\n\nimpl\u003cT: Trait\u003e From\u003cMathError\u003e for Error\u003cT\u003e {\n    fn from(error: MathError) -\u003e Self {\n        match error {\n            MathError::NotEnoughPoints =\u003e Error::\u003cT\u003e::NotEnoughPoints,\n            MathError::Overflow =\u003e Error::\u003cT\u003e::Overflow,\n            MathError::DivisionByZero =\u003e Error::\u003cT\u003e::DivisionByZero,\n            MathError::Transcendental =\u003e Error::\u003cT\u003e::Transcendental,\n            MathError::InvalidArgument =\u003e Error::\u003cT\u003e::InvalidArgument,\n        }\n    }\n}\n\n/// Calculates price period range for a given `items_length` periods elapsed number\n/// up to `latest_timestamp`.\nfn get_period_id_range(\n    price_period: \u0026PricePeriod,\n    items_length: usize,\n    latest_timestamp: Duration,\n) -\u003e MathResult\u003cRange\u003cu64\u003e\u003e {\n    let last_period_id = price_period.get_period_id(latest_timestamp)?;\n    let next_after_last_period_id = last_period_id.checked_add(1).ok_or(MathError::Overflow)?;\n    let items_length: u64 = items_length.try_into().map_err(|_| MathError::Overflow)?;\n    let first_period_id = next_after_last_period_id\n        .checked_sub(items_length)\n        .ok_or(MathError::Overflow)?;\n\n    Ok(Range {\n        start: first_period_id,\n        end: next_after_last_period_id,\n    })\n}\n\nfn get_range_intersection\u003cT\u003e(range1: \u0026Range\u003cT\u003e, range2: \u0026Range\u003cT\u003e) -\u003e Range\u003cT\u003e\nwhere\n    T: Ord + Copy,\n{\n    let start = max(range1.start, range2.start);\n    let end = min(range1.end, range2.end);\n\n    Range { start, end }\n}\n\n/// Calculates price log indices for the subrange `intersection` of the price period range `range`.\n/// Price log contains only prices within range `range`.\nfn get_index_range(range: \u0026Range\u003cu64\u003e, intersection: \u0026Range\u003cu64\u003e) -\u003e MathResult\u003cRange\u003cusize\u003e\u003e {\n    if intersection.is_empty() {\n        Ok(Range { start: 0, end: 0 })\n    } else {\n        ensure!(\n            range.start \u003c= intersection.start \u0026\u0026 range.end \u003e= intersection.end,\n            MathError::InvalidArgument\n        );\n        let offset = range.start;\n        let start = intersection.start - offset;\n        let end = intersection.end - offset;\n\n        let start: usize = start.try_into().map_err(|_| MathError::Overflow)?;\n        let end: usize = end.try_into().map_err(|_| MathError::Overflow)?;\n        Ok(Range { start, end })\n    }\n}\n\n/// Gets prices for two given assets `asset1` and `asset2` only for those price periods that\n/// are present in both price logs.\n/// Returns tuple which contains respectively prices from the log for `asset1`, prices from the log\n/// to `asset2`, a time range which is common for both `asset1` and `asset2` price logs.\nfn get_prices_for_common_periods\u003cT: Trait\u003e(\n    asset1: T::Asset,\n    asset2: T::Asset,\n) -\u003e MathResult\u003c(Vec\u003cT::FixedNumber\u003e, Vec\u003cT::FixedNumber\u003e, Range\u003cDuration\u003e)\u003e {\n    let price_period = PricePeriod(T::PricePeriod::get());\n\n    let log1 = PriceLogs::\u003cT\u003e::get(asset1);\n    let period_id_range1 =\n        get_period_id_range(\u0026price_period, log1.prices.len(), log1.latest_timestamp)?;\n\n    let log2 = PriceLogs::\u003cT\u003e::get(asset2);\n    let period_id_range2 =\n        get_period_id_range(\u0026price_period, log2.prices.len(), log2.latest_timestamp)?;\n\n    let intersection = get_range_intersection(\u0026period_id_range1, \u0026period_id_range2);\n\n    let index_range1 = get_index_range(\u0026period_id_range1, \u0026intersection)?;\n    let prices1: Vec\u003c_\u003e = log1.prices.iter_range(\u0026index_range1).copied().collect();\n\n    let index_range2 = get_index_range(\u0026period_id_range2, \u0026intersection)?;\n    let prices2: Vec\u003c_\u003e = log2.prices.iter_range(\u0026index_range2).copied().collect();\n    let temporal_range = Range {\n        start: price_period.get_period_id_start(intersection.start)?,\n        end: price_period.get_period_id_start(intersection.end)?,\n    };\n\n    Ok((prices1, prices2, temporal_range))\n}\n\nimpl\u003cT: Trait\u003e Financial for Module\u003cT\u003e {\n    type Asset = T::Asset;\n    type Price = T::Price;\n    type AccountId = \u003cT as frame_system::Trait\u003e::AccountId;\n\n    fn calc_return(\n        return_type: CalcReturnType,\n        asset: T::Asset,\n    ) -\u003e Result\u003cVec\u003cT::Price\u003e, DispatchError\u003e {\n        let prices: Vec\u003c_\u003e = PriceLogs::\u003cT\u003e::get(asset).prices.iter().cloned().collect();\n\n        let result: MathResult\u003cVec\u003cT::Price\u003e\u003e =\n            calc_return_iter(\u0026prices, calc_return_func(return_type))\n                .map(|x| x.map(|y| y.into()))\n                .collect();\n        let result = result.map_err(Into::\u003cError\u003cT\u003e\u003e::into)?;\n\n        if result.len() == 0 {\n            Err(Error::\u003cT\u003e::NotEnoughPoints.into())\n        } else {\n            Ok(result)\n        }\n    }\n\n    fn calc_vol(\n        return_type: CalcReturnType,\n        volatility_type: CalcVolatilityType,\n        asset: T::Asset,\n    ) -\u003e Result\u003cSelf::Price, DispatchError\u003e {\n        let prices: Vec\u003c_\u003e = PriceLogs::\u003cT\u003e::get(asset).prices.iter().cloned().collect();\n\n        let result = calc_volatility::\u003cT::FixedNumber\u003e(return_type, volatility_type, \u0026prices)\n            .map_err(Into::\u003cError\u003cT\u003e\u003e::into)?;\n\n        Ok(result.into())\n    }\n\n    fn calc_corr(\n        return_type: CalcReturnType,\n        correlation_type: CalcCorrelationType,\n        asset1: T::Asset,\n        asset2: T::Asset,\n    ) -\u003e Result\u003c(Self::Price, Range\u003cDuration\u003e), DispatchError\u003e {\n        // We should only use those points for which price periods are present in both price logs\n        let (prices1, prices2, temporal_range) =\n            get_prices_for_common_periods::\u003cT\u003e(asset1, asset2).map_err(Into::\u003cError\u003cT\u003e\u003e::into)?;\n\n        let result =\n            calc_correlation::\u003cT::FixedNumber\u003e(return_type, correlation_type, \u0026prices1, \u0026prices2)\n                .map_err(Into::\u003cError\u003cT\u003e\u003e::into)?;\n\n        Ok((result.into(), temporal_range))\n    }\n\n    fn calc_portf_vol(_account_id: Self::AccountId) -\u003e Result\u003cSelf::Price, DispatchError\u003e {\n        Err(Error::\u003cT\u003e::NotImplemented.into())\n    }\n\n    fn calc_portf_var(\n        _account_id: Self::AccountId,\n        _return_type: CalcReturnType,\n        _z_score: u32,\n    ) -\u003e Result\u003cSelf::Price, DispatchError\u003e {\n        Err(Error::\u003cT\u003e::NotImplemented.into())\n    }\n}\n","traces":[{"line":104,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":137,"address":[4969223,4969200,4969308,4969575,4967552,4969216,4969332,4969360,4969536,4969089,4969120,4967617,4967648,4967600,4969463,4969548,4969568,4967569,4969664,4969040,4969296,4969328,4967665,4969440,4969456],"length":1,"stats":{"Line":37},"fn_name":"updates\u003cfinancial_pallet::mock::Test,financial_pallet::mock::Asset\u003e"},{"line":151,"address":[4967796,4967712,4969052],"length":1,"stats":{"Line":2},"fn_name":"{{closure}}\u003cfinancial_pallet::mock::Test\u003e"},{"line":152,"address":[4967735],"length":1,"stats":{"Line":1},"fn_name":null},{"line":154,"address":[4967754],"length":1,"stats":{"Line":1},"fn_name":null},{"line":156,"address":[4967775],"length":1,"stats":{"Line":1},"fn_name":null},{"line":157,"address":[4967867,4967818],"length":1,"stats":{"Line":1},"fn_name":null},{"line":159,"address":[4967836],"length":1,"stats":{"Line":1},"fn_name":null},{"line":160,"address":[4968120,4968058],"length":1,"stats":{"Line":1},"fn_name":null},{"line":164,"address":[4968084,4968458,4968967,4968320],"length":1,"stats":{"Line":3},"fn_name":null},{"line":165,"address":[4968527],"length":1,"stats":{"Line":1},"fn_name":null},{"line":167,"address":[4968575,4968848,4968954],"length":1,"stats":{"Line":2},"fn_name":null},{"line":168,"address":[4968882],"length":1,"stats":{"Line":1},"fn_name":null},{"line":171,"address":[4968781],"length":1,"stats":{"Line":1},"fn_name":null},{"line":172,"address":[4968735],"length":1,"stats":{"Line":1},"fn_name":null},{"line":173,"address":[4968741],"length":1,"stats":{"Line":1},"fn_name":null},{"line":186,"address":[5209006,5209080,5209160],"length":1,"stats":{"Line":0},"fn_name":null},{"line":223,"address":[5182550],"length":1,"stats":{"Line":0},"fn_name":null},{"line":224,"address":[5182614],"length":1,"stats":{"Line":0},"fn_name":null},{"line":227,"address":[5215507,5215076,5215477],"length":1,"stats":{"Line":0},"fn_name":null},{"line":229,"address":[5186523,5186391,5186730,5186500],"length":1,"stats":{"Line":0},"fn_name":null},{"line":231,"address":[5186779],"length":1,"stats":{"Line":0},"fn_name":null},{"line":232,"address":[5187115,5186787,5186995],"length":1,"stats":{"Line":0},"fn_name":null},{"line":233,"address":[5186935,5187265,5187416,5187155],"length":1,"stats":{"Line":0},"fn_name":null},{"line":235,"address":[5187255],"length":1,"stats":{"Line":0},"fn_name":null},{"line":237,"address":[5187440],"length":1,"stats":{"Line":0},"fn_name":null},{"line":239,"address":[5187656,5187607,5188663,5187460],"length":1,"stats":{"Line":0},"fn_name":null},{"line":240,"address":[5188029,5188205,5187686],"length":1,"stats":{"Line":0},"fn_name":null},{"line":242,"address":[5188401,5188475,5187999],"length":1,"stats":{"Line":0},"fn_name":null},{"line":244,"address":[5188430],"length":1,"stats":{"Line":0},"fn_name":null},{"line":245,"address":[5188477,5188567],"length":1,"stats":{"Line":0},"fn_name":null},{"line":248,"address":[5188229],"length":1,"stats":{"Line":0},"fn_name":null},{"line":251,"address":[5188572],"length":1,"stats":{"Line":0},"fn_name":null},{"line":254,"address":[5188668,5188909,5188713],"length":1,"stats":{"Line":0},"fn_name":null},{"line":255,"address":[5189536,5189877,5188745],"length":1,"stats":{"Line":0},"fn_name":"{{closure}}\u003cnode_template_runtime::Runtime\u003e"},{"line":256,"address":[5189624,5189897],"length":1,"stats":{"Line":0},"fn_name":null},{"line":257,"address":[5189551],"length":1,"stats":{"Line":0},"fn_name":null},{"line":258,"address":[5189560],"length":1,"stats":{"Line":0},"fn_name":null},{"line":259,"address":[5189568],"length":1,"stats":{"Line":0},"fn_name":null},{"line":260,"address":[5189592],"length":1,"stats":{"Line":0},"fn_name":null},{"line":261,"address":[5189600],"length":1,"stats":{"Line":0},"fn_name":null},{"line":265,"address":[5188906],"length":1,"stats":{"Line":0},"fn_name":null},{"line":267,"address":[5188679,5188911],"length":1,"stats":{"Line":0},"fn_name":null},{"line":278,"address":[4947957,4948496,4948729,4947744],"length":1,"stats":{"Line":4},"fn_name":"get_new_prices\u003cu32\u003e"},{"line":284,"address":[4947877,4949194,4948407,4948022,4948664,4948800],"length":1,"stats":{"Line":8},"fn_name":null},{"line":285,"address":[4947988,4948676,4947884,4948553,4948760,4947785],"length":1,"stats":{"Line":10},"fn_name":null},{"line":286,"address":[4947839,4948611],"length":1,"stats":{"Line":4},"fn_name":null},{"line":289,"address":[4948907,4948129,4948981,4948203],"length":1,"stats":{"Line":6},"fn_name":null},{"line":291,"address":[4948928,4948115,4948813,4948838,4948893,4947859,4948060,4948150,4948646,4948035],"length":1,"stats":{"Line":15},"fn_name":null},{"line":293,"address":[4948097,4948177,4948955,4948875,4948152,4948930],"length":1,"stats":{"Line":6},"fn_name":null},{"line":297,"address":[4949006,4948228],"length":1,"stats":{"Line":3},"fn_name":null},{"line":299,"address":[4949053,4948267],"length":1,"stats":{"Line":4},"fn_name":null},{"line":301,"address":[4949086,4948298],"length":1,"stats":{"Line":3},"fn_name":null},{"line":307,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":308,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":309,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":335,"address":[],"length":0,"stats":{"Line":1},"fn_name":null},{"line":336,"address":[],"length":0,"stats":{"Line":1},"fn_name":null},{"line":337,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":338,"address":[],"length":0,"stats":{"Line":1},"fn_name":null},{"line":344,"address":[],"length":0,"stats":{"Line":1},"fn_name":null},{"line":345,"address":[],"length":0,"stats":{"Line":1},"fn_name":null},{"line":346,"address":[],"length":0,"stats":{"Line":1},"fn_name":null},{"line":347,"address":[],"length":0,"stats":{"Line":1},"fn_name":null},{"line":348,"address":[],"length":0,"stats":{"Line":1},"fn_name":null},{"line":349,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":356,"address":[5192960],"length":1,"stats":{"Line":2},"fn_name":"get_curr_period_info"},{"line":361,"address":[5193009,5193203,5193145],"length":1,"stats":{"Line":2},"fn_name":null},{"line":362,"address":[5193225,5193315,5193110],"length":1,"stats":{"Line":4},"fn_name":null},{"line":364,"address":[5193300,5193394,5193479,5193524],"length":1,"stats":{"Line":6},"fn_name":null},{"line":366,"address":[4949392,4949396],"length":1,"stats":{"Line":2},"fn_name":"{{closure}}"},{"line":367,"address":[5193603,5193688,5193509,5193730],"length":1,"stats":{"Line":6},"fn_name":null},{"line":369,"address":[4949424,4949428],"length":1,"stats":{"Line":5},"fn_name":"{{closure}}"},{"line":370,"address":[5193709,5193799],"length":1,"stats":{"Line":4},"fn_name":null},{"line":372,"address":[5193856,5194197],"length":1,"stats":{"Line":2},"fn_name":null},{"line":376,"address":[5194272],"length":1,"stats":{"Line":2},"fn_name":"get_period_change"},{"line":381,"address":[5194539,5194306],"length":1,"stats":{"Line":4},"fn_name":null},{"line":382,"address":[5194460,5194546],"length":1,"stats":{"Line":3},"fn_name":null},{"line":383,"address":[5194527,5194379,5194468],"length":1,"stats":{"Line":3},"fn_name":null},{"line":384,"address":[5194541],"length":1,"stats":{"Line":1},"fn_name":null},{"line":388,"address":[5194678,5195515,5194894],"length":1,"stats":{"Line":4},"fn_name":null},{"line":390,"address":[5194582],"length":1,"stats":{"Line":2},"fn_name":null},{"line":391,"address":[5194899,5194680],"length":1,"stats":{"Line":2},"fn_name":null},{"line":393,"address":[5194807],"length":1,"stats":{"Line":2},"fn_name":null},{"line":395,"address":[5194785],"length":1,"stats":{"Line":2},"fn_name":null},{"line":398,"address":[5194597],"length":1,"stats":{"Line":2},"fn_name":null},{"line":399,"address":[5194619,5195159,5194956],"length":1,"stats":{"Line":4},"fn_name":null},{"line":402,"address":[5195139,5195250,5195513],"length":1,"stats":{"Line":5},"fn_name":null},{"line":405,"address":[5195230],"length":1,"stats":{"Line":1},"fn_name":null},{"line":406,"address":[5195386,5195223],"length":1,"stats":{"Line":3},"fn_name":null},{"line":409,"address":[5195294],"length":1,"stats":{"Line":1},"fn_name":null},{"line":411,"address":[5195278],"length":1,"stats":{"Line":1},"fn_name":null},{"line":416,"address":[5195391,5195259,5195550,5195520],"length":1,"stats":{"Line":4},"fn_name":null},{"line":418,"address":[5195421],"length":1,"stats":{"Line":2},"fn_name":null},{"line":420,"address":[5195398],"length":1,"stats":{"Line":2},"fn_name":null},{"line":431,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":432,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":433,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":434,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":436,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":437,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":443,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":444,"address":[],"length":0,"stats":{"Line":6},"fn_name":null},{"line":445,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":447,"address":[],"length":0,"stats":{"Line":4},"fn_name":null},{"line":449,"address":[],"length":0,"stats":{"Line":6},"fn_name":null},{"line":450,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":451,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":452,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":454,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":458,"address":[],"length":0,"stats":{"Line":1},"fn_name":null},{"line":459,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":460,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":461,"address":[],"length":0,"stats":{"Line":1},"fn_name":null},{"line":462,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":463,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":464,"address":[],"length":0,"stats":{"Line":1},"fn_name":null},{"line":468,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":470,"address":[],"length":0,"stats":{"Line":4},"fn_name":null},{"line":471,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":472,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":473,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":475,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":477,"address":[],"length":0,"stats":{"Line":4},"fn_name":null},{"line":478,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":479,"address":[],"length":0,"stats":{"Line":4},"fn_name":null},{"line":480,"address":[],"length":0,"stats":{"Line":4},"fn_name":null},{"line":481,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":484,"address":[],"length":0,"stats":{"Line":4},"fn_name":null},{"line":485,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":487,"address":[],"length":0,"stats":{"Line":6},"fn_name":null},{"line":488,"address":[],"length":0,"stats":{"Line":3},"fn_name":null},{"line":491,"address":[],"length":0,"stats":{"Line":6},"fn_name":null},{"line":492,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":498,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":539,"address":[4952114,4952016],"length":1,"stats":{"Line":1},"fn_name":"calc_volatility\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e\u003e"},{"line":548,"address":[4954521,4952191,4953581],"length":1,"stats":{"Line":5},"fn_name":null},{"line":549,"address":[4952071],"length":1,"stats":{"Line":1},"fn_name":null},{"line":550,"address":[4952200],"length":1,"stats":{"Line":1},"fn_name":null},{"line":551,"address":[4952229],"length":1,"stats":{"Line":1},"fn_name":null},{"line":552,"address":[4952549,4952287,4952491],"length":1,"stats":{"Line":1},"fn_name":null},{"line":554,"address":[4952832,4952613,4952757,4952468],"length":1,"stats":{"Line":2},"fn_name":null},{"line":556,"address":[4952853,4952734],"length":1,"stats":{"Line":2},"fn_name":null},{"line":557,"address":[4952917],"length":1,"stats":{"Line":1},"fn_name":null},{"line":559,"address":[4952980,4953522,4953440],"length":1,"stats":{"Line":6},"fn_name":null},{"line":560,"address":[4953421,4953524,4954628,4954624],"length":1,"stats":{"Line":4},"fn_name":"{{closure}}\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e\u003e"},{"line":562,"address":[4953496],"length":1,"stats":{"Line":4},"fn_name":null},{"line":564,"address":[4952129],"length":1,"stats":{"Line":1},"fn_name":null},{"line":565,"address":[4952150],"length":1,"stats":{"Line":1},"fn_name":null},{"line":566,"address":[4953586],"length":1,"stats":{"Line":1},"fn_name":null},{"line":567,"address":[4953623],"length":1,"stats":{"Line":1},"fn_name":null},{"line":568,"address":[4953708,4953909],"length":1,"stats":{"Line":1},"fn_name":null},{"line":569,"address":[4954090,4953819,4953964],"length":1,"stats":{"Line":2},"fn_name":null},{"line":570,"address":[4954359,4954150,4954052],"length":1,"stats":{"Line":3},"fn_name":null},{"line":571,"address":[4954414,4954526,4954312],"length":1,"stats":{"Line":3},"fn_name":null},{"line":573,"address":[4954510],"length":1,"stats":{"Line":1},"fn_name":null},{"line":579,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":580,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":581,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":582,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":587,"address":[4954656,4954790],"length":1,"stats":{"Line":1},"fn_name":"calc_correlation\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e\u003e"},{"line":597,"address":[4954742],"length":1,"stats":{"Line":1},"fn_name":null},{"line":599,"address":[4954805],"length":1,"stats":{"Line":1},"fn_name":null},{"line":600,"address":[4955075,4955134,4954863],"length":1,"stats":{"Line":1},"fn_name":null},{"line":602,"address":[4955190,4955036],"length":1,"stats":{"Line":2},"fn_name":null},{"line":603,"address":[4955443,4955197,4955368],"length":1,"stats":{"Line":1},"fn_name":null},{"line":605,"address":[4955345,4955490,4955634,4955711],"length":1,"stats":{"Line":2},"fn_name":null},{"line":606,"address":[4955740,4955884,4955611],"length":1,"stats":{"Line":2},"fn_name":null},{"line":608,"address":[4955967,4955861],"length":1,"stats":{"Line":2},"fn_name":null},{"line":609,"address":[4956234,4956060],"length":1,"stats":{"Line":1},"fn_name":null},{"line":610,"address":[4956335,4956211],"length":1,"stats":{"Line":2},"fn_name":null},{"line":611,"address":[4956428,4956602,4956679],"length":1,"stats":{"Line":1},"fn_name":null},{"line":614,"address":[4956579,4956718],"length":1,"stats":{"Line":2},"fn_name":null},{"line":615,"address":[4956820],"length":1,"stats":{"Line":1},"fn_name":null},{"line":618,"address":[4960032,4960048,4956976],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e\u003e"},{"line":619,"address":[4960096,4957188,4960112],"length":1,"stats":{"Line":5},"fn_name":"{{closure}}\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e\u003e"},{"line":621,"address":[4957648,4957674,4957840,4957976,4957889,4957536],"length":1,"stats":{"Line":9},"fn_name":null},{"line":622,"address":[4957400],"length":1,"stats":{"Line":1},"fn_name":null},{"line":623,"address":[4957627,4957546,4957439],"length":1,"stats":{"Line":1},"fn_name":null},{"line":625,"address":[4957870,4960160,4960164,4957978],"length":1,"stats":{"Line":1},"fn_name":"{{closure}}\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e\u003e"},{"line":626,"address":[4958427,4958476,4958285,4958162,4958552,4958259],"length":1,"stats":{"Line":13},"fn_name":null},{"line":627,"address":[4957961],"length":1,"stats":{"Line":2},"fn_name":null},{"line":628,"address":[4958172,4958065],"length":1,"stats":{"Line":2},"fn_name":null},{"line":630,"address":[4958457,4960192,4958554,4960196],"length":1,"stats":{"Line":4},"fn_name":"{{closure}}\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e\u003e"},{"line":632,"address":[4958645,4959131,4959733],"length":1,"stats":{"Line":5},"fn_name":null},{"line":633,"address":[4958524],"length":1,"stats":{"Line":4},"fn_name":null},{"line":634,"address":[4958838,4958647],"length":1,"stats":{"Line":2},"fn_name":null},{"line":635,"address":[4958826,4958907],"length":1,"stats":{"Line":3},"fn_name":null},{"line":636,"address":[4959136,4958958],"length":1,"stats":{"Line":2},"fn_name":null},{"line":637,"address":[4959120],"length":1,"stats":{"Line":1},"fn_name":null},{"line":639,"address":[4958611],"length":1,"stats":{"Line":3},"fn_name":null},{"line":640,"address":[4959359,4958633,4959211],"length":1,"stats":{"Line":6},"fn_name":null},{"line":641,"address":[4959285,4959436,4959563],"length":1,"stats":{"Line":6},"fn_name":null},{"line":642,"address":[4959735,4959640,4959510],"length":1,"stats":{"Line":6},"fn_name":null},{"line":643,"address":[4959722],"length":1,"stats":{"Line":3},"fn_name":null},{"line":649,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":650,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":651,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":652,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":653,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":654,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":655,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":662,"address":[5195552],"length":1,"stats":{"Line":1},"fn_name":"get_period_id_range"},{"line":667,"address":[5195772,5195594,5195713],"length":1,"stats":{"Line":1},"fn_name":null},{"line":668,"address":[5195688,5195784,5195915],"length":1,"stats":{"Line":2},"fn_name":null},{"line":669,"address":[4960320,4960324],"length":1,"stats":{"Line":2},"fn_name":"{{closure}}"},{"line":670,"address":[5196292,5196139,5196059,5196210],"length":1,"stats":{"Line":3},"fn_name":null},{"line":672,"address":[5196191,5196294,5196131],"length":1,"stats":{"Line":2},"fn_name":null},{"line":674,"address":[5196234],"length":1,"stats":{"Line":1},"fn_name":null},{"line":680,"address":[4960352],"length":1,"stats":{"Line":1},"fn_name":"get_range_intersection\u003cu64\u003e"},{"line":684,"address":[4960366],"length":1,"stats":{"Line":1},"fn_name":null},{"line":685,"address":[4960409],"length":1,"stats":{"Line":1},"fn_name":null},{"line":692,"address":[5196352],"length":1,"stats":{"Line":1},"fn_name":"get_index_range"},{"line":693,"address":[5196383,5196490,5197055],"length":1,"stats":{"Line":2},"fn_name":null},{"line":694,"address":[5196440],"length":1,"stats":{"Line":0},"fn_name":null},{"line":696,"address":[5196616,5196657,5196542],"length":1,"stats":{"Line":1},"fn_name":null},{"line":697,"address":[5196495,5196425],"length":1,"stats":{"Line":1},"fn_name":null},{"line":698,"address":[5196608],"length":1,"stats":{"Line":0},"fn_name":null},{"line":700,"address":[5196560],"length":1,"stats":{"Line":1},"fn_name":null},{"line":701,"address":[5196576,5197112,5196670],"length":1,"stats":{"Line":2},"fn_name":null},{"line":702,"address":[5197142,5196683,5197172],"length":1,"stats":{"Line":1},"fn_name":null},{"line":704,"address":[4960484,4960480],"length":1,"stats":{"Line":1},"fn_name":"{{closure}}"},{"line":705,"address":[4960516,4960512],"length":1,"stats":{"Line":2},"fn_name":"{{closure}}"},{"line":706,"address":[5197007],"length":1,"stats":{"Line":1},"fn_name":null},{"line":714,"address":[4960544,4960609],"length":1,"stats":{"Line":1},"fn_name":"get_prices_for_common_periods\u003cfinancial_pallet::mock::Test\u003e"},{"line":718,"address":[4960628,4960598],"length":1,"stats":{"Line":2},"fn_name":null},{"line":720,"address":[4960636],"length":1,"stats":{"Line":1},"fn_name":null},{"line":721,"address":[4960912,4960654,4960836,4960737,4960885],"length":1,"stats":{"Line":2},"fn_name":null},{"line":724,"address":[4960815],"length":1,"stats":{"Line":1},"fn_name":null},{"line":725,"address":[4961009,4961184,4960914,4961116],"length":1,"stats":{"Line":2},"fn_name":null},{"line":728,"address":[4961194,4961099],"length":1,"stats":{"Line":2},"fn_name":null},{"line":730,"address":[4961239,4961367],"length":1,"stats":{"Line":1},"fn_name":null},{"line":731,"address":[4961336,4961441],"length":1,"stats":{"Line":2},"fn_name":null},{"line":733,"address":[4961543,4961641,4961495,4961709],"length":1,"stats":{"Line":2},"fn_name":null},{"line":734,"address":[4961610,4961730],"length":1,"stats":{"Line":2},"fn_name":null},{"line":736,"address":[4962012,4961941,4961760,4961837],"length":1,"stats":{"Line":2},"fn_name":null},{"line":737,"address":[4962410,4962017,4961886],"length":1,"stats":{"Line":2},"fn_name":null},{"line":740,"address":[4962135],"length":1,"stats":{"Line":1},"fn_name":null},{"line":748,"address":[],"length":0,"stats":{"Line":1},"fn_name":null},{"line":752,"address":[],"length":0,"stats":{"Line":3},"fn_name":null},{"line":754,"address":[],"length":0,"stats":{"Line":3},"fn_name":null},{"line":755,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":756,"address":[],"length":0,"stats":{"Line":15},"fn_name":null},{"line":758,"address":[],"length":0,"stats":{"Line":4},"fn_name":null},{"line":760,"address":[],"length":0,"stats":{"Line":12},"fn_name":null},{"line":761,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":763,"address":[],"length":0,"stats":{"Line":4},"fn_name":null},{"line":767,"address":[],"length":0,"stats":{"Line":1},"fn_name":null},{"line":772,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":774,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":775,"address":[],"length":0,"stats":{"Line":1},"fn_name":null},{"line":777,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":780,"address":[],"length":0,"stats":{"Line":1},"fn_name":null},{"line":787,"address":[],"length":0,"stats":{"Line":1},"fn_name":null},{"line":788,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":790,"address":[],"length":0,"stats":{"Line":4},"fn_name":null},{"line":791,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":792,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":794,"address":[],"length":0,"stats":{"Line":4},"fn_name":null},{"line":797,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":798,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":801,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":806,"address":[],"length":0,"stats":{"Line":0},"fn_name":null}],"covered":208,"coverable":263},{"path":["/","home","rotor","work","src","polka","equilibrium-financial-pallet","pallets","financial","src","math.rs"],"content":"// Copyright (C) 2020 equilibrium.\n// SPDX-License-Identifier: Apache-2.0\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nuse core::ops::{AddAssign, BitOrAssign, ShlAssign};\nuse substrate_fixed::traits::{Fixed, FixedSigned, ToFixed};\nuse substrate_fixed::transcendental::{ln, sqrt};\nuse substrate_fixed::types::I9F23;\n\n// Type of constants for transcendental operations declared in substrate_fixed crate\npub type ConstType = I9F23;\n\n#[derive(Debug, Eq, PartialEq, Clone, Copy)]\npub enum MathError {\n    Overflow,\n    DivisionByZero,\n    Transcendental,\n    NotEnoughPoints,\n    InvalidArgument,\n}\n\npub type MathResult\u003cT\u003e = Result\u003cT, MathError\u003e;\n\n/// Indicates what returns will be used in calculations of volatilities, correlations, and value at\n/// risk: `Regular` or `Log` returns.\n///\n/// The choice of return type also governs the method for Value at Risk (VAR) calculation:\n/// * `Regular` type should be used when arithmetic returns are used and are assumed to be normally\n/// distributed;\n/// * `Log` normal type should be used when geometric returns (log returns) are used\n/// and are assumed to be normally distributed.\n///\n/// We suggest using the latter approach, as it doesn't\n/// lead to losses greater than a portfolio value unlike the normal VaR.\n#[derive(Copy, Clone)]\npub enum CalcReturnType {\n    /// Regular returns.\n    Regular,\n\n    /// Log returns.\n    Log,\n}\n\n/// Indicates the method for calculating volatility: `Regular` or `Exponential`.\n#[derive(Copy, Clone)]\npub enum CalcVolatilityType {\n    /// Regular type is a standard statistical approach of calculating standard deviation of\n    /// returns using simple average.\n    Regular,\n\n    /// Exponentially weighted type gives more weight to most recent data given the decay value or\n    /// period of exponentially weighted moving average.\n    Exponential(u32),\n}\n\n/// Indicates the method for calculating correlations: `Regular` or `Exponential`.\n///\n/// * `Regular` type is a standard statistical approach of calculating Pearson correlation coefficient between\n/// two return series;\n/// * `Exponential` type uses exponentially weighted moving average\n/// to give more weights to most recent observations of pair of returns.\n///\n/// Note: correlations on lower periods are more susceptible to data noise and reflect actual\n/// dependencies between returns poorly. For robustness we recommend to use daily or weekly periods\n/// for correlations.\n#[derive(Copy, Clone)]\npub enum CalcCorrelationType {\n    /// Regular correlation type.\n    Regular,\n    /// Exponentially weighted correlation type.\n    Exponential(u32),\n}\n\npub fn calc_return\u003cF: Fixed\u003e(x1: F, x2: F) -\u003e Result\u003cF, MathError\u003e {\n    let ratio = x2.checked_div(x1).ok_or(MathError::DivisionByZero)?;\n\n    ratio.checked_sub(F::from_num(1)).ok_or(MathError::Overflow)\n}\n\npub fn calc_log_return\u003cF\u003e(x1: F, x2: F) -\u003e Result\u003cF, MathError\u003e\nwhere\n    F: FixedSigned + PartialOrd\u003cConstType\u003e + From\u003cConstType\u003e,\n    F::Bits: Copy + ToFixed + AddAssign + BitOrAssign + ShlAssign,\n{\n    let ratio = x2.checked_div(x1).ok_or(MathError::DivisionByZero)?;\n    ln(ratio).map_err(|_| MathError::Transcendental)\n}\n\npub fn calc_return_exp_vola\u003cF: Fixed\u003e(x1: F, x2: F) -\u003e Result\u003cF, MathError\u003e {\n    x2.checked_sub(x1).ok_or(MathError::Overflow)\n}\n\npub fn calc_return_func\u003cF\u003e(return_type: CalcReturnType) -\u003e impl Fn(F, F) -\u003e MathResult\u003cF\u003e + Copy\nwhere\n    F: FixedSigned + PartialOrd\u003cConstType\u003e + From\u003cConstType\u003e,\n    F::Bits: Copy + ToFixed + AddAssign + BitOrAssign + ShlAssign,\n{\n    match return_type {\n        CalcReturnType::Regular =\u003e calc_return,\n        CalcReturnType::Log =\u003e calc_log_return,\n    }\n}\n\npub fn calc_return_func_exp_vola\u003cF\u003e(\n    return_type: CalcReturnType,\n) -\u003e impl Fn(F, F) -\u003e MathResult\u003cF\u003e + Copy\nwhere\n    F: FixedSigned + PartialOrd\u003cConstType\u003e + From\u003cConstType\u003e,\n    F::Bits: Copy + ToFixed + AddAssign + BitOrAssign + ShlAssign,\n{\n    match return_type {\n        CalcReturnType::Regular =\u003e calc_return_exp_vola,\n        CalcReturnType::Log =\u003e calc_log_return,\n    }\n}\n\npub fn calc_return_iter\u003c'a, T: Copy, F: 'a + Fn(T, T) -\u003e MathResult\u003cT\u003e\u003e(\n    items: \u0026'a [T],\n    return_func: F,\n) -\u003e impl Iterator\u003cItem = MathResult\u003cT\u003e\u003e + 'a {\n    items.windows(2).map(move |x| return_func(x[0], x[1]))\n}\n\npub fn decay\u003cF: Fixed\u003e(ewma_length: u32) -\u003e MathResult\u003cF\u003e {\n    let nom = F::from_num(2);\n    let denom = F::from_num(1)\n        .checked_add(F::from_num(ewma_length))\n        .ok_or(MathError::Overflow)?;\n\n    nom.checked_div(denom).ok_or(MathError::DivisionByZero)\n}\n\nfn recurrent_ewma_step\u003cF: Fixed\u003e(\n    diff: MathResult\u003cF\u003e,\n    decay: F,\n    prev_var: MathResult\u003cF\u003e,\n) -\u003e MathResult\u003cF\u003e {\n    let diff = diff?;\n    let prev_var = prev_var?;\n\n    let a = diff.checked_mul(decay).ok_or(MathError::Overflow)?;\n    let b = F::from_num(1)\n        .checked_sub(decay)\n        .ok_or(MathError::Overflow)?;\n    let c = b.checked_mul(prev_var).ok_or(MathError::Overflow)?;\n\n    a.checked_add(c).ok_or(MathError::Overflow)\n}\n\npub fn last_recurrent_ewma\u003cF: Fixed, I: Iterator\u003cItem = MathResult\u003cF\u003e\u003e\u003e(\n    diffs: I,\n    decay: F,\n) -\u003e MathResult\u003cF\u003e {\n    diffs\n        .fold(None, move |state, diff| {\n            if let Some(prev_var) = state {\n                let var = recurrent_ewma_step(diff, decay, prev_var);\n                Some(var)\n            } else {\n                Some(diff)\n            }\n        })\n        .ok_or(MathError::NotEnoughPoints)\n        .and_then(|x| x)\n}\n\npub fn sum\u003c'a, F: 'a + Fixed, I: 'a + Iterator\u003cItem = MathResult\u003cF\u003e\u003e\u003e(\n    mut iter: I,\n) -\u003e MathResult\u003cF\u003e {\n    Ok(iter.try_fold(F::from_num(0), |acc, x| {\n        let x = x?;\n        acc.checked_add(x).ok_or(MathError::Overflow)\n    })?)\n}\n\npub fn mean\u003cF: Fixed\u003e(items: \u0026[F]) -\u003e MathResult\u003cF\u003e {\n    let sum = sum(items.iter().map(|\u0026x| Ok(x)))?;\n    sum.checked_div(F::from_num(items.len()))\n        .ok_or(MathError::DivisionByZero)\n}\n\npub fn demeaned\u003c'a, F: 'a + Fixed, I: 'a + Iterator\u003cItem = \u0026'a F\u003e\u003e(\n    iter: I,\n    mean: F,\n) -\u003e impl Iterator\u003cItem = MathResult\u003cF\u003e\u003e + 'a {\n    iter.map(move |\u0026x| x.checked_sub(mean).ok_or(MathError::Overflow))\n}\n\npub fn squared\u003c'a, F: 'a + Fixed, I: 'a + Iterator\u003cItem = MathResult\u003cF\u003e\u003e\u003e(\n    iter: I,\n) -\u003e impl Iterator\u003cItem = MathResult\u003cF\u003e\u003e + 'a {\n    iter.map(|x| x.and_then(|y| y.checked_mul(y).ok_or(MathError::Overflow)))\n}\n\npub fn regular_vola\u003cF: Fixed\u003e(n: usize, sum: F) -\u003e MathResult\u003cF\u003e {\n    let a = n.checked_sub(1).ok_or(MathError::Overflow)?;\n    let b = F::from_num(1)\n        .checked_div(F::from_num(a))\n        .ok_or(MathError::DivisionByZero)?;\n    let c = b.checked_mul(sum).ok_or(MathError::Overflow)?;\n    Ok(c)\n}\n\npub fn exp_vola\u003cF\u003e(return_type: CalcReturnType, var: F, price: F) -\u003e MathResult\u003cF\u003e\nwhere\n    F: Fixed + PartialOrd\u003cConstType\u003e,\n{\n    let a: F = sqrt(var).map_err(|_| MathError::Transcendental)?;\n    match return_type {\n        CalcReturnType::Regular =\u003e a.checked_div(price).ok_or(MathError::DivisionByZero),\n        CalcReturnType::Log =\u003e Ok(a),\n    }\n}\n\npub fn mul\u003c'a, F: 'a + Fixed, I: 'a + Iterator\u003cItem = F\u003e\u003e(\n    iter1: I,\n    iter2: I,\n) -\u003e impl Iterator\u003cItem = MathResult\u003cF\u003e\u003e + 'a {\n    iter1\n        .zip(iter2)\n        .map(|(x1, x2)| x1.checked_mul(x2).ok_or(MathError::Overflow))\n}\n\npub fn regular_corr\u003cF: Fixed\u003e(n: usize, sum: F, vol1: F, vol2: F) -\u003e MathResult\u003cF\u003e {\n    let a = n.checked_sub(1).ok_or(MathError::Overflow)?;\n    let b = F::from_num(1)\n        .checked_div(F::from_num(a))\n        .ok_or(MathError::DivisionByZero)?;\n    let c = b.checked_mul(sum).ok_or(MathError::Overflow)?;\n    let d = c.checked_div(vol1).ok_or(MathError::DivisionByZero)?;\n    let e = d.checked_div(vol2).ok_or(MathError::DivisionByZero)?;\n    Ok(e)\n}\n\npub fn exp_corr\u003cF: Fixed\u003e(covariance: F, vol1: F, vol2: F) -\u003e MathResult\u003cF\u003e {\n    let d = covariance\n        .checked_div(vol1)\n        .ok_or(MathError::DivisionByZero)?;\n    let e = d.checked_div(vol2).ok_or(MathError::DivisionByZero)?;\n    Ok(e)\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n    use approx::assert_abs_diff_eq;\n    use frame_support::assert_ok;\n    use substrate_fixed::traits::LossyInto;\n    use substrate_fixed::types::I64F64;\n\n    pub type FixedNumber = I64F64;\n\n    #[test]\n    fn squared_example() {\n        let diffs: Vec\u003c_\u003e = vec![\n            312.51, 121.18, 19.04, 109.93, 115.73, 11.46, 993.98, -142.49, 206.22, 123.83, -91.13,\n            15.18, 90.42, 265.69, 682.76, -108.85, -248.77, -837.47, -154.63, 202.68, 465.51,\n            463.73, -405.52, 48.81, 293.73, 55.83, 2.47, -206.06, -441.22,\n        ]\n        .into_iter()\n        .map(|x| Ok(FixedNumber::from_num(x)))\n        .collect();\n\n        let actual: MathResult\u003cVec\u003c_\u003e\u003e = squared(diffs.into_iter()).collect();\n        assert_ok!(\u0026actual);\n        let actual: Vec\u003cf64\u003e = actual\n            .unwrap()\n            .into_iter()\n            .map(|x| x.lossy_into())\n            .collect();\n\n        let expected: Vec\u003c_\u003e = vec![\n            97662.5001000001,\n            14684.5923999999,\n            362.5216000000,\n            12084.6049000001,\n            13393.4329000001,\n            131.3316000000,\n            987996.2404000010,\n            20303.4001000005,\n            42526.6884000005,\n            15333.8689000000,\n            8304.6769000002,\n            230.4324000000,\n            8175.7764000000,\n            70591.1761000003,\n            466161.2176000000,\n            11848.3225000001,\n            61886.5129000002,\n            701356.0008999990,\n            23910.4369000003,\n            41079.1824000001,\n            216699.5601000000,\n            215045.5129000000,\n            164446.4703999990,\n            2382.4161000000,\n            86277.3128999997,\n            3116.9889000000,\n            6.1009000000,\n            42460.7236000005,\n            194675.0883999990,\n        ];\n        assert_eq!(actual.len(), expected.len());\n        for (a, e) in actual.into_iter().zip(expected.into_iter()) {\n            assert_abs_diff_eq!(a, e, epsilon = 1e-8);\n        }\n    }\n\n    #[test]\n    fn last_recurrent_ewma_example() {\n        let squared_diffs: Vec\u003c_\u003e = vec![\n            97662.50010000010000,\n            14684.59239999990000,\n            362.52159999999900,\n            12084.60490000010000,\n            13393.43290000010000,\n            131.33160000000100,\n            987996.24040000100000,\n            20303.40010000050000,\n            42526.68840000050000,\n            15333.86890000000000,\n            8304.67690000019000,\n            230.43240000000900,\n            8175.77640000001000,\n            70591.17610000030000,\n            466161.21760000000000,\n            11848.32250000010000,\n            61886.51290000020000,\n            701356.00089999900000,\n            23910.43690000030000,\n            41079.18240000010000,\n            216699.56010000000000,\n            215045.51290000000000,\n            164446.47039999900000,\n            2382.41609999995000,\n            86277.31289999970000,\n            3116.98889999999000,\n            6.10090000000575,\n            42460.72360000050000,\n            194675.08839999900000,\n        ]\n        .into_iter()\n        .map(|x| Ok(FixedNumber::from_num(x)))\n        .collect();\n        let decay = FixedNumber::from_num(0.0540540540540541);\n\n        let actual = last_recurrent_ewma(squared_diffs.into_iter(), decay);\n        assert_ok!(\u0026actual);\n        let actual: f64 = actual.unwrap().lossy_into();\n\n        let expected = 114954.3177623650;\n        assert_abs_diff_eq!(actual, expected, epsilon = 1e-8);\n    }\n\n    #[test]\n    fn recurrent_ewma_step_example() {\n        let diff = Ok(FixedNumber::from_num(14684.59239999990000));\n        let decay = FixedNumber::from_num(0.0540540540540541);\n        let prev_var = Ok(FixedNumber::from_num(97662.5001000001));\n        let actual = recurrent_ewma_step(diff, decay, prev_var);\n        assert_ok!(\u0026actual);\n        let actual: f64 = actual.unwrap().lossy_into();\n        let expected = 93177.2077918920;\n\n        assert_abs_diff_eq!(actual, expected, epsilon = 1e-8);\n    }\n\n    #[test]\n    fn exp_vola_expample() {\n        let variance = FixedNumber::from_num(114954.3177623650);\n        let price = FixedNumber::from_num(9_081.76);\n        let actual = exp_vola(CalcReturnType::Regular, variance, price);\n        assert_ok!(actual);\n        let actual: FixedNumber = actual.unwrap();\n        let actual: f64 = actual.lossy_into();\n        let expected = 0.0373329770530381;\n\n        assert_abs_diff_eq!(actual, expected, epsilon = 1e-8);\n    }\n\n    #[cfg(test)]\n    mod recurrent_ewma_step {\n        use super::super::*;\n        use super::FixedNumber;\n        use approx::assert_abs_diff_eq;\n        use frame_support::assert_ok;\n        use substrate_fixed::traits::LossyInto;\n\n        #[test]\n        fn recurrent_ewma_step_diff_is_zero() {\n            let diff = Ok(FixedNumber::from_num(0));\n            let decay = FixedNumber::from_num(0.054);\n            let prev_var = Ok(FixedNumber::from_num(9762.51));\n            let actual = recurrent_ewma_step(diff, decay, prev_var);\n            assert_ok!(\u0026actual);\n            let actual: f64 = actual.unwrap().lossy_into();\n            let expected = 9235.33446;\n\n            assert_abs_diff_eq!(actual, expected, epsilon = 1e-8);\n        }\n\n        #[test]\n        fn recurrent_ewma_step_mul_overflow() {\n            let diff = Ok(FixedNumber::max_value());\n            let decay = FixedNumber::from_num(2);\n            let prev_var = Ok(FixedNumber::from_num(9762.51));\n            let actual = recurrent_ewma_step(diff, decay, prev_var);\n            let expected = Err(MathError::Overflow);\n\n            assert_eq!(actual, expected);\n        }\n\n        #[test]\n        fn recurrent_ewma_step_add_overflow() {\n            let diff = Ok(FixedNumber::from_num(2));\n            let decay = FixedNumber::max_value();\n            let prev_var = Ok(FixedNumber::from_num(9762.51));\n            let actual = recurrent_ewma_step(diff, decay, prev_var);\n            let expected = Err(MathError::Overflow);\n\n            assert_eq!(actual, expected);\n        }\n\n        #[test]\n        fn recurrent_ewma_step_valid_negative() {\n            let diff = Ok(FixedNumber::from_num(-0.051));\n            let decay = FixedNumber::from_num(-0.054);\n            let prev_var = Ok(FixedNumber::from_num(-976.51));\n            let actual = recurrent_ewma_step(diff, decay, prev_var);\n            assert_ok!(\u0026actual);\n            let actual: f64 = actual.unwrap().lossy_into();\n            let expected = -1029.238786;\n\n            assert_abs_diff_eq!(actual, expected, epsilon = 1e-8);\n        }\n\n        #[test]\n        fn recurrent_ewma_step_valid_zero() {\n            let diff = Ok(FixedNumber::from_num(0.0));\n            let decay = FixedNumber::from_num(0.0);\n            let prev_var = Ok(FixedNumber::from_num(0.0));\n            let actual = recurrent_ewma_step(diff, decay, prev_var);\n            assert_ok!(\u0026actual);\n            let actual: f64 = actual.unwrap().lossy_into();\n            let expected = 0.0;\n\n            assert_abs_diff_eq!(actual, expected, epsilon = 1e-8);\n        }\n\n        #[test]\n        fn recurrent_ewma_step_example() {\n            let diff = Ok(FixedNumber::from_num(14684.59239999990000));\n            let decay = FixedNumber::from_num(0.0540540540540541);\n            let prev_var = Ok(FixedNumber::from_num(97662.5001000001));\n            let actual = recurrent_ewma_step(diff, decay, prev_var);\n            assert_ok!(\u0026actual);\n            let actual: f64 = actual.unwrap().lossy_into();\n            let expected = 93177.2077918920;\n\n            assert_abs_diff_eq!(actual, expected, epsilon = 1e-8);\n        }\n    }\n\n    #[cfg(test)]\n    mod decay {\n        use super::super::*;\n        use super::FixedNumber;\n        use approx::assert_abs_diff_eq;\n        use frame_support::assert_ok;\n        use substrate_fixed::traits::LossyInto;\n\n        #[test]\n        fn decay_zero() {\n            let actual = decay(0);\n            assert_ok!(actual);\n            let actual: FixedNumber = actual.unwrap();\n            let actual: f64 = actual.lossy_into();\n            let expected = 2.0;\n\n            assert_abs_diff_eq!(actual, expected, epsilon = 1e-8);\n        }\n\n        #[test]\n        fn decay_simple() {\n            let actual = decay(1);\n            assert_ok!(actual);\n            let actual: FixedNumber = actual.unwrap();\n            let actual: f64 = actual.lossy_into();\n            let expected = 1.0;\n\n            assert_abs_diff_eq!(actual, expected, epsilon = 1e-8);\n        }\n\n        #[test]\n        fn decay_expample() {\n            let actual = decay(36);\n            assert_ok!(actual);\n            let actual: FixedNumber = actual.unwrap();\n            let actual: f64 = actual.lossy_into();\n            let expected = 0.05405405405;\n\n            assert_abs_diff_eq!(actual, expected, epsilon = 1e-8);\n        }\n    }\n\n    #[cfg(test)]\n    mod calc_return {\n        use super::super::*;\n        use super::FixedNumber;\n        use approx::assert_abs_diff_eq;\n        use frame_support::assert_ok;\n        use substrate_fixed::traits::LossyInto;\n\n        #[test]\n        fn calc_return_valid() {\n            let x1 = FixedNumber::from_num(8);\n            let x2 = FixedNumber::from_num(6);\n            let actual = calc_return(x1, x2);\n            let expected = Ok(FixedNumber::from_num(-0.25));\n\n            assert_eq!(actual, expected);\n        }\n\n        #[test]\n        fn calc_return_valid_positive() {\n            let x1 = FixedNumber::from_num(8);\n            let x2 = FixedNumber::from_num(10);\n            let actual = calc_return(x1, x2);\n            let expected = Ok(FixedNumber::from_num(0.25));\n\n            assert_eq!(actual, expected);\n        }\n\n        #[test]\n        fn calc_return_x1_is_zero() {\n            let x1 = FixedNumber::from_num(0);\n            let x2 = FixedNumber::from_num(6);\n            let actual = calc_return(x1, x2);\n            let expected = Err(MathError::DivisionByZero);\n\n            assert_eq!(actual, expected);\n        }\n\n        #[test]\n        fn calc_log_return_valid() {\n            let x1 = FixedNumber::from_num(8);\n            let x2 = FixedNumber::from_num(6);\n            let actual: f64 = calc_log_return(x1, x2).unwrap().lossy_into();\n            let expected = -0.287682072452;\n\n            assert_abs_diff_eq!(actual, expected, epsilon = 1e-8);\n        }\n\n        #[test]\n        fn calc_log_return_x1_is_zero() {\n            let x1 = FixedNumber::from_num(0);\n            let x2 = FixedNumber::from_num(6);\n            let actual = calc_log_return(x1, x2);\n            let expected = Err(MathError::DivisionByZero);\n\n            assert_eq!(actual, expected);\n        }\n\n        #[test]\n        fn calc_log_return_x1_is_negative() {\n            let x1 = FixedNumber::from_num(-3);\n            let x2 = FixedNumber::from_num(6);\n            let actual = calc_log_return(x1, x2);\n            let expected = Err(MathError::Transcendental);\n\n            assert_eq!(actual, expected);\n        }\n\n        #[test]\n        fn calc_return_iter_empty() {\n            let prices: Vec\u003cFixedNumber\u003e = Vec::new();\n            let func = calc_return_func(CalcReturnType::Regular);\n\n            let actual: MathResult\u003cVec\u003cFixedNumber\u003e\u003e = calc_return_iter(\u0026prices, func).collect();\n            let expected = Ok(vec![]);\n\n            assert_eq!(actual, expected);\n        }\n\n        #[test]\n        fn calc_return_vec_one_item() {\n            let prices: Vec\u003cFixedNumber\u003e =\n                vec![1.5].into_iter().map(FixedNumber::from_num).collect();\n            let func = calc_return_func(CalcReturnType::Regular);\n\n            let actual: MathResult\u003cVec\u003cFixedNumber\u003e\u003e = calc_return_iter(\u0026prices, func).collect();\n            let expected = Ok(vec![]);\n\n            assert_eq!(actual, expected);\n        }\n\n        #[test]\n        fn calc_return_vec_regular_valid() {\n            let prices: Vec\u003cFixedNumber\u003e = vec![\n                7_117.21, 7_429.72, 7_550.90, 7_569.94, 7_679.87, 7_795.60, 7_807.06, 8_801.04,\n                8_658.55, 8_864.77,\n            ]\n            .into_iter()\n            .map(FixedNumber::from_num)\n            .collect();\n            let func = calc_return_func(CalcReturnType::Regular);\n\n            let actual: MathResult\u003cVec\u003cFixedNumber\u003e\u003e = calc_return_iter(\u0026prices, func).collect();\n            assert_ok!(\u0026actual);\n            let actual: Vec\u003cf64\u003e = actual\n                .unwrap()\n                .into_iter()\n                .map(|x| x.lossy_into())\n                .collect();\n\n            let expected: Vec\u003cf64\u003e = vec![\n                0.04390906,\n                0.01631017,\n                0.00252155,\n                0.01452191,\n                0.01506927,\n                0.00147006,\n                0.12731809,\n                -0.01619013,\n                0.02381692,\n            ];\n\n            assert_eq!(actual.len(), expected.len());\n            for (a, e) in actual.into_iter().zip(expected.into_iter()) {\n                assert_abs_diff_eq!(a, e, epsilon = 1e-8);\n            }\n        }\n\n        #[test]\n        fn calc_return_vec_log_valid() {\n            let prices: Vec\u003cFixedNumber\u003e = vec![\n                7_117.21, 7_429.72, 7_550.90, 7_569.94, 7_679.87, 7_795.60, 7_807.06, 8_801.04,\n                8_658.55, 8_864.77,\n            ]\n            .into_iter()\n            .map(FixedNumber::from_num)\n            .collect();\n            let func = calc_return_func(CalcReturnType::Log);\n\n            let actual: MathResult\u003cVec\u003cFixedNumber\u003e\u003e = calc_return_iter(\u0026prices, func).collect();\n            assert_ok!(\u0026actual);\n            let actual: Vec\u003cf64\u003e = actual\n                .unwrap()\n                .into_iter()\n                .map(|x| x.lossy_into())\n                .collect();\n\n            let expected: Vec\u003cf64\u003e = vec![\n                0.042972378,\n                0.016178588,\n                0.002518380,\n                0.014417479,\n                0.014956852,\n                0.001468981,\n                0.119841444,\n                -0.016322624,\n                0.023537722,\n            ];\n\n            assert_eq!(actual.len(), expected.len());\n            for (a, e) in actual.into_iter().zip(expected.into_iter()) {\n                assert_abs_diff_eq!(a, e, epsilon = 1e-8);\n            }\n        }\n    }\n}\n","traces":[{"line":85,"address":[5013040],"length":1,"stats":{"Line":3},"fn_name":"calc_return\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e\u003e"},{"line":86,"address":[5013087,5013351,5013302],"length":1,"stats":{"Line":4},"fn_name":null},{"line":88,"address":[5013270,5013381],"length":1,"stats":{"Line":4},"fn_name":null},{"line":91,"address":[5013456],"length":1,"stats":{"Line":1},"fn_name":"calc_log_return\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e\u003e"},{"line":96,"address":[5013503,5013702,5013751],"length":1,"stats":{"Line":2},"fn_name":null},{"line":97,"address":[5013781,5013674,5013796,5013792],"length":1,"stats":{"Line":4},"fn_name":"{{closure}}\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e\u003e"},{"line":100,"address":[5013824],"length":1,"stats":{"Line":1},"fn_name":"calc_return_exp_vola\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e\u003e"},{"line":101,"address":[5013856],"length":1,"stats":{"Line":1},"fn_name":null},{"line":104,"address":[5013968],"length":1,"stats":{"Line":1},"fn_name":"calc_return_func\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e\u003e"},{"line":109,"address":[5014007],"length":1,"stats":{"Line":1},"fn_name":null},{"line":110,"address":[5014011,5013981],"length":1,"stats":{"Line":7},"fn_name":null},{"line":111,"address":[5013995],"length":1,"stats":{"Line":1},"fn_name":null},{"line":115,"address":[5014048],"length":1,"stats":{"Line":1},"fn_name":"calc_return_func_exp_vola\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e\u003e"},{"line":122,"address":[5014087],"length":1,"stats":{"Line":1},"fn_name":null},{"line":123,"address":[5014061,5014091],"length":1,"stats":{"Line":2},"fn_name":null},{"line":124,"address":[5014075],"length":1,"stats":{"Line":1},"fn_name":null},{"line":128,"address":[5014128,5014198],"length":1,"stats":{"Line":3},"fn_name":"calc_return_iter\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e,fn(substrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e, substrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e) -\u003e core::result::Result\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e, financial_pallet::math::MathError\u003e\u003e"},{"line":132,"address":[5014288,5014316,5014210,5014150],"length":1,"stats":{"Line":12},"fn_name":"{{closure}}\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e,fn(substrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e, substrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e) -\u003e core::result::Result\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e, financial_pallet::math::MathError\u003e\u003e"},{"line":135,"address":[5014560],"length":1,"stats":{"Line":2},"fn_name":"decay\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e\u003e"},{"line":136,"address":[5014590],"length":1,"stats":{"Line":2},"fn_name":null},{"line":138,"address":[5014662],"length":1,"stats":{"Line":2},"fn_name":null},{"line":139,"address":[5014785,5014942,5014889,5014717],"length":1,"stats":{"Line":4},"fn_name":null},{"line":141,"address":[5014952,5014862],"length":1,"stats":{"Line":4},"fn_name":null},{"line":144,"address":[5015008],"length":1,"stats":{"Line":7},"fn_name":"recurrent_ewma_step\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e\u003e"},{"line":149,"address":[5015034,5015285,5015349],"length":1,"stats":{"Line":7},"fn_name":null},{"line":150,"address":[5015361,5015513,5015211],"length":1,"stats":{"Line":14},"fn_name":null},{"line":152,"address":[5015471,5015574,5015753],"length":1,"stats":{"Line":14},"fn_name":null},{"line":155,"address":[5015854,5015922,5016035],"length":1,"stats":{"Line":10},"fn_name":null},{"line":156,"address":[5016261,5015989,5016088],"length":1,"stats":{"Line":8},"fn_name":null},{"line":158,"address":[5016236,5016314],"length":1,"stats":{"Line":10},"fn_name":null},{"line":161,"address":[5016736,5016368,5016560],"length":1,"stats":{"Line":5},"fn_name":"last_recurrent_ewma\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e,core::iter::adapters::Map\u003ccore::iter::adapters::zip::Zip\u003ccore::iter::adapters::Copied\u003ccore::slice::Iter\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e\u003e\u003e, core::iter::adapters::Copied\u003ccore::slice::Iter\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e\u003e\u003e\u003e, closure-0\u003e\u003e"},{"line":165,"address":[5016684,5016762,5016624,5016586,5016444,5016860,5016800,5016507,5016394],"length":1,"stats":{"Line":16},"fn_name":null},{"line":166,"address":[5016779,5016420,5017680,5016603,5017296,5016912],"length":1,"stats":{"Line":10},"fn_name":"{{closure}}\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e,core::iter::adapters::Map\u003ccore::iter::adapters::Map\u003ccore::slice::Windows\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e\u003e, closure-0\u003e, closure-0\u003e\u003e"},{"line":167,"address":[5017452,5016936,5017836,5017068,5017320,5017704],"length":1,"stats":{"Line":11},"fn_name":null},{"line":168,"address":[5017100,5017484,5017868],"length":1,"stats":{"Line":5},"fn_name":null},{"line":169,"address":[5017574,5017190,5017958],"length":1,"stats":{"Line":6},"fn_name":null},{"line":171,"address":[5016993,5017761,5017377],"length":1,"stats":{"Line":5},"fn_name":null},{"line":174,"address":[5016676,5016499,5016852],"length":1,"stats":{"Line":5},"fn_name":null},{"line":175,"address":[5018132,5018068,5018100,5018128,5018096,5018064],"length":1,"stats":{"Line":11},"fn_name":"{{closure}}\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e,alloc::vec::IntoIter\u003ccore::result::Result\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e, financial_pallet::math::MathError\u003e\u003e\u003e"},{"line":178,"address":[5019184,5018467,5018416,5018672,5019235,5018160,5018206,5018723,5018928,5018974],"length":1,"stats":{"Line":6},"fn_name":"sum\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e,core::iter::adapters::Map\u003ccore::iter::adapters::zip::Zip\u003ccore::iter::adapters::Copied\u003ccore::slice::Iter\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e\u003e\u003e, core::iter::adapters::Copied\u003ccore::slice::Iter\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e\u003e\u003e\u003e, closure-0\u003e\u003e"},{"line":181,"address":[5018541,5018280,5019440,5018755,5018841,5020016,5018499,5018443,5019025,5019728,5019092,5020592,5018324,5018585,5018257,5018774,5019353,5020304,5019267,5018699,5019286,5018238,5018797,5019211,5018177,5019006,5019309,5019048,5018518,5018945],"length":1,"stats":{"Line":42},"fn_name":"{{closure}}\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e,core::iter::adapters::Map\u003ccore::iter::adapters::Map\u003ccore::slice::Iter\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e\u003e, closure-0\u003e, closure-0\u003e\u003e"},{"line":182,"address":[5020780,5020829,5020541,5019759,5020204,5019965,5020253,5019628,5019471,5020492,5019677,5020047,5020335,5019916,5020623],"length":1,"stats":{"Line":8},"fn_name":null},{"line":183,"address":[5019687,5019891,5020839,5020755,5019603,5019975,5020263,5020551,5020179,5020467],"length":1,"stats":{"Line":18},"fn_name":null},{"line":187,"address":[5020880],"length":1,"stats":{"Line":1},"fn_name":"mean\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e\u003e"},{"line":188,"address":[5020914,5021118,5021173,5021312,5021296],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e\u003e"},{"line":189,"address":[5021188,5021250,5021106],"length":1,"stats":{"Line":3},"fn_name":null},{"line":190,"address":[5021242],"length":1,"stats":{"Line":1},"fn_name":null},{"line":193,"address":[5021360],"length":1,"stats":{"Line":1},"fn_name":"demeaned\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e,core::slice::Iter\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e\u003e\u003e"},{"line":197,"address":[5021387,5021440,5021457],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e,core::slice::Iter\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e\u003e\u003e"},{"line":200,"address":[5021872,5021792,5021584,5021712,5021632],"length":1,"stats":{"Line":5},"fn_name":"squared\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e,core::iter::adapters::Map\u003ccore::slice::Iter\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e\u003e, closure-0\u003e\u003e"},{"line":203,"address":[5022432,5022624,5021719,5021942,5022560,5022752,5022816,5022828,5022198,5022304,5022454,5022688,5022572,5022700,5021598,5021886,5022070,5021920,5021799,5022764,5022048,5022176,5021639,5022636,5022326],"length":1,"stats":{"Line":36},"fn_name":"{{closure}}\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e,core::iter::adapters::Map\u003ccore::slice::Iter\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e\u003e, closure-1\u003e\u003e"},{"line":206,"address":[5022880],"length":1,"stats":{"Line":1},"fn_name":"regular_vola\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e\u003e"},{"line":207,"address":[5023157,5023099,5022922],"length":1,"stats":{"Line":1},"fn_name":null},{"line":209,"address":[5023174],"length":1,"stats":{"Line":1},"fn_name":null},{"line":210,"address":[5023297,5023229,5023410],"length":1,"stats":{"Line":2},"fn_name":null},{"line":211,"address":[5023622,5023364,5023463],"length":1,"stats":{"Line":2},"fn_name":null},{"line":212,"address":[5023606],"length":1,"stats":{"Line":1},"fn_name":null},{"line":215,"address":[5023680],"length":1,"stats":{"Line":1},"fn_name":"exp_vola\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e\u003e"},{"line":219,"address":[5024096,5024100,5023736,5023914,5023963],"length":1,"stats":{"Line":1},"fn_name":"{{closure}}\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e\u003e"},{"line":220,"address":[5023999,5024087],"length":1,"stats":{"Line":3},"fn_name":null},{"line":221,"address":[5024023,5023887],"length":1,"stats":{"Line":2},"fn_name":null},{"line":222,"address":[5023983],"length":1,"stats":{"Line":2},"fn_name":null},{"line":226,"address":[5024128],"length":1,"stats":{"Line":1},"fn_name":"mul\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e,core::iter::adapters::Copied\u003ccore::slice::Iter\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e\u003e\u003e\u003e"},{"line":230,"address":[5024155],"length":1,"stats":{"Line":1},"fn_name":null},{"line":232,"address":[5024240,5024208],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e,core::iter::adapters::Copied\u003ccore::slice::Iter\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e\u003e\u003e\u003e"},{"line":235,"address":[5024352],"length":1,"stats":{"Line":1},"fn_name":"regular_corr\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e\u003e"},{"line":236,"address":[5024656,5024720,5024426],"length":1,"stats":{"Line":2},"fn_name":null},{"line":238,"address":[5024740],"length":1,"stats":{"Line":1},"fn_name":null},{"line":239,"address":[5024994,5024813,5024881],"length":1,"stats":{"Line":3},"fn_name":null},{"line":240,"address":[5024948,5025047,5025226],"length":1,"stats":{"Line":3},"fn_name":null},{"line":241,"address":[5025281,5025182,5025460],"length":1,"stats":{"Line":3},"fn_name":null},{"line":242,"address":[5025674,5025416,5025515],"length":1,"stats":{"Line":3},"fn_name":null},{"line":243,"address":[5025658],"length":1,"stats":{"Line":2},"fn_name":null},{"line":246,"address":[5025728],"length":1,"stats":{"Line":3},"fn_name":"exp_corr\u003csubstrate_fixed::FixedI128\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UInt\u003ctypenum::uint::UTerm, typenum::bit::B1\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e, typenum::bit::B0\u003e\u003e\u003e"},{"line":247,"address":[5025799,5025921,5025854,5026001],"length":1,"stats":{"Line":8},"fn_name":null},{"line":249,"address":[5025905,5025846,5026050,5026003],"length":1,"stats":{"Line":4},"fn_name":null},{"line":250,"address":[5026218,5025963,5026062],"length":1,"stats":{"Line":6},"fn_name":null},{"line":251,"address":[5026202],"length":1,"stats":{"Line":3},"fn_name":null},{"line":265,"address":[4819253,4819248],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":266,"address":[5352605,5351852],"length":1,"stats":{"Line":2},"fn_name":null},{"line":272,"address":[4819280,4819308],"length":1,"stats":{"Line":2},"fn_name":"{{closure}}"},{"line":275,"address":[5352668],"length":1,"stats":{"Line":1},"fn_name":null},{"line":276,"address":[5352787],"length":1,"stats":{"Line":1},"fn_name":null},{"line":277,"address":[5353044],"length":1,"stats":{"Line":1},"fn_name":null},{"line":280,"address":[4819379,4819360],"length":1,"stats":{"Line":2},"fn_name":"{{closure}}"},{"line":283,"address":[5353692,5353201],"length":1,"stats":{"Line":2},"fn_name":null},{"line":314,"address":[5353700,5353952],"length":1,"stats":{"Line":1},"fn_name":null},{"line":315,"address":[5354809,5353886,5355783,5354321,5354535,5354570],"length":1,"stats":{"Line":4},"fn_name":null},{"line":316,"address":[5354814,5354652],"length":1,"stats":{"Line":1},"fn_name":null},{"line":321,"address":[4819413,4819408],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":322,"address":[5355932,5356661],"length":1,"stats":{"Line":2},"fn_name":null},{"line":354,"address":[4819440,4819468],"length":1,"stats":{"Line":2},"fn_name":"{{closure}}"},{"line":356,"address":[5356740],"length":1,"stats":{"Line":1},"fn_name":null},{"line":358,"address":[5356795],"length":1,"stats":{"Line":1},"fn_name":null},{"line":359,"address":[5356897],"length":1,"stats":{"Line":1},"fn_name":null},{"line":360,"address":[5357154],"length":1,"stats":{"Line":1},"fn_name":null},{"line":362,"address":[5357284],"length":1,"stats":{"Line":1},"fn_name":null},{"line":363,"address":[5357478,5357300],"length":1,"stats":{"Line":1},"fn_name":null},{"line":367,"address":[4819525,4819520],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":368,"address":[5358390],"length":1,"stats":{"Line":1},"fn_name":null},{"line":369,"address":[5358459],"length":1,"stats":{"Line":1},"fn_name":null},{"line":370,"address":[5358510],"length":1,"stats":{"Line":1},"fn_name":null},{"line":371,"address":[5358571],"length":1,"stats":{"Line":1},"fn_name":null},{"line":372,"address":[5358712],"length":1,"stats":{"Line":1},"fn_name":null},{"line":373,"address":[5358990],"length":1,"stats":{"Line":1},"fn_name":null},{"line":374,"address":[5359108],"length":1,"stats":{"Line":1},"fn_name":null},{"line":376,"address":[5359298,5359117],"length":1,"stats":{"Line":1},"fn_name":null},{"line":380,"address":[4819557,4819552],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":381,"address":[5359958],"length":1,"stats":{"Line":1},"fn_name":null},{"line":382,"address":[5360009],"length":1,"stats":{"Line":1},"fn_name":null},{"line":383,"address":[5360052],"length":1,"stats":{"Line":1},"fn_name":null},{"line":384,"address":[5360120],"length":1,"stats":{"Line":1},"fn_name":null},{"line":385,"address":[5360420],"length":1,"stats":{"Line":1},"fn_name":null},{"line":386,"address":[5360526],"length":1,"stats":{"Line":1},"fn_name":null},{"line":387,"address":[5360548],"length":1,"stats":{"Line":1},"fn_name":null},{"line":389,"address":[5360557,5360738],"length":1,"stats":{"Line":1},"fn_name":null},{"line":401,"address":[4236021,4236016],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":402,"address":[4512880],"length":1,"stats":{"Line":1},"fn_name":null},{"line":403,"address":[4512949],"length":1,"stats":{"Line":1},"fn_name":null},{"line":404,"address":[4513000],"length":1,"stats":{"Line":1},"fn_name":null},{"line":405,"address":[4513061],"length":1,"stats":{"Line":1},"fn_name":null},{"line":406,"address":[4513202],"length":1,"stats":{"Line":1},"fn_name":null},{"line":407,"address":[4513480],"length":1,"stats":{"Line":1},"fn_name":null},{"line":408,"address":[4513598],"length":1,"stats":{"Line":1},"fn_name":null},{"line":410,"address":[4513788,4513607],"length":1,"stats":{"Line":1},"fn_name":null},{"line":414,"address":[4236053,4236048],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":415,"address":[4514423],"length":1,"stats":{"Line":1},"fn_name":null},{"line":416,"address":[4514477],"length":1,"stats":{"Line":1},"fn_name":null},{"line":417,"address":[4514522],"length":1,"stats":{"Line":1},"fn_name":null},{"line":418,"address":[4514571],"length":1,"stats":{"Line":1},"fn_name":null},{"line":419,"address":[4514706],"length":1,"stats":{"Line":1},"fn_name":null},{"line":421,"address":[4514736,4514843],"length":1,"stats":{"Line":1},"fn_name":null},{"line":425,"address":[4236080,4236085],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":426,"address":[4515143],"length":1,"stats":{"Line":1},"fn_name":null},{"line":427,"address":[4515197],"length":1,"stats":{"Line":1},"fn_name":null},{"line":428,"address":[4515242],"length":1,"stats":{"Line":1},"fn_name":null},{"line":429,"address":[4515291],"length":1,"stats":{"Line":1},"fn_name":null},{"line":430,"address":[4515426],"length":1,"stats":{"Line":1},"fn_name":null},{"line":432,"address":[4515563,4515456],"length":1,"stats":{"Line":1},"fn_name":null},{"line":436,"address":[4236117,4236112],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":437,"address":[4515878],"length":1,"stats":{"Line":1},"fn_name":null},{"line":438,"address":[4515947],"length":1,"stats":{"Line":1},"fn_name":null},{"line":439,"address":[4515998],"length":1,"stats":{"Line":1},"fn_name":null},{"line":440,"address":[4516059],"length":1,"stats":{"Line":1},"fn_name":null},{"line":441,"address":[4516200],"length":1,"stats":{"Line":1},"fn_name":null},{"line":442,"address":[4516478],"length":1,"stats":{"Line":1},"fn_name":null},{"line":443,"address":[4516596],"length":1,"stats":{"Line":1},"fn_name":null},{"line":445,"address":[4516605,4516786],"length":1,"stats":{"Line":1},"fn_name":null},{"line":449,"address":[4517424],"length":1,"stats":{"Line":3},"fn_name":"recurrent_ewma_step_valid_zero"},{"line":450,"address":[4517438],"length":1,"stats":{"Line":1},"fn_name":null},{"line":451,"address":[4517505],"length":1,"stats":{"Line":1},"fn_name":null},{"line":452,"address":[4517548],"length":1,"stats":{"Line":1},"fn_name":null},{"line":453,"address":[4517612],"length":1,"stats":{"Line":1},"fn_name":null},{"line":454,"address":[4517753],"length":1,"stats":{"Line":1},"fn_name":null},{"line":455,"address":[4518031],"length":1,"stats":{"Line":1},"fn_name":null},{"line":456,"address":[4518141],"length":1,"stats":{"Line":1},"fn_name":null},{"line":458,"address":[4518334,4518153],"length":1,"stats":{"Line":1},"fn_name":null},{"line":462,"address":[4236181,4236176],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":463,"address":[4518998],"length":1,"stats":{"Line":1},"fn_name":null},{"line":464,"address":[4519067],"length":1,"stats":{"Line":1},"fn_name":null},{"line":465,"address":[4519118],"length":1,"stats":{"Line":1},"fn_name":null},{"line":466,"address":[4519179],"length":1,"stats":{"Line":1},"fn_name":null},{"line":467,"address":[4519320],"length":1,"stats":{"Line":1},"fn_name":null},{"line":468,"address":[4519598],"length":1,"stats":{"Line":1},"fn_name":null},{"line":469,"address":[4519716],"length":1,"stats":{"Line":1},"fn_name":null},{"line":471,"address":[4519906,4519725],"length":1,"stats":{"Line":1},"fn_name":null},{"line":484,"address":[4406352,4406357],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":485,"address":[5199392],"length":1,"stats":{"Line":1},"fn_name":null},{"line":486,"address":[5199405],"length":1,"stats":{"Line":1},"fn_name":null},{"line":487,"address":[5199705],"length":1,"stats":{"Line":1},"fn_name":null},{"line":488,"address":[5199811],"length":1,"stats":{"Line":1},"fn_name":null},{"line":489,"address":[5199833],"length":1,"stats":{"Line":1},"fn_name":null},{"line":491,"address":[5200023,5199842],"length":1,"stats":{"Line":1},"fn_name":null},{"line":495,"address":[4406384,4406389],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":496,"address":[5200670],"length":1,"stats":{"Line":1},"fn_name":null},{"line":497,"address":[5200688],"length":1,"stats":{"Line":1},"fn_name":null},{"line":498,"address":[5200988],"length":1,"stats":{"Line":1},"fn_name":null},{"line":499,"address":[5201094],"length":1,"stats":{"Line":1},"fn_name":null},{"line":500,"address":[5201116],"length":1,"stats":{"Line":1},"fn_name":null},{"line":502,"address":[5201125,5201306],"length":1,"stats":{"Line":1},"fn_name":null},{"line":506,"address":[4406416,4406421],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":507,"address":[5201950],"length":1,"stats":{"Line":1},"fn_name":null},{"line":508,"address":[5201968],"length":1,"stats":{"Line":1},"fn_name":null},{"line":509,"address":[5202268],"length":1,"stats":{"Line":1},"fn_name":null},{"line":510,"address":[5202374],"length":1,"stats":{"Line":1},"fn_name":null},{"line":511,"address":[5202396],"length":1,"stats":{"Line":1},"fn_name":null},{"line":513,"address":[5202586,5202405],"length":1,"stats":{"Line":1},"fn_name":null},{"line":526,"address":[4976608],"length":1,"stats":{"Line":3},"fn_name":"calc_return_valid"},{"line":527,"address":[4976620],"length":1,"stats":{"Line":1},"fn_name":null},{"line":528,"address":[4976665],"length":1,"stats":{"Line":1},"fn_name":null},{"line":529,"address":[4976733],"length":1,"stats":{"Line":1},"fn_name":null},{"line":530,"address":[4976746],"length":1,"stats":{"Line":1},"fn_name":null},{"line":532,"address":[4976899,4976795],"length":1,"stats":{"Line":1},"fn_name":null},{"line":536,"address":[4977200],"length":1,"stats":{"Line":3},"fn_name":"calc_return_valid_positive"},{"line":537,"address":[4977212],"length":1,"stats":{"Line":1},"fn_name":null},{"line":538,"address":[4977257],"length":1,"stats":{"Line":1},"fn_name":null},{"line":539,"address":[4977325],"length":1,"stats":{"Line":1},"fn_name":null},{"line":540,"address":[4977338],"length":1,"stats":{"Line":1},"fn_name":null},{"line":542,"address":[4977491,4977387],"length":1,"stats":{"Line":1},"fn_name":null},{"line":546,"address":[4977792],"length":1,"stats":{"Line":3},"fn_name":"calc_return_x1_is_zero"},{"line":547,"address":[4977801],"length":1,"stats":{"Line":1},"fn_name":null},{"line":548,"address":[4977843],"length":1,"stats":{"Line":1},"fn_name":null},{"line":549,"address":[4977905],"length":1,"stats":{"Line":1},"fn_name":null},{"line":550,"address":[4977910],"length":1,"stats":{"Line":1},"fn_name":null},{"line":552,"address":[4978044,4977940],"length":1,"stats":{"Line":1},"fn_name":null},{"line":556,"address":[4978336],"length":1,"stats":{"Line":3},"fn_name":"calc_log_return_valid"},{"line":557,"address":[4978355],"length":1,"stats":{"Line":1},"fn_name":null},{"line":558,"address":[4978403],"length":1,"stats":{"Line":1},"fn_name":null},{"line":559,"address":[4978486],"length":1,"stats":{"Line":1},"fn_name":null},{"line":560,"address":[4978568],"length":1,"stats":{"Line":1},"fn_name":null},{"line":562,"address":[4978577,4978758],"length":1,"stats":{"Line":1},"fn_name":null},{"line":566,"address":[4979392],"length":1,"stats":{"Line":3},"fn_name":"calc_log_return_x1_is_zero"},{"line":567,"address":[4979401],"length":1,"stats":{"Line":1},"fn_name":null},{"line":568,"address":[4979443],"length":1,"stats":{"Line":1},"fn_name":null},{"line":569,"address":[4979505],"length":1,"stats":{"Line":1},"fn_name":null},{"line":570,"address":[4979510],"length":1,"stats":{"Line":1},"fn_name":null},{"line":572,"address":[4979540,4979644],"length":1,"stats":{"Line":1},"fn_name":null},{"line":576,"address":[4979936],"length":1,"stats":{"Line":3},"fn_name":"calc_log_return_x1_is_negative"},{"line":577,"address":[4979948],"length":1,"stats":{"Line":1},"fn_name":null},{"line":578,"address":[4979990],"length":1,"stats":{"Line":1},"fn_name":null},{"line":579,"address":[4980052],"length":1,"stats":{"Line":1},"fn_name":null},{"line":580,"address":[4980057],"length":1,"stats":{"Line":1},"fn_name":null},{"line":582,"address":[4980087,4980191],"length":1,"stats":{"Line":1},"fn_name":null},{"line":586,"address":[4980480,4980499],"length":1,"stats":{"Line":3},"fn_name":"calc_return_iter_empty"},{"line":587,"address":[4980487],"length":1,"stats":{"Line":1},"fn_name":null},{"line":588,"address":[4980514],"length":1,"stats":{"Line":1},"fn_name":null},{"line":590,"address":[4980612,4980560],"length":1,"stats":{"Line":2},"fn_name":null},{"line":591,"address":[4980650],"length":1,"stats":{"Line":1},"fn_name":null},{"line":593,"address":[4980705,4980851,4980810],"length":1,"stats":{"Line":2},"fn_name":null},{"line":597,"address":[4981325,4981264],"length":1,"stats":{"Line":3},"fn_name":"calc_return_vec_one_item"},{"line":598,"address":[4981271,4981340],"length":1,"stats":{"Line":2},"fn_name":null},{"line":600,"address":[4981400],"length":1,"stats":{"Line":1},"fn_name":null},{"line":602,"address":[4981501,4981446],"length":1,"stats":{"Line":2},"fn_name":null},{"line":603,"address":[4981539],"length":1,"stats":{"Line":1},"fn_name":null},{"line":605,"address":[4981699,4981740,4981594],"length":1,"stats":{"Line":2},"fn_name":null},{"line":609,"address":[4982144,4982362],"length":1,"stats":{"Line":3},"fn_name":"calc_return_vec_regular_valid"},{"line":610,"address":[4982156,4982377],"length":1,"stats":{"Line":2},"fn_name":null},{"line":617,"address":[4982440],"length":1,"stats":{"Line":1},"fn_name":null},{"line":619,"address":[4982495,4982568],"length":1,"stats":{"Line":2},"fn_name":null},{"line":620,"address":[4982606],"length":1,"stats":{"Line":1},"fn_name":null},{"line":621,"address":[4982863],"length":1,"stats":{"Line":1},"fn_name":null},{"line":624,"address":[5230368,5230387],"length":1,"stats":{"Line":2},"fn_name":"{{closure}}"},{"line":627,"address":[4983020,4983192],"length":1,"stats":{"Line":2},"fn_name":null},{"line":639,"address":[4983200,4983452],"length":1,"stats":{"Line":1},"fn_name":null},{"line":640,"address":[4983821,4983386,4984035,4984309,4985290,4984070],"length":1,"stats":{"Line":4},"fn_name":null},{"line":641,"address":[4984152,4984314],"length":1,"stats":{"Line":1},"fn_name":null},{"line":646,"address":[4985456,4985674],"length":1,"stats":{"Line":3},"fn_name":"calc_return_vec_log_valid"},{"line":647,"address":[4985689,4985468],"length":1,"stats":{"Line":2},"fn_name":null},{"line":654,"address":[4985752],"length":1,"stats":{"Line":1},"fn_name":null},{"line":656,"address":[4985807,4985880],"length":1,"stats":{"Line":2},"fn_name":null},{"line":657,"address":[4985918],"length":1,"stats":{"Line":1},"fn_name":null},{"line":658,"address":[4986175],"length":1,"stats":{"Line":1},"fn_name":null},{"line":661,"address":[5230448,5230467],"length":1,"stats":{"Line":2},"fn_name":"{{closure}}"},{"line":664,"address":[4986504,4986332],"length":1,"stats":{"Line":2},"fn_name":null},{"line":676,"address":[4986764,4986512],"length":1,"stats":{"Line":1},"fn_name":null},{"line":677,"address":[4986698,4987133,4987621,4988602,4987347,4987382],"length":1,"stats":{"Line":4},"fn_name":null},{"line":678,"address":[4987464,4987626],"length":1,"stats":{"Line":1},"fn_name":null}],"covered":257,"coverable":257},{"path":["/","home","rotor","work","src","polka","equilibrium-financial-pallet","pallets","financial","src","mock.rs"],"content":"// Copyright (C) 2020 equilibrium.\n// SPDX-License-Identifier: Apache-2.0\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nuse crate::{Module, Trait};\nuse chrono::prelude::*;\nuse core::time::Duration;\nuse financial_primitives::IntoTypeIterator;\nuse frame_support::codec::{Decode, Encode};\nuse frame_support::traits::UnixTime;\nuse frame_support::{impl_outer_origin, parameter_types, weights::Weight};\nuse frame_system as system;\nuse sp_core::H256;\nuse sp_runtime::{\n    testing::Header,\n    traits::{BlakeTwo256, IdentityLookup},\n    Perbill,\n};\nuse std::cell::RefCell;\nuse substrate_fixed::types::I64F64;\n\nimpl_outer_origin! {\n    pub enum Origin for Test {}\n}\n\nthread_local! {\n    pub static NOW: RefCell\u003cDuration\u003e = RefCell::new(Duration::from_secs(0));\n}\n\npub fn set_now(now: Duration) {\n    NOW.with(|n| *n.borrow_mut() = now);\n}\n\n#[derive(Clone, Eq, PartialEq)]\npub struct Test;\nparameter_types! {\n    pub const BlockHashCount: u64 = 250;\n    pub const MaximumBlockWeight: Weight = 1024;\n    pub const MaximumBlockLength: u32 = 2 * 1024;\n    pub const AvailableBlockRatio: Perbill = Perbill::from_percent(75);\n}\n\nimpl system::Trait for Test {\n    type BaseCallFilter = ();\n    type Origin = Origin;\n    type Call = ();\n    type Index = u64;\n    type BlockNumber = u64;\n    type Hash = H256;\n    type Hashing = BlakeTwo256;\n    type AccountId = u64;\n    type Lookup = IdentityLookup\u003cSelf::AccountId\u003e;\n    type Header = Header;\n    type Event = ();\n    type BlockHashCount = BlockHashCount;\n    type MaximumBlockWeight = MaximumBlockWeight;\n    type DbWeight = ();\n    type BlockExecutionWeight = ();\n    type ExtrinsicBaseWeight = ();\n    type MaximumExtrinsicWeight = MaximumBlockWeight;\n    type MaximumBlockLength = MaximumBlockLength;\n    type AvailableBlockRatio = AvailableBlockRatio;\n    type Version = ();\n    type ModuleToIndex = ();\n    type AccountData = ();\n    type OnNewAccount = ();\n    type OnKilledAccount = ();\n    type SystemWeightInfo = ();\n}\n\npub type FixedNumber = I64F64;\n\nparameter_types! {\n    pub const PriceCount: u32 = 10;\n    pub const PricePeriod: u32 = 60;\n}\n\npub struct TestUnixTime;\n\nimpl UnixTime for TestUnixTime {\n    fn now() -\u003e Duration {\n        NOW.with(|n| *n.borrow())\n    }\n}\n\nimpl Trait for Test {\n    type Event = ();\n    type PriceCount = PriceCount;\n    type PricePeriod = PricePeriod;\n    type UnixTime = TestUnixTime;\n    type Asset = Asset;\n    type FixedNumberBits = i128;\n    type FixedNumber = FixedNumber;\n    type Price = FixedNumber;\n}\n\npub type FinancialModule = Module\u003cTest\u003e;\n\n#[derive(Clone, Copy, Debug, Eq, PartialEq, Encode, Decode)]\npub enum Asset {\n    Btc,\n    Eos,\n}\n\nimpl IntoTypeIterator for Asset {\n    type Iterator = sp_std::vec::IntoIter\u003cSelf\u003e;\n\n    fn into_type_iter() -\u003e Self::Iterator {\n        vec![Asset::Btc, Asset::Eos].into_iter()\n    }\n}\n\npub fn initial_btc_prices() -\u003e Vec\u003cf64\u003e {\n    vec![\n        7_117.21, 7_429.72, 7_550.90, 7_569.94, 7_679.87, 7_795.60, 7_807.06, 8_801.04, 8_658.55,\n        8_864.77,\n    ]\n}\n\npub fn initial_eos_prices() -\u003e Vec\u003cf64\u003e {\n    vec![2.62, 2.67, 2.72, 2.72, 2.74, 2.75, 2.78, 3.02, 2.83, 2.89]\n}\n\nfn create_duration(\n    year: i32,\n    month: u32,\n    day: u32,\n    hour: u32,\n    minute: u32,\n    second: u32,\n) -\u003e Duration {\n    let timestamp = Utc\n        .ymd(year, month, day)\n        .and_hms(hour, minute, second)\n        .timestamp();\n    Duration::from_secs(timestamp as u64)\n}\n\npub fn new_test_ext() -\u003e sp_io::TestExternalities {\n    let mut t = system::GenesisConfig::default()\n        .build_storage::\u003cTest\u003e()\n        .unwrap();\n\n    let prev_period_now = create_duration(2020, 9, 14, 11, 25, 0);\n    crate::GenesisConfig::\u003cTest\u003e {\n        prices: vec![\n            (\n                Asset::Btc,\n                initial_btc_prices()\n                    .into_iter()\n                    .map(FixedNumber::from_num)\n                    .collect(),\n                prev_period_now,\n            ),\n            (\n                Asset::Eos,\n                initial_eos_prices()\n                    .into_iter()\n                    .map(FixedNumber::from_num)\n                    .collect(),\n                prev_period_now,\n            ),\n        ],\n    }\n    .assimilate_storage(\u0026mut t)\n    .unwrap();\n\n    t.into()\n}\n\npub fn new_test_ext_empty_storage() -\u003e sp_io::TestExternalities {\n    system::GenesisConfig::default()\n        .build_storage::\u003cTest\u003e()\n        .unwrap()\n        .into()\n}\n","traces":[{"line":33,"address":[5478608,5478677],"length":1,"stats":{"Line":0},"fn_name":null},{"line":38,"address":[4352240],"length":1,"stats":{"Line":1},"fn_name":null},{"line":41,"address":[4347776],"length":1,"stats":{"Line":1},"fn_name":"set_now"},{"line":42,"address":[5478256,5478270],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":51,"address":[4352465],"length":1,"stats":{"Line":0},"fn_name":null},{"line":92,"address":[],"length":0,"stats":{"Line":2},"fn_name":null},{"line":93,"address":[],"length":0,"stats":{"Line":6},"fn_name":null},{"line":119,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":120,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":124,"address":[4347984],"length":1,"stats":{"Line":1},"fn_name":"initial_btc_prices"},{"line":125,"address":[4347991],"length":1,"stats":{"Line":1},"fn_name":null},{"line":131,"address":[4348192],"length":1,"stats":{"Line":1},"fn_name":"initial_eos_prices"},{"line":132,"address":[4348199],"length":1,"stats":{"Line":1},"fn_name":null},{"line":135,"address":[4348384],"length":1,"stats":{"Line":1},"fn_name":"create_duration"},{"line":143,"address":[4348415],"length":1,"stats":{"Line":1},"fn_name":null},{"line":147,"address":[4348536],"length":1,"stats":{"Line":1},"fn_name":null},{"line":150,"address":[4348576,4348623],"length":1,"stats":{"Line":1},"fn_name":"new_test_ext"},{"line":151,"address":[4348586,4348654],"length":1,"stats":{"Line":2},"fn_name":null},{"line":155,"address":[4348760],"length":1,"stats":{"Line":1},"fn_name":null},{"line":157,"address":[4348820,4349030,4349556,4349181],"length":1,"stats":{"Line":2},"fn_name":null},{"line":179,"address":[4349403],"length":1,"stats":{"Line":1},"fn_name":null},{"line":182,"address":[4349680,4349719],"length":1,"stats":{"Line":7},"fn_name":"new_test_ext_empty_storage"},{"line":183,"address":[4349747,4349804,4349690],"length":1,"stats":{"Line":14},"fn_name":null}],"covered":19,"coverable":23},{"path":["/","home","rotor","work","src","polka","equilibrium-financial-pallet","pallets","financial","src","tests.rs"],"content":"// Copyright (C) 2020 equilibrium.\n// SPDX-License-Identifier: Apache-2.0\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nuse crate::mock::*;\nuse crate::{calc_correlation, calc_volatility};\nuse crate::{\n    CalcCorrelationType, CalcReturnType, CalcVolatilityType, Error, Financial, PriceUpdate,\n};\nuse approx::assert_abs_diff_eq;\nuse chrono::prelude::*;\nuse core::time::Duration;\nuse financial_primitives::OnPriceSet;\nuse frame_support::assert_ok;\nuse frame_support::dispatch::DispatchError;\nuse sp_std::ops::Range;\nuse substrate_fixed::traits::LossyInto;\n\nfn create_duration(\n    year: i32,\n    month: u32,\n    day: u32,\n    hour: u32,\n    minute: u32,\n    second: u32,\n) -\u003e Duration {\n    let timestamp = Utc\n        .ymd(year, month, day)\n        .and_hms(hour, minute, second)\n        .timestamp();\n    Duration::from_secs(timestamp as u64)\n}\n\n#[cfg(test)]\nmod price_period {\n    use super::super::*;\n    use super::create_duration;\n\n    #[test]\n    fn info_for_neighbour_periods() {\n        let period_start = create_duration(2020, 9, 14, 12, 31, 0);\n        let now = create_duration(2020, 9, 14, 13, 2, 0);\n\n        // period is one hour\n        let period = PricePeriod(60);\n\n        let actual = get_curr_period_info(\u0026period, period_start, now);\n        let expected = Ok((create_duration(2020, 9, 14, 13, 0, 0), 1));\n\n        assert_eq!(actual, expected);\n    }\n\n    #[test]\n    fn info_for_distant_periods() {\n        let period_start = create_duration(2020, 9, 14, 12, 31, 0);\n        let now = create_duration(2020, 9, 15, 7, 2, 0);\n\n        // period is one hour\n        let period = PricePeriod(60);\n\n        let actual = get_curr_period_info(\u0026period, period_start, now);\n        let expected = Ok((create_duration(2020, 9, 15, 7, 0, 0), 19));\n\n        assert_eq!(actual, expected);\n    }\n\n    #[test]\n    fn invalid_period_start() {\n        let period_start = create_duration(2020, 9, 14, 12, 31, 0);\n        let now = create_duration(2020, 9, 14, 12, 42, 0);\n\n        // period is one hour\n        let period = PricePeriod(60);\n\n        let actual = get_period_change(\u0026period, Some(period_start), now);\n        let expected = Err(PricePeriodChangeError::InvalidPeriodStart);\n\n        assert_eq!(actual, expected);\n    }\n\n    #[test]\n    fn period_remains_unchanged() {\n        let period_start = create_duration(2020, 9, 14, 12, 0, 0);\n        let now = create_duration(2020, 9, 14, 12, 42, 0);\n\n        // period is one hour\n        let period = PricePeriod(60);\n\n        let actual = get_period_change(\u0026period, Some(period_start), now);\n        let expected = Ok(PricePeriodChange {\n            period_start,\n            action: PricePeriodAction::RemainsUnchanged,\n        });\n\n        assert_eq!(actual, expected);\n    }\n\n    #[test]\n    fn period_changed_slightly() {\n        let period_start = create_duration(2020, 9, 14, 12, 0, 0);\n        let now = create_duration(2020, 9, 14, 13, 2, 0);\n\n        // period is one hour\n        let period = PricePeriod(60);\n\n        let actual = get_period_change(\u0026period, Some(period_start), now);\n        let expected = Ok(PricePeriodChange {\n            period_start: create_duration(2020, 9, 14, 13, 0, 0),\n            action: PricePeriodAction::StartedNew(0),\n        });\n\n        assert_eq!(actual, expected);\n    }\n\n    #[test]\n    fn period_changed_significantly() {\n        let period_start = create_duration(2020, 9, 14, 12, 0, 0);\n        let now = create_duration(2020, 9, 15, 7, 2, 0);\n\n        // period is one hour\n        let period = PricePeriod(60);\n\n        let actual = get_period_change(\u0026period, Some(period_start), now);\n        let expected = Ok(PricePeriodChange {\n            period_start: create_duration(2020, 9, 15, 7, 0, 0),\n            action: PricePeriodAction::StartedNew(18),\n        });\n\n        assert_eq!(actual, expected);\n    }\n\n    #[test]\n    fn period_is_in_the_past() {\n        let period_start = create_duration(2020, 9, 14, 12, 0, 0);\n        let now = create_duration(2020, 9, 12, 16, 27, 10);\n\n        // period is one hour\n        let period = PricePeriod(60);\n\n        let actual = get_period_change(\u0026period, Some(period_start), now);\n        let expected = Err(PricePeriodChangeError::PeriodIsInThePast);\n\n        assert_eq!(actual, expected);\n    }\n\n    #[test]\n    fn zero_period() {\n        let period_start = create_duration(2020, 9, 14, 12, 0, 0);\n        let now = create_duration(2020, 9, 15, 7, 2, 0);\n\n        // period is one hour\n        let period = PricePeriod(0);\n\n        let actual = get_period_change(\u0026period, Some(period_start), now);\n        let expected = Err(PricePeriodChangeError::DivisionByZero);\n\n        assert_eq!(actual, expected);\n    }\n\n    #[test]\n    fn elapsed_period_count_is_too_large() {\n        let period_start = create_duration(2020, 9, 14, 12, 0, 0);\n        let now = Duration::from_secs(u64::MAX);\n\n        // period is one hour\n        let period = PricePeriod(60);\n\n        let actual = get_period_change(\u0026period, Some(period_start), now);\n        let expected = Err(PricePeriodChangeError::Overflow);\n\n        assert_eq!(actual, expected);\n    }\n}\n\n#[cfg(test)]\nmod new_prices {\n    use crate::*;\n\n    #[test]\n    fn no_last_price_no_empty_periods() {\n        let actual = get_new_prices::\u003cu32\u003e(None, 123, 0, 5);\n        let expected = Ok(vec![123]);\n\n        assert_eq!(actual, expected);\n    }\n\n    #[test]\n    fn no_last_price_some_empty_periods() {\n        let actual = get_new_prices::\u003cu32\u003e(None, 123, 3, 5);\n        let expected = Ok(vec![123]);\n\n        assert_eq!(actual, expected);\n    }\n\n    #[test]\n    fn some_last_price_no_empty_periods() {\n        let actual = get_new_prices::\u003cu32\u003e(Some(555), 123, 0, 5);\n        let expected = Ok(vec![123]);\n\n        assert_eq!(actual, expected);\n    }\n\n    #[test]\n    fn some_last_price_some_empty_periods_less_than_max() {\n        let actual = get_new_prices::\u003cu32\u003e(Some(555), 123, 3, 5);\n        let expected = Ok(vec![555, 555, 555, 123]);\n\n        assert_eq!(actual, expected);\n    }\n\n    #[test]\n    fn some_last_price_some_empty_periods_equal_to_max() {\n        let actual = get_new_prices::\u003cu32\u003e(Some(555), 123, 4, 5);\n        let expected = Ok(vec![555, 555, 555, 555, 123]);\n\n        assert_eq!(actual, expected);\n    }\n\n    #[test]\n    fn some_last_price_some_empty_periods_slightly_more_than_max() {\n        let actual = get_new_prices::\u003cu32\u003e(Some(555), 123, 5, 5);\n        let expected = Ok(vec![555, 555, 555, 555, 123]);\n\n        assert_eq!(actual, expected);\n    }\n\n    #[test]\n    fn some_last_price_some_empty_periods_significantly_more_than_max() {\n        let actual = get_new_prices::\u003cu32\u003e(Some(555), 123, 27, 5);\n        let expected = Ok(vec![555, 555, 555, 555, 123]);\n\n        assert_eq!(actual, expected);\n    }\n\n    #[test]\n    fn max_periods_is_zero() {\n        let actual = get_new_prices::\u003cu32\u003e(Some(555), 123, 27, 0);\n        let expected = Err(GetNewPricesError::Overflow);\n\n        assert_eq!(actual, expected);\n    }\n\n    #[test]\n    fn max_periods_is_one() {\n        let actual = get_new_prices::\u003cu32\u003e(Some(555), 123, 3, 1);\n        let expected = Ok(vec![123]);\n\n        assert_eq!(actual, expected);\n    }\n}\n\n#[test]\nfn calc_linear_return_for_btc_using_only_genesis() {\n    new_test_ext().execute_with(|| {\n        let actual: Vec\u003cf64\u003e =\n            \u003cFinancialModule as Financial\u003e::calc_return(CalcReturnType::Regular, Asset::Btc)\n                .unwrap()\n                .into_iter()\n                .map(|x| x.lossy_into())\n                .collect();\n        let expected = vec![\n            0.04390906,\n            0.01631017,\n            0.00252155,\n            0.01452191,\n            0.01506927,\n            0.00147006,\n            0.12731809,\n            -0.01619013,\n            0.02381692,\n        ];\n\n        assert_eq!(actual.len(), expected.len());\n        for (a, e) in actual.into_iter().zip(expected.into_iter()) {\n            assert_abs_diff_eq!(a, e, epsilon = 1e-8);\n        }\n    });\n}\n\n#[test]\nfn calc_log_return_for_btc_using_only_genesis() {\n    new_test_ext().execute_with(|| {\n        let actual: Vec\u003cf64\u003e =\n            \u003cFinancialModule as Financial\u003e::calc_return(CalcReturnType::Log, Asset::Btc)\n                .unwrap()\n                .into_iter()\n                .map(|x| x.lossy_into())\n                .collect();\n        let expected = vec![\n            0.042972378,\n            0.016178588,\n            0.002518380,\n            0.014417479,\n            0.014956852,\n            0.001468981,\n            0.119841444,\n            -0.016322624,\n            0.023537722,\n        ];\n\n        assert_eq!(actual.len(), expected.len());\n        for (a, e) in actual.into_iter().zip(expected.into_iter()) {\n            assert_abs_diff_eq!(a, e, epsilon = 1e-8);\n        }\n    });\n}\n\n#[test]\nfn calc_linear_return_for_eos_using_only_genesis() {\n    new_test_ext().execute_with(|| {\n        let actual: Vec\u003cf64\u003e =\n            \u003cFinancialModule as Financial\u003e::calc_return(CalcReturnType::Regular, Asset::Eos)\n                .unwrap()\n                .into_iter()\n                .map(|x| x.lossy_into())\n                .collect();\n        let expected = vec![\n            0.01908397,\n            0.01872659,\n            0.00000000,\n            0.00735294,\n            0.00364964,\n            0.01090909,\n            0.08633094,\n            -0.06291391,\n            0.02120141,\n        ];\n\n        assert_eq!(actual.len(), expected.len());\n        for (a, e) in actual.into_iter().zip(expected.into_iter()) {\n            assert_abs_diff_eq!(a, e, epsilon = 1e-8);\n        }\n    });\n}\n\n#[test]\nfn calc_log_return_for_eos_using_only_genesis() {\n    new_test_ext().execute_with(|| {\n        let actual: Vec\u003cf64\u003e =\n            \u003cFinancialModule as Financial\u003e::calc_return(CalcReturnType::Log, Asset::Eos)\n                .unwrap()\n                .into_iter()\n                .map(|x| x.lossy_into())\n                .collect();\n        let expected = vec![\n            0.018904155,\n            0.018553408,\n            0.000000000,\n            0.007326040,\n            0.003642991,\n            0.010850016,\n            0.082805904,\n            -0.064980120,\n            0.020979790,\n        ];\n\n        assert_eq!(actual.len(), expected.len());\n        for (a, e) in actual.into_iter().zip(expected.into_iter()) {\n            assert_abs_diff_eq!(a, e, epsilon = 1e-8);\n        }\n    });\n}\n\n#[test]\nfn calc_linear_return_for_btc_using_some_oracle_prices() {\n    new_test_ext().execute_with(|| {\n        let prices: Vec\u003c_\u003e = vec![8_988.60, 8_897.47, 8_912.65, 9_003.07]\n            .into_iter()\n            .map(FixedNumber::from_num)\n            .collect();\n\n        let mut now = create_duration(2020, 9, 14, 12, 31, 0);\n        set_now(now);\n\n        for p in prices.into_iter() {\n            let result = \u003cFinancialModule as OnPriceSet\u003e::on_price_set(Asset::Btc, p);\n\n            assert_ok!(result);\n\n            now = now + Duration::from_secs(60 * 60);\n            set_now(now);\n        }\n\n        let actual: Vec\u003cf64\u003e =\n            \u003cFinancialModule as Financial\u003e::calc_return(CalcReturnType::Regular, Asset::Btc)\n                .unwrap()\n                .into_iter()\n                .map(|x| x.lossy_into())\n                .collect();\n        let expected = vec![\n            0.01506927,\n            0.00147006,\n            0.12731809,\n            -0.01619013,\n            0.02381692,\n            0.01396878,\n            -0.01013840,\n            0.00170610,\n            0.01014513,\n        ];\n\n        assert_eq!(actual.len(), expected.len());\n        for (a, e) in actual.into_iter().zip(expected.into_iter()) {\n            assert_abs_diff_eq!(a, e, epsilon = 1e-8);\n        }\n    });\n}\n\n#[test]\nfn initial_prices_state_with_empty_genesis() {\n    new_test_ext_empty_storage().execute_with(|| {\n        let asset = Asset::Btc;\n\n        let updates = FinancialModule::updates(asset);\n        let expected_updates = None;\n\n        let log = FinancialModule::price_logs(asset);\n        let prices: Vec\u003c_\u003e = log.prices.iter().copied().collect();\n        let expected_prices: Vec\u003cFixedNumber\u003e = vec![];\n\n        let log = FinancialModule::price_logs(asset);\n        let prices_cap = log.prices.len_cap();\n        let expected_price_cap = 0;\n\n        assert_eq!(updates, expected_updates);\n        assert_eq!(prices, expected_prices);\n        assert_eq!(prices_cap, expected_price_cap);\n    });\n}\n\n#[test]\nfn initial_prices_state_with_nonempty_genesis() {\n    new_test_ext().execute_with(|| {\n        let asset = Asset::Btc;\n\n        let updates = FinancialModule::updates(asset);\n        let expected_updates = None;\n\n        let log = FinancialModule::price_logs(asset);\n        let prices: Vec\u003c_\u003e = log.prices.iter().copied().collect();\n        let expected_prices: Vec\u003cFixedNumber\u003e = initial_btc_prices()\n            .into_iter()\n            .map(FixedNumber::from_num)\n            .collect();\n\n        let log = FinancialModule::price_logs(asset);\n        let prices_cap = log.prices.len_cap();\n        let expected_price_cap = PriceCount::get();\n\n        assert_eq!(updates, expected_updates);\n        assert_eq!(prices, expected_prices);\n        assert_eq!(prices_cap, expected_price_cap);\n    });\n}\n\n#[test]\nfn first_price_with_empty_genesis() {\n    new_test_ext_empty_storage().execute_with(|| {\n        let asset = Asset::Btc;\n\n        let price = FixedNumber::from_num(9_000);\n\n        let period_start = create_duration(2020, 9, 14, 12, 0, 0);\n        let now = create_duration(2020, 9, 14, 12, 31, 0);\n        set_now(now);\n\n        assert_ok!(\u003cFinancialModule as OnPriceSet\u003e::on_price_set(asset, price));\n\n        let updates = FinancialModule::updates(asset);\n        let expected_updates = Some(PriceUpdate::new(period_start, now, price));\n\n        let log = FinancialModule::price_logs(asset);\n        let prices: Vec\u003c_\u003e = log.prices.iter().copied().collect();\n        let expected_prices: Vec\u003cFixedNumber\u003e = vec![price];\n\n        let prices_cap = log.prices.len_cap();\n        let expected_price_cap = PriceCount::get();\n\n        assert_eq!(updates, expected_updates);\n        assert_eq!(prices, expected_prices);\n        assert_eq!(prices_cap, expected_price_cap);\n    });\n}\n\n#[test]\nfn new_price_is_in_the_past() {\n    new_test_ext_empty_storage().execute_with(|| {\n        let asset = Asset::Btc;\n\n        let price = FixedNumber::from_num(9_000);\n\n        let period_start = create_duration(2020, 9, 14, 12, 0, 0);\n        let now = create_duration(2020, 9, 14, 12, 31, 0);\n        set_now(now);\n\n        assert_ok!(\u003cFinancialModule as OnPriceSet\u003e::on_price_set(asset, price));\n\n        let past_price = FixedNumber::from_num(7_300);\n        let past_now = create_duration(2020, 9, 13, 0, 3, 0);\n        set_now(past_now);\n\n        let result = \u003cFinancialModule as OnPriceSet\u003e::on_price_set(asset, past_price);\n        let expected_result: Result\u003c(), DispatchError\u003e =\n            Err(Error::\u003cTest\u003e::PeriodIsInThePast.into());\n        assert_eq!(result, expected_result);\n\n        let updates = FinancialModule::updates(asset);\n        let expected_updates = Some(PriceUpdate::new(period_start, now, price));\n\n        let log = FinancialModule::price_logs(asset);\n        let prices: Vec\u003c_\u003e = log.prices.iter().copied().collect();\n        let expected_prices: Vec\u003cFixedNumber\u003e = vec![price];\n\n        let prices_cap = log.prices.len_cap();\n        let expected_price_cap = PriceCount::get();\n\n        assert_eq!(updates, expected_updates);\n        assert_eq!(prices, expected_prices);\n        assert_eq!(prices_cap, expected_price_cap);\n    });\n}\n\n#[test]\nfn new_price_is_in_current_period() {\n    new_test_ext_empty_storage().execute_with(|| {\n        let asset = Asset::Btc;\n\n        let price = FixedNumber::from_num(9_000);\n\n        let period_start = create_duration(2020, 9, 14, 12, 0, 0);\n        let now = create_duration(2020, 9, 14, 12, 31, 0);\n        set_now(now);\n\n        assert_ok!(\u003cFinancialModule as OnPriceSet\u003e::on_price_set(asset, price));\n\n        let same_period_price = FixedNumber::from_num(9_100);\n        let same_period_now = create_duration(2020, 9, 14, 12, 48, 0);\n        set_now(same_period_now);\n\n        assert_ok!(\u003cFinancialModule as OnPriceSet\u003e::on_price_set(\n            asset,\n            same_period_price\n        ));\n\n        let updates = FinancialModule::updates(asset);\n        let expected_updates = Some(PriceUpdate::new(\n            period_start,\n            same_period_now,\n            same_period_price,\n        ));\n\n        let log = FinancialModule::price_logs(asset);\n        let prices: Vec\u003c_\u003e = log.prices.iter().copied().collect();\n        let expected_prices: Vec\u003cFixedNumber\u003e = vec![price];\n\n        let prices_cap = log.prices.len_cap();\n        let expected_price_cap = PriceCount::get();\n\n        assert_eq!(updates, expected_updates);\n        assert_eq!(prices, expected_prices);\n        assert_eq!(prices_cap, expected_price_cap);\n    });\n}\n\n#[test]\nfn new_price_is_in_next_period() {\n    new_test_ext_empty_storage().execute_with(|| {\n        let asset = Asset::Btc;\n\n        let price = FixedNumber::from_num(9_000);\n\n        let now = create_duration(2020, 9, 14, 12, 31, 0);\n        set_now(now);\n\n        assert_ok!(\u003cFinancialModule as OnPriceSet\u003e::on_price_set(asset, price));\n\n        let next_period_start = create_duration(2020, 9, 14, 13, 0, 0);\n        let next_period_price = FixedNumber::from_num(9_100);\n        let next_period_now = create_duration(2020, 9, 14, 13, 27, 0);\n        set_now(next_period_now);\n\n        assert_ok!(\u003cFinancialModule as OnPriceSet\u003e::on_price_set(\n            asset,\n            next_period_price\n        ));\n\n        let updates = FinancialModule::updates(asset);\n        let expected_updates = Some(PriceUpdate::new(\n            next_period_start,\n            next_period_now,\n            next_period_price,\n        ));\n\n        let log = FinancialModule::price_logs(asset);\n        let prices: Vec\u003c_\u003e = log.prices.iter().copied().collect();\n        let expected_prices: Vec\u003cFixedNumber\u003e = vec![price, next_period_price];\n\n        let prices_cap = log.prices.len_cap();\n        let expected_price_cap = PriceCount::get();\n\n        assert_eq!(updates, expected_updates);\n        assert_eq!(prices, expected_prices);\n        assert_eq!(prices_cap, expected_price_cap);\n    });\n}\n\n#[test]\nfn new_price_is_a_few_periods_ahead() {\n    new_test_ext_empty_storage().execute_with(|| {\n        let asset = Asset::Btc;\n\n        let price = FixedNumber::from_num(9_000);\n\n        let now = create_duration(2020, 9, 14, 12, 31, 0);\n        set_now(now);\n\n        assert_ok!(\u003cFinancialModule as OnPriceSet\u003e::on_price_set(asset, price));\n\n        let new_period_start = create_duration(2020, 9, 14, 16, 0, 0);\n        let new_period_price = FixedNumber::from_num(9_100);\n        let new_period_now = create_duration(2020, 9, 14, 16, 27, 0);\n        set_now(new_period_now);\n\n        assert_ok!(\u003cFinancialModule as OnPriceSet\u003e::on_price_set(\n            asset,\n            new_period_price\n        ));\n\n        let updates = FinancialModule::updates(asset);\n        let expected_updates = Some(PriceUpdate::new(\n            new_period_start,\n            new_period_now,\n            new_period_price,\n        ));\n\n        let log = FinancialModule::price_logs(asset);\n        let prices: Vec\u003c_\u003e = log.prices.iter().copied().collect();\n        let expected_prices: Vec\u003cFixedNumber\u003e = vec![price, price, price, price, new_period_price];\n\n        let prices_cap = log.prices.len_cap();\n        let expected_price_cap = PriceCount::get();\n\n        assert_eq!(updates, expected_updates);\n        assert_eq!(prices, expected_prices);\n        assert_eq!(prices_cap, expected_price_cap);\n    });\n}\n\n#[test]\nfn new_price_is_many_periods_ahead() {\n    new_test_ext_empty_storage().execute_with(|| {\n        let asset = Asset::Btc;\n\n        let price = FixedNumber::from_num(9_000);\n\n        let now = create_duration(2020, 9, 14, 12, 31, 0);\n        set_now(now);\n\n        assert_ok!(\u003cFinancialModule as OnPriceSet\u003e::on_price_set(asset, price));\n\n        let new_period_start = create_duration(2020, 10, 3, 22, 0, 0);\n        let new_period_price = FixedNumber::from_num(9_100);\n        let new_period_now = create_duration(2020, 10, 3, 22, 27, 0);\n        set_now(new_period_now);\n\n        assert_ok!(\u003cFinancialModule as OnPriceSet\u003e::on_price_set(\n            asset,\n            new_period_price\n        ));\n\n        let updates = FinancialModule::updates(asset);\n        let expected_updates = Some(PriceUpdate::new(\n            new_period_start,\n            new_period_now,\n            new_period_price,\n        ));\n\n        let log = FinancialModule::price_logs(asset);\n        let prices: Vec\u003c_\u003e = log.prices.iter().copied().collect();\n        let mut expected_prices: Vec\u003cFixedNumber\u003e = vec![price; PriceCount::get() as usize - 1];\n        expected_prices.push(new_period_price);\n\n        let prices_cap = log.prices.len_cap();\n        let expected_price_cap = PriceCount::get();\n\n        assert_eq!(updates, expected_updates);\n        assert_eq!(prices, expected_prices);\n        assert_eq!(prices_cap, expected_price_cap);\n    });\n}\n\n#[test]\nfn wrong_now_in_the_distant_future() {\n    new_test_ext_empty_storage().execute_with(|| {\n        let asset = Asset::Btc;\n\n        let price = FixedNumber::from_num(9_000);\n\n        let period_start = create_duration(2020, 9, 14, 12, 0, 0);\n        let now = create_duration(2020, 9, 14, 12, 31, 0);\n        set_now(now);\n\n        assert_ok!(\u003cFinancialModule as OnPriceSet\u003e::on_price_set(asset, price));\n\n        let distant_future_price = FixedNumber::from_num(9_100);\n        let distant_future_now = Duration::from_secs(u64::MAX);\n        set_now(distant_future_now);\n\n        let result = \u003cFinancialModule as OnPriceSet\u003e::on_price_set(asset, distant_future_price);\n        let expected_result: Result\u003c(), DispatchError\u003e = Err(Error::\u003cTest\u003e::Overflow.into());\n        assert_eq!(result, expected_result);\n\n        let updates = FinancialModule::updates(asset);\n        let expected_updates = Some(PriceUpdate::new(period_start, now, price));\n\n        let log = FinancialModule::price_logs(asset);\n        let prices: Vec\u003c_\u003e = log.prices.iter().copied().collect();\n        let expected_prices: Vec\u003cFixedNumber\u003e = vec![price];\n\n        let prices_cap = log.prices.len_cap();\n        let expected_price_cap = PriceCount::get();\n\n        assert_eq!(updates, expected_updates);\n        assert_eq!(prices, expected_prices);\n        assert_eq!(prices_cap, expected_price_cap);\n    });\n}\n\n#[test]\nfn new_price_has_arravied_while_prices_countainer_is_full() {\n    new_test_ext_empty_storage().execute_with(|| {\n        let asset = Asset::Btc;\n\n        let prices: Vec\u003c_\u003e = vec![1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n            .into_iter()\n            .map(FixedNumber::from_num)\n            .collect();\n\n        let mut now = create_duration(2020, 9, 14, 12, 31, 0);\n        set_now(now);\n\n        for \u0026p in prices.iter() {\n            let result = \u003cFinancialModule as OnPriceSet\u003e::on_price_set(asset, p);\n\n            assert_ok!(result);\n\n            now = now + Duration::from_secs(60 * 60);\n            set_now(now);\n        }\n\n        let new_period_start = create_duration(2020, 9, 14, 22, 0, 0);\n        let new_period_price = FixedNumber::from_num(11);\n\n        assert_ok!(\u003cFinancialModule as OnPriceSet\u003e::on_price_set(\n            asset,\n            new_period_price\n        ));\n\n        let updates = FinancialModule::updates(asset);\n        let expected_updates = Some(PriceUpdate::new(new_period_start, now, new_period_price));\n\n        let log = FinancialModule::price_logs(asset);\n        let actual_prices: Vec\u003c_\u003e = log.prices.iter().copied().collect();\n        let mut expected_prices: Vec\u003c_\u003e = prices[1..].iter().copied().collect();\n        expected_prices.push(new_period_price);\n\n        let prices_cap = log.prices.len_cap();\n        let expected_price_cap = PriceCount::get();\n\n        assert_eq!(updates, expected_updates);\n        assert_eq!(actual_prices, expected_prices);\n        assert_eq!(prices_cap, expected_price_cap);\n    });\n}\n\nfn btc_prices() -\u003e Vec\u003cFixedNumber\u003e {\n    vec![\n        7_117.21, 7_429.72, 7_550.90, 7_569.94, 7_679.87, 7_795.60, 7_807.06, 8_801.04, 8_658.55,\n        8_864.77, 8_988.60, 8_897.47, 8_912.65, 9_003.07, 9_268.76, 9_951.52, 9_842.67, 9_593.90,\n        8_756.43, 8_601.80, 8_804.48, 9_269.99, 9_733.72, 9_328.20, 9_377.01, 9_670.74, 9_726.57,\n        9_729.04, 9_522.98, 9_081.76,\n    ]\n    .into_iter()\n    .map(FixedNumber::from_num)\n    .collect()\n}\n\n#[test]\nfn calc_volatility_btc_regular_regular() {\n    let return_type = CalcReturnType::Regular;\n    let vol_type = CalcVolatilityType::Regular;\n    let prices = btc_prices();\n\n    let actual = calc_volatility(return_type, vol_type, \u0026prices);\n    assert_ok!(actual);\n    let actual: f64 = actual.unwrap().lossy_into();\n\n    let expected = 0.03957419747;\n\n    assert_abs_diff_eq!(actual, expected, epsilon = 1e-8);\n}\n\n#[test]\nfn calc_volatility_btc_log_regular() {\n    let return_type = CalcReturnType::Log;\n    let vol_type = CalcVolatilityType::Regular;\n    let prices = btc_prices();\n\n    let actual = calc_volatility(return_type, vol_type, \u0026prices);\n    assert_ok!(actual);\n    let actual: f64 = actual.unwrap().lossy_into();\n\n    let expected = 0.03897272754;\n\n    assert_abs_diff_eq!(actual, expected, epsilon = 1e-8);\n}\n\nfn eos_prices() -\u003e Vec\u003cFixedNumber\u003e {\n    vec![\n        2.62, 2.67, 2.72, 2.72, 2.74, 2.75, 2.78, 3.02, 2.83, 2.89, 2.95, 2.84, 2.78, 2.77, 2.69,\n        2.76, 2.76, 2.76, 2.45, 2.41, 2.44, 2.53, 2.61, 2.59, 2.63, 2.62, 2.66, 2.63, 2.6, 2.47,\n    ]\n    .into_iter()\n    .map(FixedNumber::from_num)\n    .collect()\n}\n\n#[test]\nfn calc_volatility_eos_regular_regular() {\n    let return_type = CalcReturnType::Regular;\n    let vol_type = CalcVolatilityType::Regular;\n    let prices = eos_prices();\n\n    let actual = calc_volatility(return_type, vol_type, \u0026prices);\n    assert_ok!(actual);\n    let actual: f64 = actual.unwrap().lossy_into();\n\n    let expected = 0.03545408186;\n\n    assert_abs_diff_eq!(actual, expected, epsilon = 1e-8);\n}\n\n#[test]\nfn calc_volatility_eos_log_regular() {\n    let return_type = CalcReturnType::Log;\n    let vol_type = CalcVolatilityType::Regular;\n    let prices = eos_prices();\n\n    let actual = calc_volatility(return_type, vol_type, \u0026prices);\n    assert_ok!(actual);\n    let actual: f64 = actual.unwrap().lossy_into();\n\n    let expected = 0.03608986052;\n\n    assert_abs_diff_eq!(actual, expected, epsilon = 1e-8);\n}\n\n#[test]\nfn calc_correlation_btc_eos_log_regular() {\n    let return_type = CalcReturnType::Log;\n    let corr_type = CalcCorrelationType::Regular;\n    let btc_prices = btc_prices();\n    let eos_prices = eos_prices();\n\n    let actual = calc_correlation(return_type, corr_type, \u0026btc_prices, \u0026eos_prices);\n    assert_ok!(actual);\n    let actual: f64 = actual.unwrap().lossy_into();\n\n    let expected = 0.83127977977;\n\n    assert_abs_diff_eq!(actual, expected, epsilon = 1e-8);\n}\n\n#[test]\nfn calc_volatility_btc_regular_exponential() {\n    let return_type = CalcReturnType::Regular;\n    let vol_type = CalcVolatilityType::Exponential(36);\n    let prices = btc_prices();\n\n    let actual = calc_volatility(return_type, vol_type, \u0026prices);\n    assert_ok!(actual);\n    let actual: f64 = actual.unwrap().lossy_into();\n\n    let expected = 0.0373329770530;\n\n    assert_abs_diff_eq!(actual, expected, epsilon = 1e-8);\n}\n\n#[test]\nfn calc_volatility_btc_log_exponential() {\n    let return_type = CalcReturnType::Log;\n    let vol_type = CalcVolatilityType::Exponential(36);\n    let prices = btc_prices();\n\n    let actual = calc_volatility(return_type, vol_type, \u0026prices);\n    assert_ok!(actual);\n    let actual: f64 = actual.unwrap().lossy_into();\n\n    let expected = 0.0390786026023339;\n\n    assert_abs_diff_eq!(actual, expected, epsilon = 1e-8);\n}\n\n#[test]\nfn calc_correlation_btc_eos_log_exponential() {\n    let return_type = CalcReturnType::Log;\n    let corr_type = CalcCorrelationType::Exponential(36);\n    let btc_prices = btc_prices();\n    let eos_prices = eos_prices();\n\n    let actual = calc_correlation(return_type, corr_type, \u0026btc_prices, \u0026eos_prices);\n    assert_ok!(actual);\n    let actual: f64 = actual.unwrap().lossy_into();\n\n    let expected = 0.726633137678748;\n\n    assert_abs_diff_eq!(actual, expected, epsilon = 1e-8);\n}\n\n#[test]\nfn calc_correlation_different_price_periods_results_in_periods_intersection() {\n    new_test_ext().execute_with(|| {\n        let prices: Vec\u003c_\u003e = vec![8_988.60, 8_897.47]\n            .into_iter()\n            .map(FixedNumber::from_num)\n            .collect();\n\n        let mut now = create_duration(2020, 9, 14, 12, 31, 0);\n        set_now(now);\n\n        for p in prices.into_iter() {\n            let result = \u003cFinancialModule as OnPriceSet\u003e::on_price_set(Asset::Btc, p);\n\n            assert_ok!(result);\n\n            now = now + Duration::from_secs(60 * 60);\n            set_now(now);\n        }\n\n        let actual = \u003cFinancialModule as Financial\u003e::calc_corr(\n            CalcReturnType::Regular,\n            CalcCorrelationType::Regular,\n            Asset::Btc,\n            Asset::Eos,\n        );\n        assert_ok!(\u0026actual);\n        let (_, actual_period) = actual.unwrap();\n        let expected_period = Range {\n            start: create_duration(2020, 9, 14, 4, 0, 0),\n            end: create_duration(2020, 9, 14, 12, 0, 0),\n        };\n\n        assert_eq!(actual_period, expected_period);\n    });\n}\n\n#[test]\nfn calc_vol_btc_regular_regular() {\n    new_test_ext().execute_with(|| {\n        let actual = \u003cFinancialModule as Financial\u003e::calc_vol(\n            CalcReturnType::Regular,\n            CalcVolatilityType::Regular,\n            Asset::Btc,\n        );\n        assert_ok!(\u0026actual);\n        let actual = actual.unwrap();\n        let actual: f64 = actual.lossy_into();\n        let expected = 0.04163212889;\n        assert_abs_diff_eq!(actual, expected, epsilon = 1e-8);\n    });\n}\n\n#[test]\nfn calc_vol_eos_regular_regular() {\n    new_test_ext().execute_with(|| {\n        let actual = \u003cFinancialModule as Financial\u003e::calc_vol(\n            CalcReturnType::Regular,\n            CalcVolatilityType::Regular,\n            Asset::Eos,\n        );\n        assert_ok!(\u0026actual);\n        let actual = actual.unwrap();\n        let actual: f64 = actual.lossy_into();\n        let expected = 0.0380004985;\n        assert_abs_diff_eq!(actual, expected, epsilon = 1e-8);\n    });\n}\n\n#[test]\nfn calc_vol_btc_log_regular() {\n    new_test_ext().execute_with(|| {\n        let actual = \u003cFinancialModule as Financial\u003e::calc_vol(\n            CalcReturnType::Log,\n            CalcVolatilityType::Regular,\n            Asset::Btc,\n        );\n        assert_ok!(\u0026actual);\n        let actual = actual.unwrap();\n        let actual: f64 = actual.lossy_into();\n        let expected = 0.03932894975;\n        assert_abs_diff_eq!(actual, expected, epsilon = 1e-8);\n    });\n}\n\n#[test]\nfn calc_vol_eos_log_regular() {\n    new_test_ext().execute_with(|| {\n        let actual = \u003cFinancialModule as Financial\u003e::calc_vol(\n            CalcReturnType::Log,\n            CalcVolatilityType::Regular,\n            Asset::Eos,\n        );\n        assert_ok!(\u0026actual);\n        let actual = actual.unwrap();\n        let actual: f64 = actual.lossy_into();\n        let expected = 0.03764429688;\n        assert_abs_diff_eq!(actual, expected, epsilon = 1e-8);\n    });\n}\n\n#[test]\nfn calc_vol_btc_regular_exp() {\n    new_test_ext().execute_with(|| {\n        let actual = \u003cFinancialModule as Financial\u003e::calc_vol(\n            CalcReturnType::Regular,\n            CalcVolatilityType::Exponential(36),\n            Asset::Btc,\n        );\n        assert_ok!(\u0026actual);\n        let actual = actual.unwrap();\n        let actual: f64 = actual.lossy_into();\n        let expected = 0.03831575756631;\n        assert_abs_diff_eq!(actual, expected, epsilon = 1e-8);\n    });\n}\n\n#[test]\nfn calc_vol_btc_log_exp() {\n    new_test_ext().execute_with(|| {\n        let actual = \u003cFinancialModule as Financial\u003e::calc_vol(\n            CalcReturnType::Log,\n            CalcVolatilityType::Exponential(36),\n            Asset::Btc,\n        );\n        assert_ok!(\u0026actual);\n        let actual = actual.unwrap();\n        let actual: f64 = actual.lossy_into();\n        let expected = 0.0441615768954867;\n        assert_abs_diff_eq!(actual, expected, epsilon = 1e-8);\n    });\n}\n\n#[test]\nfn calc_corr_btc_eos_regular_regular() {\n    new_test_ext().execute_with(|| {\n        let actual = \u003cFinancialModule as Financial\u003e::calc_corr(\n            CalcReturnType::Regular,\n            CalcCorrelationType::Regular,\n            Asset::Btc,\n            Asset::Eos,\n        );\n        assert_ok!(\u0026actual);\n        let (actual, _) = actual.unwrap();\n        let actual: f64 = actual.lossy_into();\n        let expected = 0.8836901525;\n        assert_abs_diff_eq!(actual, expected, epsilon = 1e-8);\n    });\n}\n\n#[test]\nfn calc_corr_btc_eos_log_regular() {\n    new_test_ext().execute_with(|| {\n        let actual = \u003cFinancialModule as Financial\u003e::calc_corr(\n            CalcReturnType::Log,\n            CalcCorrelationType::Regular,\n            Asset::Btc,\n            Asset::Eos,\n        );\n        assert_ok!(\u0026actual);\n        let (actual, _) = actual.unwrap();\n        let actual: f64 = actual.lossy_into();\n        let expected = 0.87585873751;\n        assert_abs_diff_eq!(actual, expected, epsilon = 1e-8);\n    });\n}\n\n#[test]\nfn calc_corr_btc_eos_regular_exp() {\n    new_test_ext().execute_with(|| {\n        let actual = \u003cFinancialModule as Financial\u003e::calc_corr(\n            CalcReturnType::Regular,\n            CalcCorrelationType::Exponential(36),\n            Asset::Btc,\n            Asset::Eos,\n        );\n        assert_ok!(\u0026actual);\n        let (actual, _) = actual.unwrap();\n        let actual: f64 = actual.lossy_into();\n        let expected = 0.397556703834140;\n        assert_abs_diff_eq!(actual, expected, epsilon = 1e-8);\n    });\n}\n\n#[test]\nfn calc_corr_btc_eos_log_exponential() {\n    new_test_ext().execute_with(|| {\n        let actual = \u003cFinancialModule as Financial\u003e::calc_corr(\n            CalcReturnType::Log,\n            CalcCorrelationType::Exponential(36),\n            Asset::Btc,\n            Asset::Eos,\n        );\n        assert_ok!(\u0026actual);\n        let (actual, _) = actual.unwrap();\n        let actual: f64 = actual.lossy_into();\n        let expected = 0.402717043042457;\n        assert_abs_diff_eq!(actual, expected, epsilon = 1e-8);\n    });\n}\n","traces":[{"line":30,"address":[5540000],"length":1,"stats":{"Line":1},"fn_name":"create_duration"},{"line":38,"address":[5540031],"length":1,"stats":{"Line":1},"fn_name":null},{"line":42,"address":[5540152],"length":1,"stats":{"Line":1},"fn_name":null},{"line":51,"address":[4970400],"length":1,"stats":{"Line":3},"fn_name":"info_for_neighbour_periods"},{"line":52,"address":[4970410],"length":1,"stats":{"Line":1},"fn_name":null},{"line":53,"address":[4970471],"length":1,"stats":{"Line":1},"fn_name":null},{"line":56,"address":[4970526],"length":1,"stats":{"Line":1},"fn_name":null},{"line":58,"address":[4970537],"length":1,"stats":{"Line":1},"fn_name":null},{"line":59,"address":[4970582],"length":1,"stats":{"Line":1},"fn_name":null},{"line":61,"address":[4970817,4970713],"length":1,"stats":{"Line":1},"fn_name":null},{"line":65,"address":[4971104],"length":1,"stats":{"Line":3},"fn_name":"info_for_distant_periods"},{"line":66,"address":[4971114],"length":1,"stats":{"Line":1},"fn_name":null},{"line":67,"address":[4971175],"length":1,"stats":{"Line":1},"fn_name":null},{"line":70,"address":[4971230],"length":1,"stats":{"Line":1},"fn_name":null},{"line":72,"address":[4971241],"length":1,"stats":{"Line":1},"fn_name":null},{"line":73,"address":[4971286],"length":1,"stats":{"Line":1},"fn_name":null},{"line":75,"address":[4971417,4971521],"length":1,"stats":{"Line":1},"fn_name":null},{"line":79,"address":[4971808],"length":1,"stats":{"Line":3},"fn_name":"invalid_period_start"},{"line":80,"address":[4971818],"length":1,"stats":{"Line":1},"fn_name":null},{"line":81,"address":[4971876],"length":1,"stats":{"Line":1},"fn_name":null},{"line":84,"address":[4971931],"length":1,"stats":{"Line":1},"fn_name":null},{"line":86,"address":[4971944],"length":1,"stats":{"Line":1},"fn_name":null},{"line":87,"address":[4972014],"length":1,"stats":{"Line":1},"fn_name":null},{"line":89,"address":[4972148,4972044],"length":1,"stats":{"Line":1},"fn_name":null},{"line":93,"address":[4972448],"length":1,"stats":{"Line":3},"fn_name":"period_remains_unchanged"},{"line":94,"address":[4972457],"length":1,"stats":{"Line":1},"fn_name":null},{"line":95,"address":[4972515],"length":1,"stats":{"Line":1},"fn_name":null},{"line":98,"address":[4972570],"length":1,"stats":{"Line":1},"fn_name":null},{"line":100,"address":[4972583],"length":1,"stats":{"Line":1},"fn_name":null},{"line":101,"address":[4972672],"length":1,"stats":{"Line":1},"fn_name":null},{"line":103,"address":[4972656],"length":1,"stats":{"Line":1},"fn_name":null},{"line":106,"address":[4972775,4972879],"length":1,"stats":{"Line":1},"fn_name":null},{"line":110,"address":[4973168],"length":1,"stats":{"Line":3},"fn_name":"period_changed_slightly"},{"line":111,"address":[4973177],"length":1,"stats":{"Line":1},"fn_name":null},{"line":112,"address":[4973238],"length":1,"stats":{"Line":1},"fn_name":null},{"line":115,"address":[4973293],"length":1,"stats":{"Line":1},"fn_name":null},{"line":117,"address":[4973312],"length":1,"stats":{"Line":1},"fn_name":null},{"line":118,"address":[4973457],"length":1,"stats":{"Line":1},"fn_name":null},{"line":119,"address":[4973390],"length":1,"stats":{"Line":1},"fn_name":null},{"line":120,"address":[4973430],"length":1,"stats":{"Line":1},"fn_name":null},{"line":123,"address":[4973664,4973560],"length":1,"stats":{"Line":1},"fn_name":null},{"line":127,"address":[4973952],"length":1,"stats":{"Line":3},"fn_name":"period_changed_significantly"},{"line":128,"address":[4973961],"length":1,"stats":{"Line":1},"fn_name":null},{"line":129,"address":[4974022],"length":1,"stats":{"Line":1},"fn_name":null},{"line":132,"address":[4974077],"length":1,"stats":{"Line":1},"fn_name":null},{"line":134,"address":[4974096],"length":1,"stats":{"Line":1},"fn_name":null},{"line":135,"address":[4974241],"length":1,"stats":{"Line":1},"fn_name":null},{"line":136,"address":[4974174],"length":1,"stats":{"Line":1},"fn_name":null},{"line":137,"address":[4974214],"length":1,"stats":{"Line":1},"fn_name":null},{"line":140,"address":[4974344,4974448],"length":1,"stats":{"Line":1},"fn_name":null},{"line":144,"address":[4974736],"length":1,"stats":{"Line":3},"fn_name":"period_is_in_the_past"},{"line":145,"address":[4974745],"length":1,"stats":{"Line":1},"fn_name":null},{"line":146,"address":[4974800],"length":1,"stats":{"Line":1},"fn_name":null},{"line":149,"address":[4974861],"length":1,"stats":{"Line":1},"fn_name":null},{"line":151,"address":[4974874],"length":1,"stats":{"Line":1},"fn_name":null},{"line":152,"address":[4974944],"length":1,"stats":{"Line":1},"fn_name":null},{"line":154,"address":[4975078,4974974],"length":1,"stats":{"Line":1},"fn_name":null},{"line":158,"address":[4975376],"length":1,"stats":{"Line":3},"fn_name":"zero_period"},{"line":159,"address":[4975385],"length":1,"stats":{"Line":1},"fn_name":null},{"line":160,"address":[4975443],"length":1,"stats":{"Line":1},"fn_name":null},{"line":163,"address":[4975498],"length":1,"stats":{"Line":1},"fn_name":null},{"line":165,"address":[4975511],"length":1,"stats":{"Line":1},"fn_name":null},{"line":166,"address":[4975581],"length":1,"stats":{"Line":1},"fn_name":null},{"line":168,"address":[4975715,4975611],"length":1,"stats":{"Line":1},"fn_name":null},{"line":172,"address":[4976000],"length":1,"stats":{"Line":3},"fn_name":"elapsed_period_count_is_too_large"},{"line":173,"address":[4976009],"length":1,"stats":{"Line":1},"fn_name":null},{"line":174,"address":[4976064],"length":1,"stats":{"Line":1},"fn_name":null},{"line":177,"address":[4976100],"length":1,"stats":{"Line":1},"fn_name":null},{"line":179,"address":[4976113],"length":1,"stats":{"Line":1},"fn_name":null},{"line":180,"address":[4976183],"length":1,"stats":{"Line":1},"fn_name":null},{"line":182,"address":[4976213,4976317],"length":1,"stats":{"Line":1},"fn_name":null},{"line":191,"address":[4237232,4237281],"length":1,"stats":{"Line":3},"fn_name":"no_last_price_no_empty_periods"},{"line":192,"address":[4237242],"length":1,"stats":{"Line":1},"fn_name":null},{"line":193,"address":[4237357,4237301],"length":1,"stats":{"Line":2},"fn_name":null},{"line":195,"address":[4237394,4237525],"length":1,"stats":{"Line":1},"fn_name":null},{"line":199,"address":[4237888,4237940],"length":1,"stats":{"Line":3},"fn_name":"no_last_price_some_empty_periods"},{"line":200,"address":[4237895],"length":1,"stats":{"Line":1},"fn_name":null},{"line":201,"address":[4238016,4237960],"length":1,"stats":{"Line":2},"fn_name":null},{"line":203,"address":[4238184,4238053],"length":1,"stats":{"Line":1},"fn_name":null},{"line":207,"address":[4238560,4238617],"length":1,"stats":{"Line":3},"fn_name":"some_last_price_no_empty_periods"},{"line":208,"address":[4238570],"length":1,"stats":{"Line":1},"fn_name":null},{"line":209,"address":[4238693,4238637],"length":1,"stats":{"Line":2},"fn_name":null},{"line":211,"address":[4238730,4238861],"length":1,"stats":{"Line":1},"fn_name":null},{"line":215,"address":[4239292,4239232],"length":1,"stats":{"Line":3},"fn_name":"some_last_price_some_empty_periods_less_than_max"},{"line":216,"address":[4239239],"length":1,"stats":{"Line":1},"fn_name":null},{"line":217,"address":[4239317,4239396],"length":1,"stats":{"Line":2},"fn_name":null},{"line":219,"address":[4239564,4239433],"length":1,"stats":{"Line":1},"fn_name":null},{"line":223,"address":[4239936,4239996],"length":1,"stats":{"Line":3},"fn_name":"some_last_price_some_empty_periods_equal_to_max"},{"line":224,"address":[4239943],"length":1,"stats":{"Line":1},"fn_name":null},{"line":225,"address":[4240099,4240021],"length":1,"stats":{"Line":2},"fn_name":null},{"line":227,"address":[4240267,4240136],"length":1,"stats":{"Line":1},"fn_name":null},{"line":231,"address":[4240640,4240699],"length":1,"stats":{"Line":3},"fn_name":"some_last_price_some_empty_periods_slightly_more_than_max"},{"line":232,"address":[4240647],"length":1,"stats":{"Line":1},"fn_name":null},{"line":233,"address":[4240724,4240802],"length":1,"stats":{"Line":2},"fn_name":null},{"line":235,"address":[4240839,4240970],"length":1,"stats":{"Line":1},"fn_name":null},{"line":239,"address":[4241404,4241344],"length":1,"stats":{"Line":3},"fn_name":"some_last_price_some_empty_periods_significantly_more_than_max"},{"line":240,"address":[4241351],"length":1,"stats":{"Line":1},"fn_name":null},{"line":241,"address":[4241429,4241507],"length":1,"stats":{"Line":2},"fn_name":null},{"line":243,"address":[4241675,4241544],"length":1,"stats":{"Line":1},"fn_name":null},{"line":247,"address":[4242048,4242105],"length":1,"stats":{"Line":3},"fn_name":"max_periods_is_zero"},{"line":248,"address":[4242058],"length":1,"stats":{"Line":1},"fn_name":null},{"line":249,"address":[4242120],"length":1,"stats":{"Line":1},"fn_name":null},{"line":251,"address":[4242134,4242268],"length":1,"stats":{"Line":1},"fn_name":null},{"line":255,"address":[4242640,4242700],"length":1,"stats":{"Line":3},"fn_name":"max_periods_is_one"},{"line":256,"address":[4242647],"length":1,"stats":{"Line":1},"fn_name":null},{"line":257,"address":[4242720,4242776],"length":1,"stats":{"Line":2},"fn_name":null},{"line":259,"address":[4242944,4242813],"length":1,"stats":{"Line":1},"fn_name":null},{"line":264,"address":[5480640,5480645],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":265,"address":[5480812,5480720],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":266,"address":[5480732],"length":1,"stats":{"Line":1},"fn_name":null},{"line":267,"address":[5480756,5480834],"length":1,"stats":{"Line":2},"fn_name":null},{"line":270,"address":[5480672,5480691],"length":1,"stats":{"Line":2},"fn_name":"{{closure}}"},{"line":271,"address":[5480921],"length":1,"stats":{"Line":1},"fn_name":null},{"line":272,"address":[5481111,5480939],"length":1,"stats":{"Line":2},"fn_name":null},{"line":284,"address":[5481371,5481119],"length":1,"stats":{"Line":1},"fn_name":null},{"line":285,"address":[5481740,5481954,5482228,5483142,5481305,5481989],"length":1,"stats":{"Line":4},"fn_name":null},{"line":286,"address":[5482233,5482071],"length":1,"stats":{"Line":1},"fn_name":null},{"line":292,"address":[5483269,5483264],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":293,"address":[5483436,5483344],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":294,"address":[5483356],"length":1,"stats":{"Line":1},"fn_name":null},{"line":295,"address":[5483458,5483380],"length":1,"stats":{"Line":2},"fn_name":null},{"line":298,"address":[5483296,5483315],"length":1,"stats":{"Line":2},"fn_name":"{{closure}}"},{"line":299,"address":[5483545],"length":1,"stats":{"Line":1},"fn_name":null},{"line":300,"address":[5483563,5483735],"length":1,"stats":{"Line":2},"fn_name":null},{"line":312,"address":[5483743,5483995],"length":1,"stats":{"Line":1},"fn_name":null},{"line":313,"address":[5484613,5484578,5484852,5483929,5485766,5484364],"length":1,"stats":{"Line":4},"fn_name":null},{"line":314,"address":[5484695,5484857],"length":1,"stats":{"Line":1},"fn_name":null},{"line":320,"address":[5485888,5485893],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":321,"address":[5486060,5485968],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":322,"address":[5485980],"length":1,"stats":{"Line":1},"fn_name":null},{"line":323,"address":[5486082,5486004],"length":1,"stats":{"Line":2},"fn_name":null},{"line":326,"address":[5485920,5485939],"length":1,"stats":{"Line":2},"fn_name":"{{closure}}"},{"line":327,"address":[5486169],"length":1,"stats":{"Line":1},"fn_name":null},{"line":328,"address":[5486187,5486353],"length":1,"stats":{"Line":2},"fn_name":null},{"line":340,"address":[5486361,5486613],"length":1,"stats":{"Line":1},"fn_name":null},{"line":341,"address":[5488384,5487196,5486982,5487231,5486547,5487470],"length":1,"stats":{"Line":4},"fn_name":null},{"line":342,"address":[5487313,5487475],"length":1,"stats":{"Line":1},"fn_name":null},{"line":348,"address":[5488496,5488501],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":349,"address":[5488668,5488576],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":350,"address":[5488588],"length":1,"stats":{"Line":1},"fn_name":null},{"line":351,"address":[5488690,5488612],"length":1,"stats":{"Line":2},"fn_name":null},{"line":354,"address":[5488547,5488528],"length":1,"stats":{"Line":2},"fn_name":"{{closure}}"},{"line":355,"address":[5488777],"length":1,"stats":{"Line":1},"fn_name":null},{"line":356,"address":[5488961,5488795],"length":1,"stats":{"Line":2},"fn_name":null},{"line":368,"address":[5489221,5488969],"length":1,"stats":{"Line":1},"fn_name":null},{"line":369,"address":[5490078,5489804,5490992,5489590,5489155,5489839],"length":1,"stats":{"Line":4},"fn_name":null},{"line":370,"address":[5490083,5489921],"length":1,"stats":{"Line":1},"fn_name":null},{"line":376,"address":[5491104,5491109],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":377,"address":[5491184,5491320],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":378,"address":[5491196,5491335],"length":1,"stats":{"Line":2},"fn_name":null},{"line":381,"address":[5491398],"length":1,"stats":{"Line":1},"fn_name":null},{"line":383,"address":[5491435],"length":1,"stats":{"Line":1},"fn_name":null},{"line":384,"address":[5491487],"length":1,"stats":{"Line":1},"fn_name":null},{"line":386,"address":[5491799,5491509,5491724,5492367],"length":1,"stats":{"Line":3},"fn_name":null},{"line":387,"address":[5491865],"length":1,"stats":{"Line":1},"fn_name":null},{"line":389,"address":[5491903],"length":1,"stats":{"Line":1},"fn_name":null},{"line":391,"address":[5492199],"length":1,"stats":{"Line":1},"fn_name":null},{"line":392,"address":[5492345],"length":1,"stats":{"Line":1},"fn_name":null},{"line":396,"address":[5492372],"length":1,"stats":{"Line":1},"fn_name":null},{"line":399,"address":[5491155,5491136],"length":1,"stats":{"Line":2},"fn_name":"{{closure}}"},{"line":400,"address":[5492518],"length":1,"stats":{"Line":1},"fn_name":null},{"line":401,"address":[5492536,5492708],"length":1,"stats":{"Line":2},"fn_name":null},{"line":413,"address":[5492716,5492968],"length":1,"stats":{"Line":1},"fn_name":null},{"line":414,"address":[5492902,5493586,5493825,5493551,5494793,5493337],"length":1,"stats":{"Line":4},"fn_name":null},{"line":415,"address":[5493668,5493830],"length":1,"stats":{"Line":1},"fn_name":null},{"line":421,"address":[5494960,5494965],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":422,"address":[5494992,5495024],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":423,"address":[5495001],"length":1,"stats":{"Line":1},"fn_name":null},{"line":425,"address":[5495009],"length":1,"stats":{"Line":1},"fn_name":null},{"line":426,"address":[5495039],"length":1,"stats":{"Line":1},"fn_name":null},{"line":428,"address":[5495051],"length":1,"stats":{"Line":1},"fn_name":null},{"line":429,"address":[5495076,5495153],"length":1,"stats":{"Line":2},"fn_name":null},{"line":430,"address":[5495168],"length":1,"stats":{"Line":1},"fn_name":null},{"line":432,"address":[5495175],"length":1,"stats":{"Line":1},"fn_name":null},{"line":433,"address":[5495257,5495213],"length":1,"stats":{"Line":2},"fn_name":null},{"line":434,"address":[5495264],"length":1,"stats":{"Line":1},"fn_name":null},{"line":436,"address":[5495283,5495400,5495509],"length":1,"stats":{"Line":2},"fn_name":null},{"line":437,"address":[5495414,5495876,5495989],"length":1,"stats":{"Line":2},"fn_name":null},{"line":438,"address":[5495882,5496319],"length":1,"stats":{"Line":1},"fn_name":null},{"line":443,"address":[5496789,5496784],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":444,"address":[5496816,5496848],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":445,"address":[5496825],"length":1,"stats":{"Line":1},"fn_name":null},{"line":447,"address":[5496833],"length":1,"stats":{"Line":1},"fn_name":null},{"line":448,"address":[5496863],"length":1,"stats":{"Line":1},"fn_name":null},{"line":450,"address":[5496875],"length":1,"stats":{"Line":1},"fn_name":null},{"line":451,"address":[5496977,5496900],"length":1,"stats":{"Line":2},"fn_name":null},{"line":452,"address":[5497053,5496992],"length":1,"stats":{"Line":2},"fn_name":null},{"line":457,"address":[5497083],"length":1,"stats":{"Line":1},"fn_name":null},{"line":458,"address":[5497106,5497150],"length":1,"stats":{"Line":2},"fn_name":null},{"line":459,"address":[5497193,5497157],"length":1,"stats":{"Line":2},"fn_name":null},{"line":461,"address":[5497416,5497208],"length":1,"stats":{"Line":1},"fn_name":null},{"line":462,"address":[5497783,5497896,5497321],"length":1,"stats":{"Line":2},"fn_name":null},{"line":463,"address":[5497789,5498226],"length":1,"stats":{"Line":1},"fn_name":null},{"line":468,"address":[5498693,5498688],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":469,"address":[5498720,5498785],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":470,"address":[5498727],"length":1,"stats":{"Line":1},"fn_name":null},{"line":472,"address":[5498740],"length":1,"stats":{"Line":1},"fn_name":null},{"line":474,"address":[5498802],"length":1,"stats":{"Line":1},"fn_name":null},{"line":475,"address":[5498866],"length":1,"stats":{"Line":1},"fn_name":null},{"line":476,"address":[5498942],"length":1,"stats":{"Line":1},"fn_name":null},{"line":478,"address":[5498947],"length":1,"stats":{"Line":1},"fn_name":null},{"line":480,"address":[5499254],"length":1,"stats":{"Line":1},"fn_name":null},{"line":481,"address":[5499279],"length":1,"stats":{"Line":1},"fn_name":null},{"line":483,"address":[5499395],"length":1,"stats":{"Line":1},"fn_name":null},{"line":484,"address":[5499504,5499424],"length":1,"stats":{"Line":2},"fn_name":null},{"line":485,"address":[5499521],"length":1,"stats":{"Line":1},"fn_name":null},{"line":487,"address":[5499587],"length":1,"stats":{"Line":1},"fn_name":null},{"line":488,"address":[5499659,5499623],"length":1,"stats":{"Line":2},"fn_name":null},{"line":490,"address":[5499674,5499882],"length":1,"stats":{"Line":1},"fn_name":null},{"line":491,"address":[5500362,5500249,5499787],"length":1,"stats":{"Line":2},"fn_name":null},{"line":492,"address":[5500255,5500698],"length":1,"stats":{"Line":1},"fn_name":null},{"line":497,"address":[5501125,5501120],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":498,"address":[5501217,5501152],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":499,"address":[5501159],"length":1,"stats":{"Line":1},"fn_name":null},{"line":501,"address":[5501172],"length":1,"stats":{"Line":1},"fn_name":null},{"line":503,"address":[5501234],"length":1,"stats":{"Line":1},"fn_name":null},{"line":504,"address":[5501298],"length":1,"stats":{"Line":1},"fn_name":null},{"line":505,"address":[5501374],"length":1,"stats":{"Line":1},"fn_name":null},{"line":507,"address":[5501379],"length":1,"stats":{"Line":1},"fn_name":null},{"line":509,"address":[5501691],"length":1,"stats":{"Line":1},"fn_name":null},{"line":510,"address":[5501736],"length":1,"stats":{"Line":1},"fn_name":null},{"line":511,"address":[5501812],"length":1,"stats":{"Line":1},"fn_name":null},{"line":513,"address":[5501817],"length":1,"stats":{"Line":1},"fn_name":null},{"line":515,"address":[5501861],"length":1,"stats":{"Line":1},"fn_name":null},{"line":516,"address":[5501938,5502079],"length":1,"stats":{"Line":1},"fn_name":null},{"line":518,"address":[5502049],"length":1,"stats":{"Line":1},"fn_name":null},{"line":519,"address":[5502414],"length":1,"stats":{"Line":1},"fn_name":null},{"line":521,"address":[5502530],"length":1,"stats":{"Line":1},"fn_name":null},{"line":522,"address":[5502559,5502639],"length":1,"stats":{"Line":2},"fn_name":null},{"line":523,"address":[5502656],"length":1,"stats":{"Line":1},"fn_name":null},{"line":525,"address":[5502722],"length":1,"stats":{"Line":1},"fn_name":null},{"line":526,"address":[5502794,5502758],"length":1,"stats":{"Line":2},"fn_name":null},{"line":528,"address":[5503017,5502809],"length":1,"stats":{"Line":1},"fn_name":null},{"line":529,"address":[5502922,5503384,5503497],"length":1,"stats":{"Line":2},"fn_name":null},{"line":530,"address":[5503833,5503390],"length":1,"stats":{"Line":1},"fn_name":null},{"line":535,"address":[5504261,5504256],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":536,"address":[5504353,5504288],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":537,"address":[5504295],"length":1,"stats":{"Line":1},"fn_name":null},{"line":539,"address":[5504308],"length":1,"stats":{"Line":1},"fn_name":null},{"line":541,"address":[5504370],"length":1,"stats":{"Line":1},"fn_name":null},{"line":542,"address":[5504434],"length":1,"stats":{"Line":1},"fn_name":null},{"line":543,"address":[5504510],"length":1,"stats":{"Line":1},"fn_name":null},{"line":545,"address":[5504515],"length":1,"stats":{"Line":1},"fn_name":null},{"line":547,"address":[5504827],"length":1,"stats":{"Line":1},"fn_name":null},{"line":548,"address":[5504873],"length":1,"stats":{"Line":1},"fn_name":null},{"line":549,"address":[5504949],"length":1,"stats":{"Line":1},"fn_name":null},{"line":551,"address":[5504961],"length":1,"stats":{"Line":1},"fn_name":null},{"line":552,"address":[5504954],"length":1,"stats":{"Line":1},"fn_name":null},{"line":556,"address":[5505261],"length":1,"stats":{"Line":1},"fn_name":null},{"line":557,"address":[5505286],"length":1,"stats":{"Line":1},"fn_name":null},{"line":563,"address":[5505402],"length":1,"stats":{"Line":1},"fn_name":null},{"line":564,"address":[5505511,5505431],"length":1,"stats":{"Line":2},"fn_name":null},{"line":565,"address":[5505528],"length":1,"stats":{"Line":1},"fn_name":null},{"line":567,"address":[5505594],"length":1,"stats":{"Line":1},"fn_name":null},{"line":568,"address":[5505630,5505666],"length":1,"stats":{"Line":2},"fn_name":null},{"line":570,"address":[5505889,5505681],"length":1,"stats":{"Line":1},"fn_name":null},{"line":571,"address":[5505794,5506256,5506369],"length":1,"stats":{"Line":2},"fn_name":null},{"line":572,"address":[5506705,5506262],"length":1,"stats":{"Line":1},"fn_name":null},{"line":577,"address":[5507141,5507136],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":578,"address":[5507168,5507233],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":579,"address":[5507175],"length":1,"stats":{"Line":1},"fn_name":null},{"line":581,"address":[5507188],"length":1,"stats":{"Line":1},"fn_name":null},{"line":583,"address":[5507251],"length":1,"stats":{"Line":1},"fn_name":null},{"line":584,"address":[5507327],"length":1,"stats":{"Line":1},"fn_name":null},{"line":586,"address":[5507332],"length":1,"stats":{"Line":1},"fn_name":null},{"line":588,"address":[5507641],"length":1,"stats":{"Line":1},"fn_name":null},{"line":589,"address":[5507707],"length":1,"stats":{"Line":1},"fn_name":null},{"line":590,"address":[5507753],"length":1,"stats":{"Line":1},"fn_name":null},{"line":591,"address":[5507829],"length":1,"stats":{"Line":1},"fn_name":null},{"line":593,"address":[5507841],"length":1,"stats":{"Line":1},"fn_name":null},{"line":594,"address":[5507834],"length":1,"stats":{"Line":1},"fn_name":null},{"line":598,"address":[5508141],"length":1,"stats":{"Line":1},"fn_name":null},{"line":599,"address":[5508166],"length":1,"stats":{"Line":1},"fn_name":null},{"line":605,"address":[5508282],"length":1,"stats":{"Line":1},"fn_name":null},{"line":606,"address":[5508311,5508391],"length":1,"stats":{"Line":2},"fn_name":null},{"line":607,"address":[5508408],"length":1,"stats":{"Line":1},"fn_name":null},{"line":609,"address":[5508501],"length":1,"stats":{"Line":1},"fn_name":null},{"line":610,"address":[5508537,5508573],"length":1,"stats":{"Line":2},"fn_name":null},{"line":612,"address":[5508588,5508796],"length":1,"stats":{"Line":1},"fn_name":null},{"line":613,"address":[5508701,5509163,5509276],"length":1,"stats":{"Line":2},"fn_name":null},{"line":614,"address":[5509612,5509169],"length":1,"stats":{"Line":1},"fn_name":null},{"line":619,"address":[5510032,5510037],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":620,"address":[5510064,5510129],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":621,"address":[5510071],"length":1,"stats":{"Line":1},"fn_name":null},{"line":623,"address":[5510084],"length":1,"stats":{"Line":1},"fn_name":null},{"line":625,"address":[5510147],"length":1,"stats":{"Line":1},"fn_name":null},{"line":626,"address":[5510223],"length":1,"stats":{"Line":1},"fn_name":null},{"line":628,"address":[5510228],"length":1,"stats":{"Line":1},"fn_name":null},{"line":630,"address":[5510537],"length":1,"stats":{"Line":1},"fn_name":null},{"line":631,"address":[5510603],"length":1,"stats":{"Line":1},"fn_name":null},{"line":632,"address":[5510649],"length":1,"stats":{"Line":1},"fn_name":null},{"line":633,"address":[5510725],"length":1,"stats":{"Line":1},"fn_name":null},{"line":635,"address":[5510737],"length":1,"stats":{"Line":1},"fn_name":null},{"line":636,"address":[5510730],"length":1,"stats":{"Line":1},"fn_name":null},{"line":640,"address":[5511037],"length":1,"stats":{"Line":1},"fn_name":null},{"line":641,"address":[5511062],"length":1,"stats":{"Line":1},"fn_name":null},{"line":647,"address":[5511178],"length":1,"stats":{"Line":1},"fn_name":null},{"line":648,"address":[5511207,5511287],"length":1,"stats":{"Line":2},"fn_name":null},{"line":649,"address":[5511304],"length":1,"stats":{"Line":1},"fn_name":null},{"line":651,"address":[5511421],"length":1,"stats":{"Line":1},"fn_name":null},{"line":652,"address":[5511457,5511493],"length":1,"stats":{"Line":2},"fn_name":null},{"line":654,"address":[5511716,5511508],"length":1,"stats":{"Line":1},"fn_name":null},{"line":655,"address":[5512196,5511621,5512083],"length":1,"stats":{"Line":2},"fn_name":null},{"line":656,"address":[5512089,5512532],"length":1,"stats":{"Line":1},"fn_name":null},{"line":661,"address":[5512960,5512965],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":662,"address":[5512992,5513057],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":663,"address":[5512999],"length":1,"stats":{"Line":1},"fn_name":null},{"line":665,"address":[5513012],"length":1,"stats":{"Line":1},"fn_name":null},{"line":667,"address":[5513075],"length":1,"stats":{"Line":1},"fn_name":null},{"line":668,"address":[5513151],"length":1,"stats":{"Line":1},"fn_name":null},{"line":670,"address":[5513156],"length":1,"stats":{"Line":1},"fn_name":null},{"line":672,"address":[5513465],"length":1,"stats":{"Line":1},"fn_name":null},{"line":673,"address":[5513531],"length":1,"stats":{"Line":1},"fn_name":null},{"line":674,"address":[5513577],"length":1,"stats":{"Line":1},"fn_name":null},{"line":675,"address":[5513653],"length":1,"stats":{"Line":1},"fn_name":null},{"line":677,"address":[5513665],"length":1,"stats":{"Line":1},"fn_name":null},{"line":678,"address":[5513658],"length":1,"stats":{"Line":1},"fn_name":null},{"line":682,"address":[5513965],"length":1,"stats":{"Line":1},"fn_name":null},{"line":683,"address":[5513990],"length":1,"stats":{"Line":1},"fn_name":null},{"line":689,"address":[5514106],"length":1,"stats":{"Line":1},"fn_name":null},{"line":690,"address":[5514135,5514215],"length":1,"stats":{"Line":2},"fn_name":null},{"line":691,"address":[5515868,5514325,5514222],"length":1,"stats":{"Line":2},"fn_name":null},{"line":692,"address":[5514356],"length":1,"stats":{"Line":1},"fn_name":null},{"line":694,"address":[5514407,5514363],"length":1,"stats":{"Line":2},"fn_name":null},{"line":695,"address":[5514414],"length":1,"stats":{"Line":1},"fn_name":null},{"line":697,"address":[5514658,5514450],"length":1,"stats":{"Line":1},"fn_name":null},{"line":698,"address":[5514563,5515138,5515025],"length":1,"stats":{"Line":2},"fn_name":null},{"line":699,"address":[5515474,5515031],"length":1,"stats":{"Line":1},"fn_name":null},{"line":704,"address":[5515920,5515925],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":705,"address":[5515952,5516017],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":706,"address":[5515959],"length":1,"stats":{"Line":1},"fn_name":null},{"line":708,"address":[5515972],"length":1,"stats":{"Line":1},"fn_name":null},{"line":710,"address":[5516034],"length":1,"stats":{"Line":1},"fn_name":null},{"line":711,"address":[5516098],"length":1,"stats":{"Line":1},"fn_name":null},{"line":712,"address":[5516174],"length":1,"stats":{"Line":1},"fn_name":null},{"line":714,"address":[5516179],"length":1,"stats":{"Line":1},"fn_name":null},{"line":716,"address":[5516491],"length":1,"stats":{"Line":1},"fn_name":null},{"line":717,"address":[5516534],"length":1,"stats":{"Line":1},"fn_name":null},{"line":718,"address":[5516591],"length":1,"stats":{"Line":1},"fn_name":null},{"line":720,"address":[5516596],"length":1,"stats":{"Line":1},"fn_name":null},{"line":721,"address":[5516640],"length":1,"stats":{"Line":1},"fn_name":null},{"line":722,"address":[5516858,5516717],"length":1,"stats":{"Line":1},"fn_name":null},{"line":724,"address":[5516828],"length":1,"stats":{"Line":1},"fn_name":null},{"line":725,"address":[5517193],"length":1,"stats":{"Line":1},"fn_name":null},{"line":727,"address":[5517309],"length":1,"stats":{"Line":1},"fn_name":null},{"line":728,"address":[5517338,5517418],"length":1,"stats":{"Line":2},"fn_name":null},{"line":729,"address":[5517435],"length":1,"stats":{"Line":1},"fn_name":null},{"line":731,"address":[5517501],"length":1,"stats":{"Line":1},"fn_name":null},{"line":732,"address":[5517537,5517573],"length":1,"stats":{"Line":2},"fn_name":null},{"line":734,"address":[5517588,5517796],"length":1,"stats":{"Line":1},"fn_name":null},{"line":735,"address":[5517701,5518163,5518276],"length":1,"stats":{"Line":2},"fn_name":null},{"line":736,"address":[5518169,5518612],"length":1,"stats":{"Line":1},"fn_name":null},{"line":741,"address":[5519040,5519045],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":742,"address":[5519197,5519072],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":743,"address":[5519079],"length":1,"stats":{"Line":1},"fn_name":null},{"line":745,"address":[5519087,5519212],"length":1,"stats":{"Line":2},"fn_name":null},{"line":750,"address":[5519304],"length":1,"stats":{"Line":1},"fn_name":null},{"line":751,"address":[5519356],"length":1,"stats":{"Line":1},"fn_name":null},{"line":753,"address":[5519654,5520200,5519404],"length":1,"stats":{"Line":2},"fn_name":null},{"line":754,"address":[5519703],"length":1,"stats":{"Line":1},"fn_name":null},{"line":756,"address":[5519736],"length":1,"stats":{"Line":1},"fn_name":null},{"line":758,"address":[5520032],"length":1,"stats":{"Line":1},"fn_name":null},{"line":759,"address":[5520178],"length":1,"stats":{"Line":1},"fn_name":null},{"line":762,"address":[5519623,5520228],"length":1,"stats":{"Line":2},"fn_name":null},{"line":763,"address":[5520270],"length":1,"stats":{"Line":1},"fn_name":null},{"line":765,"address":[5520341],"length":1,"stats":{"Line":1},"fn_name":null},{"line":766,"address":[5520325],"length":1,"stats":{"Line":1},"fn_name":null},{"line":770,"address":[5520600],"length":1,"stats":{"Line":1},"fn_name":null},{"line":771,"address":[5520623],"length":1,"stats":{"Line":1},"fn_name":null},{"line":773,"address":[5520758],"length":1,"stats":{"Line":1},"fn_name":null},{"line":774,"address":[5520781,5520861],"length":1,"stats":{"Line":2},"fn_name":null},{"line":775,"address":[5520868,5520999],"length":1,"stats":{"Line":2},"fn_name":null},{"line":776,"address":[5521077],"length":1,"stats":{"Line":1},"fn_name":null},{"line":778,"address":[5521084,5521131],"length":1,"stats":{"Line":2},"fn_name":null},{"line":779,"address":[5521138],"length":1,"stats":{"Line":1},"fn_name":null},{"line":781,"address":[5521382,5521174],"length":1,"stats":{"Line":1},"fn_name":null},{"line":782,"address":[5521287,5521749,5521862],"length":1,"stats":{"Line":2},"fn_name":null},{"line":783,"address":[5521755,5522198],"length":1,"stats":{"Line":1},"fn_name":null},{"line":787,"address":[5540192],"length":1,"stats":{"Line":1},"fn_name":"btc_prices"},{"line":788,"address":[5540202],"length":1,"stats":{"Line":1},"fn_name":null},{"line":800,"address":[5522656,5522661],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":801,"address":[5543020],"length":1,"stats":{"Line":1},"fn_name":null},{"line":802,"address":[5543028],"length":1,"stats":{"Line":1},"fn_name":null},{"line":803,"address":[5543039],"length":1,"stats":{"Line":1},"fn_name":null},{"line":805,"address":[5543069],"length":1,"stats":{"Line":1},"fn_name":null},{"line":806,"address":[5543220],"length":1,"stats":{"Line":1},"fn_name":null},{"line":807,"address":[5543506],"length":1,"stats":{"Line":1},"fn_name":null},{"line":809,"address":[5543636],"length":1,"stats":{"Line":1},"fn_name":null},{"line":811,"address":[5543827,5543652],"length":1,"stats":{"Line":1},"fn_name":null},{"line":815,"address":[5522693,5522688],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":816,"address":[5544700],"length":1,"stats":{"Line":1},"fn_name":null},{"line":817,"address":[5544708],"length":1,"stats":{"Line":1},"fn_name":null},{"line":818,"address":[5544719],"length":1,"stats":{"Line":1},"fn_name":null},{"line":820,"address":[5544749],"length":1,"stats":{"Line":1},"fn_name":null},{"line":821,"address":[5544900],"length":1,"stats":{"Line":1},"fn_name":null},{"line":822,"address":[5545186],"length":1,"stats":{"Line":1},"fn_name":null},{"line":824,"address":[5545316],"length":1,"stats":{"Line":1},"fn_name":null},{"line":826,"address":[5545332,5545507],"length":1,"stats":{"Line":1},"fn_name":null},{"line":829,"address":[5540944],"length":1,"stats":{"Line":1},"fn_name":"eos_prices"},{"line":830,"address":[5540954],"length":1,"stats":{"Line":1},"fn_name":null},{"line":840,"address":[5522725,5522720],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":841,"address":[5546380],"length":1,"stats":{"Line":1},"fn_name":null},{"line":842,"address":[5546388],"length":1,"stats":{"Line":1},"fn_name":null},{"line":843,"address":[5546399],"length":1,"stats":{"Line":1},"fn_name":null},{"line":845,"address":[5546429],"length":1,"stats":{"Line":1},"fn_name":null},{"line":846,"address":[5546580],"length":1,"stats":{"Line":1},"fn_name":null},{"line":847,"address":[5546866],"length":1,"stats":{"Line":1},"fn_name":null},{"line":849,"address":[5546996],"length":1,"stats":{"Line":1},"fn_name":null},{"line":851,"address":[5547187,5547012],"length":1,"stats":{"Line":1},"fn_name":null},{"line":855,"address":[5522757,5522752],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":856,"address":[5548060],"length":1,"stats":{"Line":1},"fn_name":null},{"line":857,"address":[5548068],"length":1,"stats":{"Line":1},"fn_name":null},{"line":858,"address":[5548079],"length":1,"stats":{"Line":1},"fn_name":null},{"line":860,"address":[5548109],"length":1,"stats":{"Line":1},"fn_name":null},{"line":861,"address":[5548260],"length":1,"stats":{"Line":1},"fn_name":null},{"line":862,"address":[5548546],"length":1,"stats":{"Line":1},"fn_name":null},{"line":864,"address":[5548676],"length":1,"stats":{"Line":1},"fn_name":null},{"line":866,"address":[5548867,5548692],"length":1,"stats":{"Line":1},"fn_name":null},{"line":870,"address":[5522784,5522789],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":871,"address":[5549740],"length":1,"stats":{"Line":1},"fn_name":null},{"line":872,"address":[5549748],"length":1,"stats":{"Line":1},"fn_name":null},{"line":873,"address":[5549759],"length":1,"stats":{"Line":1},"fn_name":null},{"line":874,"address":[5549797],"length":1,"stats":{"Line":1},"fn_name":null},{"line":876,"address":[5549932,5549970,5549804],"length":1,"stats":{"Line":3},"fn_name":null},{"line":877,"address":[5550087],"length":1,"stats":{"Line":1},"fn_name":null},{"line":878,"address":[5550373],"length":1,"stats":{"Line":1},"fn_name":null},{"line":880,"address":[5550503],"length":1,"stats":{"Line":1},"fn_name":null},{"line":882,"address":[5550519,5550694],"length":1,"stats":{"Line":1},"fn_name":null},{"line":886,"address":[5522816,5522821],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":887,"address":[5551596],"length":1,"stats":{"Line":1},"fn_name":null},{"line":888,"address":[5551604],"length":1,"stats":{"Line":1},"fn_name":null},{"line":889,"address":[5551626],"length":1,"stats":{"Line":1},"fn_name":null},{"line":891,"address":[5551656],"length":1,"stats":{"Line":1},"fn_name":null},{"line":892,"address":[5551807],"length":1,"stats":{"Line":1},"fn_name":null},{"line":893,"address":[5552093],"length":1,"stats":{"Line":1},"fn_name":null},{"line":895,"address":[5552223],"length":1,"stats":{"Line":1},"fn_name":null},{"line":897,"address":[5552239,5552414],"length":1,"stats":{"Line":1},"fn_name":null},{"line":901,"address":[5522848,5522853],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":902,"address":[5553292],"length":1,"stats":{"Line":1},"fn_name":null},{"line":903,"address":[5553300],"length":1,"stats":{"Line":1},"fn_name":null},{"line":904,"address":[5553322],"length":1,"stats":{"Line":1},"fn_name":null},{"line":906,"address":[5553352],"length":1,"stats":{"Line":1},"fn_name":null},{"line":907,"address":[5553503],"length":1,"stats":{"Line":1},"fn_name":null},{"line":908,"address":[5553789],"length":1,"stats":{"Line":1},"fn_name":null},{"line":910,"address":[5553919],"length":1,"stats":{"Line":1},"fn_name":null},{"line":912,"address":[5554110,5553935],"length":1,"stats":{"Line":1},"fn_name":null},{"line":916,"address":[5522880,5522885],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":917,"address":[5554988],"length":1,"stats":{"Line":1},"fn_name":null},{"line":918,"address":[5554996],"length":1,"stats":{"Line":1},"fn_name":null},{"line":919,"address":[5555018],"length":1,"stats":{"Line":1},"fn_name":null},{"line":920,"address":[5555056],"length":1,"stats":{"Line":1},"fn_name":null},{"line":922,"address":[5555229,5555063,5555191],"length":1,"stats":{"Line":3},"fn_name":null},{"line":923,"address":[5555346],"length":1,"stats":{"Line":1},"fn_name":null},{"line":924,"address":[5555632],"length":1,"stats":{"Line":1},"fn_name":null},{"line":926,"address":[5555762],"length":1,"stats":{"Line":1},"fn_name":null},{"line":928,"address":[5555953,5555778],"length":1,"stats":{"Line":1},"fn_name":null},{"line":932,"address":[5522912,5522917],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":933,"address":[5523025,5522944],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":934,"address":[5522951,5523040],"length":1,"stats":{"Line":2},"fn_name":null},{"line":937,"address":[5523103],"length":1,"stats":{"Line":1},"fn_name":null},{"line":939,"address":[5523140],"length":1,"stats":{"Line":1},"fn_name":null},{"line":940,"address":[5523192],"length":1,"stats":{"Line":1},"fn_name":null},{"line":942,"address":[5524072,5523214,5523504,5523429],"length":1,"stats":{"Line":3},"fn_name":null},{"line":943,"address":[5523570],"length":1,"stats":{"Line":1},"fn_name":null},{"line":945,"address":[5523608],"length":1,"stats":{"Line":1},"fn_name":null},{"line":947,"address":[5523904],"length":1,"stats":{"Line":1},"fn_name":null},{"line":948,"address":[5524050],"length":1,"stats":{"Line":1},"fn_name":null},{"line":951,"address":[5524112],"length":1,"stats":{"Line":1},"fn_name":null},{"line":952,"address":[5524077],"length":1,"stats":{"Line":1},"fn_name":null},{"line":953,"address":[5524085],"length":1,"stats":{"Line":1},"fn_name":null},{"line":954,"address":[5524096],"length":1,"stats":{"Line":1},"fn_name":null},{"line":955,"address":[5524104],"length":1,"stats":{"Line":1},"fn_name":null},{"line":957,"address":[5524167],"length":1,"stats":{"Line":1},"fn_name":null},{"line":958,"address":[5524414],"length":1,"stats":{"Line":1},"fn_name":null},{"line":959,"address":[5524665],"length":1,"stats":{"Line":1},"fn_name":null},{"line":960,"address":[5524562],"length":1,"stats":{"Line":1},"fn_name":null},{"line":961,"address":[5524633],"length":1,"stats":{"Line":1},"fn_name":null},{"line":964,"address":[5524716,5524822],"length":1,"stats":{"Line":1},"fn_name":null},{"line":969,"address":[5525221,5525216],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":970,"address":[5525248],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":971,"address":[5525289],"length":1,"stats":{"Line":1},"fn_name":null},{"line":972,"address":[5525262],"length":1,"stats":{"Line":1},"fn_name":null},{"line":973,"address":[5525270],"length":1,"stats":{"Line":1},"fn_name":null},{"line":974,"address":[5525281],"length":1,"stats":{"Line":1},"fn_name":null},{"line":976,"address":[5525363],"length":1,"stats":{"Line":1},"fn_name":null},{"line":977,"address":[5525624],"length":1,"stats":{"Line":1},"fn_name":null},{"line":978,"address":[5525730],"length":1,"stats":{"Line":1},"fn_name":null},{"line":979,"address":[5525752],"length":1,"stats":{"Line":1},"fn_name":null},{"line":980,"address":[5525761,5525942],"length":1,"stats":{"Line":1},"fn_name":null},{"line":985,"address":[5526581,5526576],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":986,"address":[5526608],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":987,"address":[5526649],"length":1,"stats":{"Line":1},"fn_name":null},{"line":988,"address":[5526622],"length":1,"stats":{"Line":1},"fn_name":null},{"line":989,"address":[5526630],"length":1,"stats":{"Line":1},"fn_name":null},{"line":990,"address":[5526641],"length":1,"stats":{"Line":1},"fn_name":null},{"line":992,"address":[5526723],"length":1,"stats":{"Line":1},"fn_name":null},{"line":993,"address":[5526984],"length":1,"stats":{"Line":1},"fn_name":null},{"line":994,"address":[5527090],"length":1,"stats":{"Line":1},"fn_name":null},{"line":995,"address":[5527112],"length":1,"stats":{"Line":1},"fn_name":null},{"line":996,"address":[5527121,5527302],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1001,"address":[5527936,5527941],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":1002,"address":[5527968],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":1003,"address":[5528009],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1004,"address":[5527982],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1005,"address":[5527990],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1006,"address":[5528001],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1008,"address":[5528083],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1009,"address":[5528344],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1010,"address":[5528450],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1011,"address":[5528472],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1012,"address":[5528481,5528662],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1017,"address":[5529301,5529296],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":1018,"address":[5529328],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":1019,"address":[5529369],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1020,"address":[5529342],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1021,"address":[5529350],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1022,"address":[5529361],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1024,"address":[5529443],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1025,"address":[5529704],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1026,"address":[5529810],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1027,"address":[5529832],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1028,"address":[5529841,5530022],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1033,"address":[5530661,5530656],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":1034,"address":[5530688],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":1035,"address":[5530740],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1036,"address":[5530702],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1037,"address":[5530710],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1038,"address":[5530732],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1040,"address":[5530814],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1041,"address":[5531075],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1042,"address":[5531181],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1043,"address":[5531203],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1044,"address":[5531212,5531393],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1049,"address":[5532032,5532037],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":1050,"address":[5532064],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":1051,"address":[5532116],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1052,"address":[5532078],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1053,"address":[5532086],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1054,"address":[5532108],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1056,"address":[5532190],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1057,"address":[5532451],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1058,"address":[5532557],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1059,"address":[5532579],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1060,"address":[5532588,5532769],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1065,"address":[5533408,5533413],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":1066,"address":[5533440],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":1067,"address":[5533489],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1068,"address":[5533454],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1069,"address":[5533462],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1070,"address":[5533473],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1071,"address":[5533481],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1073,"address":[5533598],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1074,"address":[5533866],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1075,"address":[5533975],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1076,"address":[5534003],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1077,"address":[5534012,5534193],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1082,"address":[5534816,5534821],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":1083,"address":[5534848],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":1084,"address":[5534897],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1085,"address":[5534862],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1086,"address":[5534870],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1087,"address":[5534881],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1088,"address":[5534889],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1090,"address":[5535006],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1091,"address":[5535274],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1092,"address":[5535383],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1093,"address":[5535411],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1094,"address":[5535420,5535601],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1099,"address":[5536224,5536229],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":1100,"address":[5536256],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":1101,"address":[5536316],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1102,"address":[5536270],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1103,"address":[5536278],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1104,"address":[5536300],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1105,"address":[5536308],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1107,"address":[5536425],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1108,"address":[5536693],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1109,"address":[5536802],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1110,"address":[5536830],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1111,"address":[5536839,5537020],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1116,"address":[5537648,5537653],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":1117,"address":[5537680],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":1118,"address":[5537740],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1119,"address":[5537694],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1120,"address":[5537702],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1121,"address":[5537724],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1122,"address":[5537732],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1124,"address":[5537849],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1125,"address":[5538117],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1126,"address":[5538226],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1127,"address":[5538254],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1128,"address":[5538263,5538444],"length":1,"stats":{"Line":1},"fn_name":null}],"covered":592,"coverable":592},{"path":["/","home","rotor","work","src","polka","equilibrium-financial-pallet","pallets","oracle","src","lib.rs"],"content":"#![cfg_attr(not(feature = \"std\"), no_std)]\n\nuse financial_primitives::OnPriceSet;\nuse frame_support::codec::Codec;\nuse frame_support::dispatch::Parameter;\nuse frame_support::{decl_error, decl_event, decl_module, decl_storage, dispatch, traits::Get};\nuse frame_system::ensure_signed;\n\n#[cfg(test)]\nmod mock;\n\n#[cfg(test)]\nmod tests;\n\npub trait Trait: frame_system::Trait {\n    type Event: From\u003cEvent\u003cSelf\u003e\u003e + Into\u003c\u003cSelf as frame_system::Trait\u003e::Event\u003e;\n    type Asset: Codec + Parameter + Default + Copy;\n    type Price: Codec + Parameter + Default + Copy;\n    type OnPriceSet: OnPriceSet\u003cPrice = Self::Price, Asset = Self::Asset\u003e;\n}\n\ndecl_storage! {\n    trait Store for Module\u003cT: Trait\u003e as OracleModule {\n        PricePoints get(fn price_points): map hasher(identity) T::Asset =\u003e T::Price;\n    }\n    add_extra_genesis {\n        config(prices): Vec\u003c(T::Asset, T::Price)\u003e;\n\n        build(|config| {\n            for \u0026(asset, value) in config.prices.iter() {\n                PricePoints::\u003cT\u003e::insert(asset, value);\n            }\n        });\n    }\n}\n\ndecl_event!(\n    pub enum Event\u003cT\u003e\n    where\n        AccountId = \u003cT as frame_system::Trait\u003e::AccountId,\n        Asset = \u003cT as Trait\u003e::Asset,\n        Price = \u003cT as Trait\u003e::Price,\n    {\n        PriceSet(Asset, Price, AccountId),\n    }\n);\n\ndecl_error! {\n    pub enum Error for Module\u003cT: Trait\u003e {}\n}\n\ndecl_module! {\n    pub struct Module\u003cT: Trait\u003e for enum Call where origin: T::Origin {\n        type Error = Error\u003cT\u003e;\n\n        fn deposit_event() = default;\n\n        #[weight = 10_000 + T::DbWeight::get().writes(1)]\n        pub fn set_price(origin, asset: T::Asset, value: T::Price) -\u003e dispatch::DispatchResult {\n            let who = ensure_signed(origin)?;\n\n            PricePoints::\u003cT\u003e::insert(asset, value);\n\n            let _ = T::OnPriceSet::on_price_set(asset, value);\n            Self::deposit_event(RawEvent::PriceSet(asset, value, who));\n            Ok(())\n        }\n    }\n}\n","traces":[{"line":22,"address":[67920192,67926417,67929456,67926514,67922474,67922601,67921376,67929480,67920213,67929536,67929543,67926464,67921296,67922464,67926400],"length":1,"stats":{"Line":6},"fn_name":"build_module_genesis_storage\u003cnode_template_runtime::Runtime,oracle::__InherentHiddenInstance\u003e"},{"line":29,"address":[67926544,67926483],"length":1,"stats":{"Line":0},"fn_name":"{{closure}}\u003cnode_template_runtime::Runtime\u003e"},{"line":30,"address":[74527306,74527376,74527378,74527169],"length":1,"stats":{"Line":0},"fn_name":null},{"line":31,"address":[67926742],"length":1,"stats":{"Line":0},"fn_name":null},{"line":44,"address":[5014069,5013449,5013796,5013348,5013899,5013627],"length":1,"stats":{"Line":0},"fn_name":null},{"line":58,"address":[67927825,67927302,67927855],"length":1,"stats":{"Line":0},"fn_name":null},{"line":60,"address":[4312292,4312007,4312138,4312100,4312239],"length":1,"stats":{"Line":3},"fn_name":null},{"line":62,"address":[74525476],"length":1,"stats":{"Line":1},"fn_name":null},{"line":64,"address":[4312373],"length":1,"stats":{"Line":1},"fn_name":null},{"line":65,"address":[4312398],"length":1,"stats":{"Line":1},"fn_name":null},{"line":66,"address":[4312470],"length":1,"stats":{"Line":1},"fn_name":null}],"covered":6,"coverable":11},{"path":["/","home","rotor","work","src","polka","equilibrium-financial-pallet","pallets","oracle","src","mock.rs"],"content":"use crate::{Module, Trait};\nuse common::Asset;\nuse financial_primitives::OnPriceSet;\nuse frame_support::dispatch::DispatchError;\nuse frame_support::{impl_outer_origin, parameter_types, weights::Weight};\nuse frame_system as system;\nuse sp_core::H256;\nuse sp_runtime::{\n    testing::Header,\n    traits::{BlakeTwo256, IdentityLookup},\n    Perbill,\n};\n\nimpl_outer_origin! {\n    pub enum Origin for Test {}\n}\n\n// Configure a mock runtime to test the pallet.\n\n#[derive(Clone, Eq, PartialEq)]\npub struct Test;\nparameter_types! {\n    pub const BlockHashCount: u64 = 250;\n    pub const MaximumBlockWeight: Weight = 1024;\n    pub const MaximumBlockLength: u32 = 2 * 1024;\n    pub const AvailableBlockRatio: Perbill = Perbill::from_percent(75);\n}\n\nimpl system::Trait for Test {\n    type BaseCallFilter = ();\n    type Origin = Origin;\n    type Call = ();\n    type Index = u64;\n    type BlockNumber = u64;\n    type Hash = H256;\n    type Hashing = BlakeTwo256;\n    type AccountId = u64;\n    type Lookup = IdentityLookup\u003cSelf::AccountId\u003e;\n    type Header = Header;\n    type Event = ();\n    type BlockHashCount = BlockHashCount;\n    type MaximumBlockWeight = MaximumBlockWeight;\n    type DbWeight = ();\n    type BlockExecutionWeight = ();\n    type ExtrinsicBaseWeight = ();\n    type MaximumExtrinsicWeight = MaximumBlockWeight;\n    type MaximumBlockLength = MaximumBlockLength;\n    type AvailableBlockRatio = AvailableBlockRatio;\n    type Version = ();\n    type ModuleToIndex = ();\n    type AccountData = ();\n    type OnNewAccount = ();\n    type OnKilledAccount = ();\n    type SystemWeightInfo = ();\n}\n\nimpl Trait for Test {\n    type Event = ();\n    type Asset = Asset;\n    type Price = u32;\n    type OnPriceSet = TestOnPriceSet;\n}\n\npub struct TestOnPriceSet;\n\nimpl OnPriceSet for TestOnPriceSet {\n    type Asset = Asset;\n    type Price = u32;\n    fn on_price_set(_asset: Asset, _value: u32) -\u003e Result\u003c(), DispatchError\u003e {\n        Ok(())\n    }\n}\n\npub type OracleModule = Module\u003cTest\u003e;\n\n// Build genesis storage according to the mock runtime.\npub fn new_test_ext() -\u003e sp_io::TestExternalities {\n    system::GenesisConfig::default()\n        .build_storage::\u003cTest\u003e()\n        .unwrap()\n        .into()\n}\n","traces":[{"line":14,"address":[4932480,4932549],"length":1,"stats":{"Line":0},"fn_name":null},{"line":26,"address":[4679569],"length":1,"stats":{"Line":0},"fn_name":null},{"line":69,"address":[],"length":0,"stats":{"Line":1},"fn_name":null},{"line":70,"address":[],"length":0,"stats":{"Line":1},"fn_name":null},{"line":77,"address":[4676912,4676951],"length":1,"stats":{"Line":1},"fn_name":"new_test_ext"},{"line":78,"address":[4676979,4676922,4677036],"length":1,"stats":{"Line":3},"fn_name":null}],"covered":4,"coverable":6},{"path":["/","home","rotor","work","src","polka","equilibrium-financial-pallet","pallets","oracle","src","tests.rs"],"content":"use crate::mock::*;\nuse common::Asset;\nuse frame_support::assert_ok;\n\n#[test]\nfn set_price_is_visible_through_storage() {\n    new_test_ext().execute_with(|| {\n        assert_ok!(OracleModule::set_price(Origin::signed(1), Asset::Btc, 42));\n        assert_eq!(OracleModule::price_points(Asset::Btc), 42);\n    });\n}\n","traces":[{"line":6,"address":[4718288,4718293],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":7,"address":[4718320],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":8,"address":[4718327],"length":1,"stats":{"Line":1},"fn_name":null},{"line":9,"address":[4718620,4718754],"length":1,"stats":{"Line":1},"fn_name":null}],"covered":4,"coverable":4},{"path":["/","home","rotor","work","src","polka","equilibrium-financial-pallet","runtime","build.rs"],"content":"use wasm_builder_runner::WasmBuilder;\n\nfn main() {\n    WasmBuilder::new()\n        .with_current_project()\n        .with_wasm_builder_from_crates(\"2.0.0\")\n        .export_heap_base()\n        .import_memory()\n        .build()\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","rotor","work","src","polka","equilibrium-financial-pallet","runtime","src","lib.rs"],"content":"#![cfg_attr(not(feature = \"std\"), no_std)]\n// `construct_runtime!` does a lot of recursion and requires us to increase the limit to 256.\n#![recursion_limit = \"256\"]\n\n// Make the WASM binary available.\n#[cfg(feature = \"std\")]\ninclude!(concat!(env!(\"OUT_DIR\"), \"/wasm_binary.rs\"));\n\nuse common::Asset;\nuse pallet_grandpa::fg_primitives;\nuse pallet_grandpa::{AuthorityId as GrandpaId, AuthorityList as GrandpaAuthorityList};\nuse sp_api::impl_runtime_apis;\nuse sp_consensus_aura::sr25519::AuthorityId as AuraId;\nuse sp_core::{crypto::KeyTypeId, OpaqueMetadata};\nuse sp_runtime::traits::{\n    BlakeTwo256, Block as BlockT, IdentifyAccount, IdentityLookup, NumberFor, Saturating, Verify,\n};\nuse sp_runtime::{\n    create_runtime_str, generic, impl_opaque_keys,\n    transaction_validity::{TransactionSource, TransactionValidity},\n    ApplyExtrinsicResult, MultiSignature,\n};\nuse sp_std::prelude::*;\n#[cfg(feature = \"std\")]\nuse sp_version::NativeVersion;\nuse sp_version::RuntimeVersion;\n\n// A few exports that help ease life for downstream crates.\npub use frame_support::{\n    construct_runtime, parameter_types,\n    traits::{KeyOwnerProofSystem, Randomness},\n    weights::{\n        constants::{BlockExecutionWeight, ExtrinsicBaseWeight, RocksDbWeight, WEIGHT_PER_SECOND},\n        IdentityFee, Weight,\n    },\n    StorageValue,\n};\npub use pallet_balances::Call as BalancesCall;\npub use pallet_timestamp::Call as TimestampCall;\n#[cfg(any(feature = \"std\", test))]\npub use sp_runtime::BuildStorage;\npub use sp_runtime::{Perbill, Permill};\n\n/// Import the financial pallet.\npub use financial_pallet;\n\n/// Import the oracle pallet.\npub use oracle;\n\n/// An index to a block.\npub type BlockNumber = u32;\n\n/// Alias to 512-bit hash when used in the context of a transaction signature on the chain.\npub type Signature = MultiSignature;\n\n/// Some way of identifying an account on the chain. We intentionally make it equivalent\n/// to the public key of our transaction signing scheme.\npub type AccountId = \u003c\u003cSignature as Verify\u003e::Signer as IdentifyAccount\u003e::AccountId;\n\n/// The type for looking up accounts. We don't expect more than 4 billion of them, but you\n/// never know...\npub type AccountIndex = u32;\n\n/// Balance of an account.\npub type Balance = u128;\n\n/// Index of a transaction in the chain.\npub type Index = u32;\n\n/// A hash of some data used by the chain.\npub type Hash = sp_core::H256;\n\n/// Digest item type.\npub type DigestItem = generic::DigestItem\u003cHash\u003e;\n\n/// Opaque types. These are used by the CLI to instantiate machinery that don't need to know\n/// the specifics of the runtime. They can then be made to be agnostic over specific formats\n/// of data like extrinsics, allowing for them to continue syncing the network through upgrades\n/// to even the core data structures.\npub mod opaque {\n    use super::*;\n\n    pub use sp_runtime::OpaqueExtrinsic as UncheckedExtrinsic;\n\n    /// Opaque block header type.\n    pub type Header = generic::Header\u003cBlockNumber, BlakeTwo256\u003e;\n    /// Opaque block type.\n    pub type Block = generic::Block\u003cHeader, UncheckedExtrinsic\u003e;\n    /// Opaque block identifier type.\n    pub type BlockId = generic::BlockId\u003cBlock\u003e;\n\n    impl_opaque_keys! {\n        pub struct SessionKeys {\n            pub aura: Aura,\n            pub grandpa: Grandpa,\n        }\n    }\n}\n\npub const VERSION: RuntimeVersion = RuntimeVersion {\n    spec_name: create_runtime_str!(\"node-template\"),\n    impl_name: create_runtime_str!(\"node-template\"),\n    authoring_version: 1,\n    spec_version: 1,\n    impl_version: 1,\n    apis: RUNTIME_API_VERSIONS,\n    transaction_version: 1,\n};\n\npub const MILLISECS_PER_BLOCK: u64 = 6000;\n\npub const SLOT_DURATION: u64 = MILLISECS_PER_BLOCK;\n\n// Time is measured by number of blocks.\npub const MINUTES: BlockNumber = 60_000 / (MILLISECS_PER_BLOCK as BlockNumber);\npub const HOURS: BlockNumber = MINUTES * 60;\npub const DAYS: BlockNumber = HOURS * 24;\n\n/// The version information used to identify this runtime when compiled natively.\n#[cfg(feature = \"std\")]\npub fn native_version() -\u003e NativeVersion {\n    NativeVersion {\n        runtime_version: VERSION,\n        can_author_with: Default::default(),\n    }\n}\n\nparameter_types! {\n    pub const BlockHashCount: BlockNumber = 2400;\n    /// We allow for 2 seconds of compute with a 6 second average block time.\n    pub const MaximumBlockWeight: Weight = 2 * WEIGHT_PER_SECOND;\n    pub const AvailableBlockRatio: Perbill = Perbill::from_percent(75);\n    /// Assume 10% of weight for average on_initialize calls.\n    pub MaximumExtrinsicWeight: Weight = AvailableBlockRatio::get()\n        .saturating_sub(Perbill::from_percent(10)) * MaximumBlockWeight::get();\n    pub const MaximumBlockLength: u32 = 5 * 1024 * 1024;\n    pub const Version: RuntimeVersion = VERSION;\n}\n\n// Configure FRAME pallets to include in runtime.\n\nimpl frame_system::Trait for Runtime {\n    /// The basic call filter to use in dispatchable.\n    type BaseCallFilter = ();\n    /// The identifier used to distinguish between accounts.\n    type AccountId = AccountId;\n    /// The aggregated dispatch type that is available for extrinsics.\n    type Call = Call;\n    /// The lookup mechanism to get account ID from whatever is passed in dispatchers.\n    type Lookup = IdentityLookup\u003cAccountId\u003e;\n    /// The index type for storing how many extrinsics an account has signed.\n    type Index = Index;\n    /// The index type for blocks.\n    type BlockNumber = BlockNumber;\n    /// The type for hashing blocks and tries.\n    type Hash = Hash;\n    /// The hashing algorithm used.\n    type Hashing = BlakeTwo256;\n    /// The header type.\n    type Header = generic::Header\u003cBlockNumber, BlakeTwo256\u003e;\n    /// The ubiquitous event type.\n    type Event = Event;\n    /// The ubiquitous origin type.\n    type Origin = Origin;\n    /// Maximum number of block number to block hash mappings to keep (oldest pruned first).\n    type BlockHashCount = BlockHashCount;\n    /// Maximum weight of each block.\n    type MaximumBlockWeight = MaximumBlockWeight;\n    /// The weight of database operations that the runtime can invoke.\n    type DbWeight = RocksDbWeight;\n    /// The weight of the overhead invoked on the block import process, independent of the\n    /// extrinsics included in that block.\n    type BlockExecutionWeight = BlockExecutionWeight;\n    /// The base weight of any extrinsic processed by the runtime, independent of the\n    /// logic of that extrinsic. (Signature verification, nonce increment, fee, etc...)\n    type ExtrinsicBaseWeight = ExtrinsicBaseWeight;\n    /// The maximum weight that a single extrinsic of `Normal` dispatch class can have,\n    /// idependent of the logic of that extrinsics. (Roughly max block weight - average on\n    /// initialize cost).\n    type MaximumExtrinsicWeight = MaximumExtrinsicWeight;\n    /// Maximum size of all encoded transactions (in bytes) that are allowed in one block.\n    type MaximumBlockLength = MaximumBlockLength;\n    /// Portion of the block weight that is available to all normal transactions.\n    type AvailableBlockRatio = AvailableBlockRatio;\n    /// Version of the runtime.\n    type Version = Version;\n    /// Converts a module to the index of the module in `construct_runtime!`.\n    ///\n    /// This type is being generated by `construct_runtime!`.\n    type ModuleToIndex = ModuleToIndex;\n    /// What to do if a new account is created.\n    type OnNewAccount = ();\n    /// What to do if an account is fully reaped from the system.\n    type OnKilledAccount = ();\n    /// The data to be stored in an account.\n    type AccountData = pallet_balances::AccountData\u003cBalance\u003e;\n    /// Weight information for the extrinsics of this pallet.\n    type SystemWeightInfo = ();\n}\n\nimpl pallet_aura::Trait for Runtime {\n    type AuthorityId = AuraId;\n}\n\nimpl pallet_grandpa::Trait for Runtime {\n    type Event = Event;\n    type Call = Call;\n\n    type KeyOwnerProofSystem = ();\n\n    type KeyOwnerProof =\n        \u003cSelf::KeyOwnerProofSystem as KeyOwnerProofSystem\u003c(KeyTypeId, GrandpaId)\u003e\u003e::Proof;\n\n    type KeyOwnerIdentification = \u003cSelf::KeyOwnerProofSystem as KeyOwnerProofSystem\u003c(\n        KeyTypeId,\n        GrandpaId,\n    )\u003e\u003e::IdentificationTuple;\n\n    type HandleEquivocation = ();\n}\n\nparameter_types! {\n    pub const MinimumPeriod: u64 = SLOT_DURATION / 2;\n}\n\nimpl pallet_timestamp::Trait for Runtime {\n    /// A timestamp: milliseconds since the unix epoch.\n    type Moment = u64;\n    type OnTimestampSet = Aura;\n    type MinimumPeriod = MinimumPeriod;\n    type WeightInfo = ();\n}\n\nparameter_types! {\n    pub const ExistentialDeposit: u128 = 500;\n}\n\nimpl pallet_balances::Trait for Runtime {\n    /// The type for recording an account's balance.\n    type Balance = Balance;\n    /// The ubiquitous event type.\n    type Event = Event;\n    type DustRemoval = ();\n    type ExistentialDeposit = ExistentialDeposit;\n    type AccountStore = System;\n    type WeightInfo = ();\n}\n\nparameter_types! {\n    pub const TransactionByteFee: Balance = 1;\n}\n\nimpl pallet_transaction_payment::Trait for Runtime {\n    type Currency = Balances;\n    type OnTransactionPayment = ();\n    type TransactionByteFee = TransactionByteFee;\n    type WeightToFee = IdentityFee\u003cBalance\u003e;\n    type FeeMultiplierUpdate = ();\n}\n\nimpl pallet_sudo::Trait for Runtime {\n    type Event = Event;\n    type Call = Call;\n}\n\nparameter_types! {\n    pub const PriceCount: u32 = 30;\n    pub const PricePeriod: u32 = 1440;\n}\n\npub type FixedNumber = substrate_fixed::types::I64F64;\n\n/// Configure the pallet financial in pallets/financial.\nimpl financial_pallet::Trait for Runtime {\n    type Event = Event;\n    type UnixTime = pallet_timestamp::Module\u003cRuntime\u003e;\n    type PriceCount = PriceCount;\n    type PricePeriod = PricePeriod;\n    type FixedNumberBits = i128;\n    type FixedNumber = FixedNumber;\n    type Price = FixedNumber;\n    type Asset = Asset;\n}\n\n/// Configure the pallet oracle in pallets/oracle.\nimpl oracle::Trait for Runtime {\n    type Event = Event;\n    type Price = FixedNumber;\n    type OnPriceSet = financial_pallet::Module\u003cRuntime\u003e;\n    type Asset = Asset;\n}\n\n// Create the runtime by composing the FRAME pallets that were previously configured.\nconstruct_runtime!(\n    pub enum Runtime where\n        Block = Block,\n        NodeBlock = opaque::Block,\n        UncheckedExtrinsic = UncheckedExtrinsic\n    {\n        System: frame_system::{Module, Call, Config, Storage, Event\u003cT\u003e},\n        RandomnessCollectiveFlip: pallet_randomness_collective_flip::{Module, Call, Storage},\n        Timestamp: pallet_timestamp::{Module, Call, Storage, Inherent},\n        Aura: pallet_aura::{Module, Config\u003cT\u003e, Inherent},\n        Grandpa: pallet_grandpa::{Module, Call, Storage, Config, Event},\n        Balances: pallet_balances::{Module, Call, Storage, Config\u003cT\u003e, Event\u003cT\u003e},\n        TransactionPayment: pallet_transaction_payment::{Module, Storage},\n        Sudo: pallet_sudo::{Module, Call, Config\u003cT\u003e, Storage, Event\u003cT\u003e},\n\n        Financial: financial_pallet::{Module, Call, Storage, Event\u003cT\u003e, Config\u003cT\u003e},\n        Oracle: oracle::{Module, Call, Storage, Event\u003cT\u003e, Config\u003cT\u003e},\n    }\n);\n\n/// The address format for describing accounts.\npub type Address = AccountId;\n/// Block header type as expected by this runtime.\npub type Header = generic::Header\u003cBlockNumber, BlakeTwo256\u003e;\n/// Block type as expected by this runtime.\npub type Block = generic::Block\u003cHeader, UncheckedExtrinsic\u003e;\n/// A Block signed with a Justification\npub type SignedBlock = generic::SignedBlock\u003cBlock\u003e;\n/// BlockId type as expected by this runtime.\npub type BlockId = generic::BlockId\u003cBlock\u003e;\n/// The SignedExtension to the basic transaction logic.\npub type SignedExtra = (\n    frame_system::CheckSpecVersion\u003cRuntime\u003e,\n    frame_system::CheckTxVersion\u003cRuntime\u003e,\n    frame_system::CheckGenesis\u003cRuntime\u003e,\n    frame_system::CheckEra\u003cRuntime\u003e,\n    frame_system::CheckNonce\u003cRuntime\u003e,\n    frame_system::CheckWeight\u003cRuntime\u003e,\n    pallet_transaction_payment::ChargeTransactionPayment\u003cRuntime\u003e,\n);\n/// Unchecked extrinsic type as expected by this runtime.\npub type UncheckedExtrinsic = generic::UncheckedExtrinsic\u003cAddress, Call, Signature, SignedExtra\u003e;\n/// Extrinsic type that has already been checked.\npub type CheckedExtrinsic = generic::CheckedExtrinsic\u003cAccountId, Call, SignedExtra\u003e;\n/// Executive: handles dispatch to the various modules.\npub type Executive = frame_executive::Executive\u003c\n    Runtime,\n    Block,\n    frame_system::ChainContext\u003cRuntime\u003e,\n    Runtime,\n    AllModules,\n\u003e;\n\nimpl_runtime_apis! {\n    impl sp_api::Core\u003cBlock\u003e for Runtime {\n        fn version() -\u003e RuntimeVersion {\n            VERSION\n        }\n\n        fn execute_block(block: Block) {\n            Executive::execute_block(block)\n        }\n\n        fn initialize_block(header: \u0026\u003cBlock as BlockT\u003e::Header) {\n            Executive::initialize_block(header)\n        }\n    }\n\n    impl sp_api::Metadata\u003cBlock\u003e for Runtime {\n        fn metadata() -\u003e OpaqueMetadata {\n            Runtime::metadata().into()\n        }\n    }\n\n    impl sp_block_builder::BlockBuilder\u003cBlock\u003e for Runtime {\n        fn apply_extrinsic(extrinsic: \u003cBlock as BlockT\u003e::Extrinsic) -\u003e ApplyExtrinsicResult {\n            Executive::apply_extrinsic(extrinsic)\n        }\n\n        fn finalize_block() -\u003e \u003cBlock as BlockT\u003e::Header {\n            Executive::finalize_block()\n        }\n\n        fn inherent_extrinsics(data: sp_inherents::InherentData) -\u003e Vec\u003c\u003cBlock as BlockT\u003e::Extrinsic\u003e {\n            data.create_extrinsics()\n        }\n\n        fn check_inherents(\n            block: Block,\n            data: sp_inherents::InherentData,\n        ) -\u003e sp_inherents::CheckInherentsResult {\n            data.check_extrinsics(\u0026block)\n        }\n\n        fn random_seed() -\u003e \u003cBlock as BlockT\u003e::Hash {\n            RandomnessCollectiveFlip::random_seed()\n        }\n    }\n\n    impl sp_transaction_pool::runtime_api::TaggedTransactionQueue\u003cBlock\u003e for Runtime {\n        fn validate_transaction(\n            source: TransactionSource,\n            tx: \u003cBlock as BlockT\u003e::Extrinsic,\n        ) -\u003e TransactionValidity {\n            Executive::validate_transaction(source, tx)\n        }\n    }\n\n    impl sp_offchain::OffchainWorkerApi\u003cBlock\u003e for Runtime {\n        fn offchain_worker(header: \u0026\u003cBlock as BlockT\u003e::Header) {\n            Executive::offchain_worker(header)\n        }\n    }\n\n    impl sp_consensus_aura::AuraApi\u003cBlock, AuraId\u003e for Runtime {\n        fn slot_duration() -\u003e u64 {\n            Aura::slot_duration()\n        }\n\n        fn authorities() -\u003e Vec\u003cAuraId\u003e {\n            Aura::authorities()\n        }\n    }\n\n    impl sp_session::SessionKeys\u003cBlock\u003e for Runtime {\n        fn generate_session_keys(seed: Option\u003cVec\u003cu8\u003e\u003e) -\u003e Vec\u003cu8\u003e {\n            opaque::SessionKeys::generate(seed)\n        }\n\n        fn decode_session_keys(\n            encoded: Vec\u003cu8\u003e,\n        ) -\u003e Option\u003cVec\u003c(Vec\u003cu8\u003e, KeyTypeId)\u003e\u003e {\n            opaque::SessionKeys::decode_into_raw_public_keys(\u0026encoded)\n        }\n    }\n\n    impl fg_primitives::GrandpaApi\u003cBlock\u003e for Runtime {\n        fn grandpa_authorities() -\u003e GrandpaAuthorityList {\n            Grandpa::grandpa_authorities()\n        }\n\n        fn submit_report_equivocation_unsigned_extrinsic(\n            _equivocation_proof: fg_primitives::EquivocationProof\u003c\n                \u003cBlock as BlockT\u003e::Hash,\n                NumberFor\u003cBlock\u003e,\n            \u003e,\n            _key_owner_proof: fg_primitives::OpaqueKeyOwnershipProof,\n        ) -\u003e Option\u003c()\u003e {\n            None\n        }\n\n        fn generate_key_ownership_proof(\n            _set_id: fg_primitives::SetId,\n            _authority_id: GrandpaId,\n        ) -\u003e Option\u003cfg_primitives::OpaqueKeyOwnershipProof\u003e {\n            // NOTE: this is the only implementation possible since we've\n            // defined our key owner proof type as a bottom type (i.e. a type\n            // with no values).\n            None\n        }\n    }\n\n    impl frame_system_rpc_runtime_api::AccountNonceApi\u003cBlock, AccountId, Index\u003e for Runtime {\n        fn account_nonce(account: AccountId) -\u003e Index {\n            System::account_nonce(account)\n        }\n    }\n\n    impl pallet_transaction_payment_rpc_runtime_api::TransactionPaymentApi\u003cBlock, Balance\u003e for Runtime {\n        fn query_info(\n            uxt: \u003cBlock as BlockT\u003e::Extrinsic,\n            len: u32,\n        ) -\u003e pallet_transaction_payment_rpc_runtime_api::RuntimeDispatchInfo\u003cBalance\u003e {\n            TransactionPayment::query_info(uxt, len)\n        }\n    }\n}\n","traces":[{"line":92,"address":[4834301,4834258,4833941,4833682],"length":1,"stats":{"Line":0},"fn_name":null},{"line":121,"address":[4211184],"length":1,"stats":{"Line":0},"fn_name":"native_version"},{"line":124,"address":[4211191],"length":1,"stats":{"Line":0},"fn_name":null},{"line":132,"address":[4211329],"length":1,"stats":{"Line":1},"fn_name":null},{"line":134,"address":[4211364,4211425,4211396],"length":1,"stats":{"Line":0},"fn_name":null},{"line":135,"address":[4211373,4211406],"length":1,"stats":{"Line":0},"fn_name":null},{"line":137,"address":[4211476],"length":1,"stats":{"Line":0},"fn_name":null},{"line":294,"address":[4213188,4213019,4211781,4212452,4211712,4211664,4211605,4212089,4211584,4211680,4212756],"length":1,"stats":{"Line":4},"fn_name":"fmt"},{"line":300,"address":[4586121,4585977],"length":1,"stats":{"Line":0},"fn_name":null},{"line":301,"address":[4586158,4586556],"length":1,"stats":{"Line":0},"fn_name":null},{"line":302,"address":[4586601,4586710],"length":1,"stats":{"Line":0},"fn_name":null},{"line":304,"address":[4586747,4586972],"length":1,"stats":{"Line":0},"fn_name":null},{"line":305,"address":[4587372,4587009],"length":1,"stats":{"Line":0},"fn_name":null},{"line":307,"address":[4587409,4587754],"length":1,"stats":{"Line":0},"fn_name":null},{"line":309,"address":[4587791,4588117],"length":1,"stats":{"Line":0},"fn_name":null},{"line":310,"address":[4588154,4588367],"length":1,"stats":{"Line":0},"fn_name":null},{"line":347,"address":[4557984,4560384,4557571,4550640,4562343,4565058,4564582,4552602,4563691,4559571,4564187,4566968,4562627,4556563,4554879,4552967,4561849,4563115,4554234,4555641,4556279,4562238,4557051,4561565,4566623,4550695,4563032,4556968,4565824,4565474,4555252,4564599,4559083,4553356,4559488,4558089],"length":1,"stats":{"Line":0},"fn_name":"dispatch"},{"line":349,"address":[4230176],"length":1,"stats":{"Line":0},"fn_name":"version"},{"line":350,"address":[4230180],"length":1,"stats":{"Line":0},"fn_name":null},{"line":353,"address":[4230208],"length":1,"stats":{"Line":0},"fn_name":"execute_block"},{"line":354,"address":[4230215],"length":1,"stats":{"Line":0},"fn_name":null},{"line":357,"address":[4230272],"length":1,"stats":{"Line":0},"fn_name":"initialize_block"},{"line":358,"address":[4230277],"length":1,"stats":{"Line":0},"fn_name":null},{"line":363,"address":[4230288],"length":1,"stats":{"Line":0},"fn_name":"metadata"},{"line":364,"address":[4230295],"length":1,"stats":{"Line":0},"fn_name":null},{"line":369,"address":[4230352],"length":1,"stats":{"Line":0},"fn_name":"apply_extrinsic"},{"line":370,"address":[4230362],"length":1,"stats":{"Line":0},"fn_name":null},{"line":373,"address":[4230432],"length":1,"stats":{"Line":0},"fn_name":"finalize_block"},{"line":374,"address":[4230440],"length":1,"stats":{"Line":0},"fn_name":null},{"line":377,"address":[4230488,4230464],"length":1,"stats":{"Line":0},"fn_name":"inherent_extrinsics"},{"line":378,"address":[4230481],"length":1,"stats":{"Line":0},"fn_name":null},{"line":381,"address":[4230560,4230599],"length":1,"stats":{"Line":0},"fn_name":"check_inherents"},{"line":382,"address":[4557437,4557330],"length":1,"stats":{"Line":0},"fn_name":null},{"line":383,"address":[4557499,4557397],"length":1,"stats":{"Line":0},"fn_name":null},{"line":385,"address":[4230572],"length":1,"stats":{"Line":0},"fn_name":null},{"line":388,"address":[4230704],"length":1,"stats":{"Line":0},"fn_name":"random_seed"},{"line":389,"address":[4230712],"length":1,"stats":{"Line":0},"fn_name":null},{"line":394,"address":[4230736],"length":1,"stats":{"Line":0},"fn_name":"validate_transaction"},{"line":395,"address":[4558904],"length":1,"stats":{"Line":0},"fn_name":null},{"line":396,"address":[4558915],"length":1,"stats":{"Line":0},"fn_name":null},{"line":398,"address":[4230754],"length":1,"stats":{"Line":0},"fn_name":null},{"line":403,"address":[4230848],"length":1,"stats":{"Line":0},"fn_name":"offchain_worker"},{"line":404,"address":[4230853],"length":1,"stats":{"Line":0},"fn_name":null},{"line":409,"address":[4230864],"length":1,"stats":{"Line":0},"fn_name":"slot_duration"},{"line":410,"address":[4230865],"length":1,"stats":{"Line":0},"fn_name":null},{"line":413,"address":[4230880],"length":1,"stats":{"Line":0},"fn_name":"authorities"},{"line":414,"address":[4230888],"length":1,"stats":{"Line":0},"fn_name":null},{"line":419,"address":[4230912],"length":1,"stats":{"Line":0},"fn_name":"generate_session_keys"},{"line":420,"address":[4230919],"length":1,"stats":{"Line":0},"fn_name":null},{"line":423,"address":[4231021,4230976],"length":1,"stats":{"Line":0},"fn_name":"decode_session_keys"},{"line":424,"address":[4562571],"length":1,"stats":{"Line":0},"fn_name":null},{"line":426,"address":[4230983,4231047],"length":1,"stats":{"Line":0},"fn_name":null},{"line":431,"address":[4231104],"length":1,"stats":{"Line":0},"fn_name":"grandpa_authorities"},{"line":432,"address":[4231112],"length":1,"stats":{"Line":0},"fn_name":null},{"line":435,"address":[4231136],"length":1,"stats":{"Line":0},"fn_name":"submit_report_equivocation_unsigned_extrinsic"},{"line":436,"address":[4564077,4563983],"length":1,"stats":{"Line":0},"fn_name":null},{"line":440,"address":[4564123,4564029],"length":1,"stats":{"Line":0},"fn_name":null},{"line":442,"address":[4231140],"length":1,"stats":{"Line":0},"fn_name":null},{"line":445,"address":[4231184],"length":1,"stats":{"Line":0},"fn_name":"generate_key_ownership_proof"},{"line":446,"address":[4564914],"length":1,"stats":{"Line":0},"fn_name":null},{"line":447,"address":[4564930],"length":1,"stats":{"Line":0},"fn_name":null},{"line":452,"address":[4231192],"length":1,"stats":{"Line":0},"fn_name":null},{"line":457,"address":[4231216],"length":1,"stats":{"Line":0},"fn_name":"account_nonce"},{"line":458,"address":[4231220],"length":1,"stats":{"Line":0},"fn_name":null},{"line":463,"address":[4231280],"length":1,"stats":{"Line":0},"fn_name":"query_info"},{"line":464,"address":[4566475,4566546],"length":1,"stats":{"Line":0},"fn_name":null},{"line":465,"address":[4566530],"length":1,"stats":{"Line":0},"fn_name":null},{"line":467,"address":[4231297],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":2,"coverable":68}]};
        var previousData = null;
    </script>
    <script crossorigin>/** @license React v16.13.1
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
'use strict';(function(d,r){"object"===typeof exports&&"undefined"!==typeof module?r(exports):"function"===typeof define&&define.amd?define(["exports"],r):(d=d||self,r(d.React={}))})(this,function(d){function r(a){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)b+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}
function w(a,b,c){this.props=a;this.context=b;this.refs=ba;this.updater=c||ca}function da(){}function L(a,b,c){this.props=a;this.context=b;this.refs=ba;this.updater=c||ca}function ea(a,b,c){var g,e={},fa=null,d=null;if(null!=b)for(g in void 0!==b.ref&&(d=b.ref),void 0!==b.key&&(fa=""+b.key),b)ha.call(b,g)&&!ia.hasOwnProperty(g)&&(e[g]=b[g]);var h=arguments.length-2;if(1===h)e.children=c;else if(1<h){for(var k=Array(h),f=0;f<h;f++)k[f]=arguments[f+2];e.children=k}if(a&&a.defaultProps)for(g in h=a.defaultProps,
h)void 0===e[g]&&(e[g]=h[g]);return{$$typeof:x,type:a,key:fa,ref:d,props:e,_owner:M.current}}function va(a,b){return{$$typeof:x,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function N(a){return"object"===typeof a&&null!==a&&a.$$typeof===x}function wa(a){var b={"=":"=0",":":"=2"};return"$"+(""+a).replace(/[=:]/g,function(a){return b[a]})}function ja(a,b,c,g){if(C.length){var e=C.pop();e.result=a;e.keyPrefix=b;e.func=c;e.context=g;e.count=0;return e}return{result:a,keyPrefix:b,func:c,
context:g,count:0}}function ka(a){a.result=null;a.keyPrefix=null;a.func=null;a.context=null;a.count=0;10>C.length&&C.push(a)}function O(a,b,c,g){var e=typeof a;if("undefined"===e||"boolean"===e)a=null;var d=!1;if(null===a)d=!0;else switch(e){case "string":case "number":d=!0;break;case "object":switch(a.$$typeof){case x:case xa:d=!0}}if(d)return c(g,a,""===b?"."+P(a,0):b),1;d=0;b=""===b?".":b+":";if(Array.isArray(a))for(var f=0;f<a.length;f++){e=a[f];var h=b+P(e,f);d+=O(e,h,c,g)}else if(null===a||
"object"!==typeof a?h=null:(h=la&&a[la]||a["@@iterator"],h="function"===typeof h?h:null),"function"===typeof h)for(a=h.call(a),f=0;!(e=a.next()).done;)e=e.value,h=b+P(e,f++),d+=O(e,h,c,g);else if("object"===e)throw c=""+a,Error(r(31,"[object Object]"===c?"object with keys {"+Object.keys(a).join(", ")+"}":c,""));return d}function Q(a,b,c){return null==a?0:O(a,"",b,c)}function P(a,b){return"object"===typeof a&&null!==a&&null!=a.key?wa(a.key):b.toString(36)}function ya(a,b,c){a.func.call(a.context,b,
a.count++)}function za(a,b,c){var g=a.result,e=a.keyPrefix;a=a.func.call(a.context,b,a.count++);Array.isArray(a)?R(a,g,c,function(a){return a}):null!=a&&(N(a)&&(a=va(a,e+(!a.key||b&&b.key===a.key?"":(""+a.key).replace(ma,"$&/")+"/")+c)),g.push(a))}function R(a,b,c,g,e){var d="";null!=c&&(d=(""+c).replace(ma,"$&/")+"/");b=ja(b,d,g,e);Q(a,za,b);ka(b)}function t(){var a=na.current;if(null===a)throw Error(r(321));return a}function S(a,b){var c=a.length;a.push(b);a:for(;;){var g=c-1>>>1,e=a[g];if(void 0!==
e&&0<D(e,b))a[g]=b,a[c]=e,c=g;else break a}}function n(a){a=a[0];return void 0===a?null:a}function E(a){var b=a[0];if(void 0!==b){var c=a.pop();if(c!==b){a[0]=c;a:for(var g=0,e=a.length;g<e;){var d=2*(g+1)-1,f=a[d],h=d+1,k=a[h];if(void 0!==f&&0>D(f,c))void 0!==k&&0>D(k,f)?(a[g]=k,a[h]=c,g=h):(a[g]=f,a[d]=c,g=d);else if(void 0!==k&&0>D(k,c))a[g]=k,a[h]=c,g=h;else break a}}return b}return null}function D(a,b){var c=a.sortIndex-b.sortIndex;return 0!==c?c:a.id-b.id}function F(a){for(var b=n(u);null!==
b;){if(null===b.callback)E(u);else if(b.startTime<=a)E(u),b.sortIndex=b.expirationTime,S(p,b);else break;b=n(u)}}function T(a){y=!1;F(a);if(!v)if(null!==n(p))v=!0,z(U);else{var b=n(u);null!==b&&G(T,b.startTime-a)}}function U(a,b){v=!1;y&&(y=!1,V());H=!0;var c=m;try{F(b);for(l=n(p);null!==l&&(!(l.expirationTime>b)||a&&!W());){var g=l.callback;if(null!==g){l.callback=null;m=l.priorityLevel;var e=g(l.expirationTime<=b);b=q();"function"===typeof e?l.callback=e:l===n(p)&&E(p);F(b)}else E(p);l=n(p)}if(null!==
l)var d=!0;else{var f=n(u);null!==f&&G(T,f.startTime-b);d=!1}return d}finally{l=null,m=c,H=!1}}function oa(a){switch(a){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1E4;default:return 5E3}}var f="function"===typeof Symbol&&Symbol.for,x=f?Symbol.for("react.element"):60103,xa=f?Symbol.for("react.portal"):60106,Aa=f?Symbol.for("react.fragment"):60107,Ba=f?Symbol.for("react.strict_mode"):60108,Ca=f?Symbol.for("react.profiler"):60114,Da=f?Symbol.for("react.provider"):60109,
Ea=f?Symbol.for("react.context"):60110,Fa=f?Symbol.for("react.forward_ref"):60112,Ga=f?Symbol.for("react.suspense"):60113,Ha=f?Symbol.for("react.memo"):60115,Ia=f?Symbol.for("react.lazy"):60116,la="function"===typeof Symbol&&Symbol.iterator,pa=Object.getOwnPropertySymbols,Ja=Object.prototype.hasOwnProperty,Ka=Object.prototype.propertyIsEnumerable,I=function(){try{if(!Object.assign)return!1;var a=new String("abc");a[5]="de";if("5"===Object.getOwnPropertyNames(a)[0])return!1;var b={};for(a=0;10>a;a++)b["_"+
String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(b).map(function(a){return b[a]}).join(""))return!1;var c={};"abcdefghijklmnopqrst".split("").forEach(function(a){c[a]=a});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},c)).join("")?!1:!0}catch(g){return!1}}()?Object.assign:function(a,b){if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");var c=Object(a);for(var g,e=1;e<arguments.length;e++){var d=Object(arguments[e]);
for(var f in d)Ja.call(d,f)&&(c[f]=d[f]);if(pa){g=pa(d);for(var h=0;h<g.length;h++)Ka.call(d,g[h])&&(c[g[h]]=d[g[h]])}}return c},ca={isMounted:function(a){return!1},enqueueForceUpdate:function(a,b,c){},enqueueReplaceState:function(a,b,c,d){},enqueueSetState:function(a,b,c,d){}},ba={};w.prototype.isReactComponent={};w.prototype.setState=function(a,b){if("object"!==typeof a&&"function"!==typeof a&&null!=a)throw Error(r(85));this.updater.enqueueSetState(this,a,b,"setState")};w.prototype.forceUpdate=
function(a){this.updater.enqueueForceUpdate(this,a,"forceUpdate")};da.prototype=w.prototype;f=L.prototype=new da;f.constructor=L;I(f,w.prototype);f.isPureReactComponent=!0;var M={current:null},ha=Object.prototype.hasOwnProperty,ia={key:!0,ref:!0,__self:!0,__source:!0},ma=/\/+/g,C=[],na={current:null},X;if("undefined"===typeof window||"function"!==typeof MessageChannel){var A=null,qa=null,ra=function(){if(null!==A)try{var a=q();A(!0,a);A=null}catch(b){throw setTimeout(ra,0),b;}},La=Date.now();var q=
function(){return Date.now()-La};var z=function(a){null!==A?setTimeout(z,0,a):(A=a,setTimeout(ra,0))};var G=function(a,b){qa=setTimeout(a,b)};var V=function(){clearTimeout(qa)};var W=function(){return!1};f=X=function(){}}else{var Y=window.performance,sa=window.Date,Ma=window.setTimeout,Na=window.clearTimeout;"undefined"!==typeof console&&(f=window.cancelAnimationFrame,"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),
"function"!==typeof f&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));if("object"===typeof Y&&"function"===typeof Y.now)q=function(){return Y.now()};else{var Oa=sa.now();q=function(){return sa.now()-Oa}}var J=!1,K=null,Z=-1,ta=5,ua=0;W=function(){return q()>=ua};f=function(){};X=function(a){0>a||125<a?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):
ta=0<a?Math.floor(1E3/a):5};var B=new MessageChannel,aa=B.port2;B.port1.onmessage=function(){if(null!==K){var a=q();ua=a+ta;try{K(!0,a)?aa.postMessage(null):(J=!1,K=null)}catch(b){throw aa.postMessage(null),b;}}else J=!1};z=function(a){K=a;J||(J=!0,aa.postMessage(null))};G=function(a,b){Z=Ma(function(){a(q())},b)};V=function(){Na(Z);Z=-1}}var p=[],u=[],Pa=1,l=null,m=3,H=!1,v=!1,y=!1,Qa=0;B={ReactCurrentDispatcher:na,ReactCurrentOwner:M,IsSomeRendererActing:{current:!1},assign:I};I(B,{Scheduler:{__proto__:null,
unstable_ImmediatePriority:1,unstable_UserBlockingPriority:2,unstable_NormalPriority:3,unstable_IdlePriority:5,unstable_LowPriority:4,unstable_runWithPriority:function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=m;m=a;try{return b()}finally{m=c}},unstable_next:function(a){switch(m){case 1:case 2:case 3:var b=3;break;default:b=m}var c=m;m=b;try{return a()}finally{m=c}},unstable_scheduleCallback:function(a,b,c){var d=q();if("object"===typeof c&&null!==c){var e=c.delay;
e="number"===typeof e&&0<e?d+e:d;c="number"===typeof c.timeout?c.timeout:oa(a)}else c=oa(a),e=d;c=e+c;a={id:Pa++,callback:b,priorityLevel:a,startTime:e,expirationTime:c,sortIndex:-1};e>d?(a.sortIndex=e,S(u,a),null===n(p)&&a===n(u)&&(y?V():y=!0,G(T,e-d))):(a.sortIndex=c,S(p,a),v||H||(v=!0,z(U)));return a},unstable_cancelCallback:function(a){a.callback=null},unstable_wrapCallback:function(a){var b=m;return function(){var c=m;m=b;try{return a.apply(this,arguments)}finally{m=c}}},unstable_getCurrentPriorityLevel:function(){return m},
unstable_shouldYield:function(){var a=q();F(a);var b=n(p);return b!==l&&null!==l&&null!==b&&null!==b.callback&&b.startTime<=a&&b.expirationTime<l.expirationTime||W()},unstable_requestPaint:f,unstable_continueExecution:function(){v||H||(v=!0,z(U))},unstable_pauseExecution:function(){},unstable_getFirstCallbackNode:function(){return n(p)},get unstable_now(){return q},get unstable_forceFrameRate(){return X},unstable_Profiling:null},SchedulerTracing:{__proto__:null,__interactionsRef:null,__subscriberRef:null,
unstable_clear:function(a){return a()},unstable_getCurrent:function(){return null},unstable_getThreadID:function(){return++Qa},unstable_trace:function(a,b,c){return c()},unstable_wrap:function(a){return a},unstable_subscribe:function(a){},unstable_unsubscribe:function(a){}}});d.Children={map:function(a,b,c){if(null==a)return a;var d=[];R(a,d,null,b,c);return d},forEach:function(a,b,c){if(null==a)return a;b=ja(null,null,b,c);Q(a,ya,b);ka(b)},count:function(a){return Q(a,function(){return null},null)},
toArray:function(a){var b=[];R(a,b,null,function(a){return a});return b},only:function(a){if(!N(a))throw Error(r(143));return a}};d.Component=w;d.Fragment=Aa;d.Profiler=Ca;d.PureComponent=L;d.StrictMode=Ba;d.Suspense=Ga;d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B;d.cloneElement=function(a,b,c){if(null===a||void 0===a)throw Error(r(267,a));var d=I({},a.props),e=a.key,f=a.ref,m=a._owner;if(null!=b){void 0!==b.ref&&(f=b.ref,m=M.current);void 0!==b.key&&(e=""+b.key);if(a.type&&a.type.defaultProps)var h=
a.type.defaultProps;for(k in b)ha.call(b,k)&&!ia.hasOwnProperty(k)&&(d[k]=void 0===b[k]&&void 0!==h?h[k]:b[k])}var k=arguments.length-2;if(1===k)d.children=c;else if(1<k){h=Array(k);for(var l=0;l<k;l++)h[l]=arguments[l+2];d.children=h}return{$$typeof:x,type:a.type,key:e,ref:f,props:d,_owner:m}};d.createContext=function(a,b){void 0===b&&(b=null);a={$$typeof:Ea,_calculateChangedBits:b,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null};a.Provider={$$typeof:Da,_context:a};return a.Consumer=
a};d.createElement=ea;d.createFactory=function(a){var b=ea.bind(null,a);b.type=a;return b};d.createRef=function(){return{current:null}};d.forwardRef=function(a){return{$$typeof:Fa,render:a}};d.isValidElement=N;d.lazy=function(a){return{$$typeof:Ia,_ctor:a,_status:-1,_result:null}};d.memo=function(a,b){return{$$typeof:Ha,type:a,compare:void 0===b?null:b}};d.useCallback=function(a,b){return t().useCallback(a,b)};d.useContext=function(a,b){return t().useContext(a,b)};d.useDebugValue=function(a,b){};
d.useEffect=function(a,b){return t().useEffect(a,b)};d.useImperativeHandle=function(a,b,c){return t().useImperativeHandle(a,b,c)};d.useLayoutEffect=function(a,b){return t().useLayoutEffect(a,b)};d.useMemo=function(a,b){return t().useMemo(a,b)};d.useReducer=function(a,b,c){return t().useReducer(a,b,c)};d.useRef=function(a){return t().useRef(a)};d.useState=function(a){return t().useState(a)};d.version="16.13.1"});
</script>
    <script crossorigin>/** @license React v16.13.1
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/*
 Modernizr 3.0.0pre (Custom Build) | MIT
*/
'use strict';(function(I,ea){"object"===typeof exports&&"undefined"!==typeof module?ea(exports,require("react")):"function"===typeof define&&define.amd?define(["exports","react"],ea):(I=I||self,ea(I.ReactDOM={},I.React))})(this,function(I,ea){function k(a){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)b+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}
function ji(a,b,c,d,e,f,g,h,m){yb=!1;gc=null;ki.apply(li,arguments)}function mi(a,b,c,d,e,f,g,h,m){ji.apply(this,arguments);if(yb){if(yb){var n=gc;yb=!1;gc=null}else throw Error(k(198));hc||(hc=!0,pd=n)}}function lf(a,b,c){var d=a.type||"unknown-event";a.currentTarget=mf(c);mi(d,b,void 0,a);a.currentTarget=null}function nf(){if(ic)for(var a in cb){var b=cb[a],c=ic.indexOf(a);if(!(-1<c))throw Error(k(96,a));if(!jc[c]){if(!b.extractEvents)throw Error(k(97,a));jc[c]=b;c=b.eventTypes;for(var d in c){var e=
void 0;var f=c[d],g=b,h=d;if(qd.hasOwnProperty(h))throw Error(k(99,h));qd[h]=f;var m=f.phasedRegistrationNames;if(m){for(e in m)m.hasOwnProperty(e)&&of(m[e],g,h);e=!0}else f.registrationName?(of(f.registrationName,g,h),e=!0):e=!1;if(!e)throw Error(k(98,d,a));}}}}function of(a,b,c){if(db[a])throw Error(k(100,a));db[a]=b;rd[a]=b.eventTypes[c].dependencies}function pf(a){var b=!1,c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];if(!cb.hasOwnProperty(c)||cb[c]!==d){if(cb[c])throw Error(k(102,c));cb[c]=
d;b=!0}}b&&nf()}function qf(a){if(a=rf(a)){if("function"!==typeof sd)throw Error(k(280));var b=a.stateNode;b&&(b=td(b),sd(a.stateNode,a.type,b))}}function sf(a){eb?fb?fb.push(a):fb=[a]:eb=a}function tf(){if(eb){var a=eb,b=fb;fb=eb=null;qf(a);if(b)for(a=0;a<b.length;a++)qf(b[a])}}function ud(){if(null!==eb||null!==fb)vd(),tf()}function uf(a,b,c){if(wd)return a(b,c);wd=!0;try{return vf(a,b,c)}finally{wd=!1,ud()}}function ni(a){if(wf.call(xf,a))return!0;if(wf.call(yf,a))return!1;if(oi.test(a))return xf[a]=
!0;yf[a]=!0;return!1}function pi(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case "function":case "symbol":return!0;case "boolean":if(d)return!1;if(null!==c)return!c.acceptsBooleans;a=a.toLowerCase().slice(0,5);return"data-"!==a&&"aria-"!==a;default:return!1}}function qi(a,b,c,d){if(null===b||"undefined"===typeof b||pi(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function L(a,
b,c,d,e,f){this.acceptsBooleans=2===b||3===b||4===b;this.attributeName=d;this.attributeNamespace=e;this.mustUseProperty=c;this.propertyName=a;this.type=b;this.sanitizeURL=f}function xd(a,b,c,d){var e=E.hasOwnProperty(b)?E[b]:null;var f=null!==e?0===e.type:d?!1:!(2<b.length)||"o"!==b[0]&&"O"!==b[0]||"n"!==b[1]&&"N"!==b[1]?!1:!0;f||(qi(b,c,e,d)&&(c=null),d||null===e?ni(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,""+c)):e.mustUseProperty?a[e.propertyName]=null===c?3===e.type?!1:"":c:(b=e.attributeName,
d=e.attributeNamespace,null===c?a.removeAttribute(b):(e=e.type,c=3===e||4===e&&!0===c?"":""+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c))))}function zb(a){if(null===a||"object"!==typeof a)return null;a=zf&&a[zf]||a["@@iterator"];return"function"===typeof a?a:null}function ri(a){if(-1===a._status){a._status=0;var b=a._ctor;b=b();a._result=b;b.then(function(b){0===a._status&&(b=b.default,a._status=1,a._result=b)},function(b){0===a._status&&(a._status=2,a._result=b)})}}function na(a){if(null==a)return null;
if("function"===typeof a)return a.displayName||a.name||null;if("string"===typeof a)return a;switch(a){case Ma:return"Fragment";case gb:return"Portal";case kc:return"Profiler";case Af:return"StrictMode";case lc:return"Suspense";case yd:return"SuspenseList"}if("object"===typeof a)switch(a.$$typeof){case Bf:return"Context.Consumer";case Cf:return"Context.Provider";case zd:var b=a.render;b=b.displayName||b.name||"";return a.displayName||(""!==b?"ForwardRef("+b+")":"ForwardRef");case Ad:return na(a.type);
case Df:return na(a.render);case Ef:if(a=1===a._status?a._result:null)return na(a)}return null}function Bd(a){var b="";do{a:switch(a.tag){case 3:case 4:case 6:case 7:case 10:case 9:var c="";break a;default:var d=a._debugOwner,e=a._debugSource,f=na(a.type);c=null;d&&(c=na(d.type));d=f;f="";e?f=" (at "+e.fileName.replace(si,"")+":"+e.lineNumber+")":c&&(f=" (created by "+c+")");c="\n    in "+(d||"Unknown")+f}b+=c;a=a.return}while(a);return b}function va(a){switch(typeof a){case "boolean":case "number":case "object":case "string":case "undefined":return a;
default:return""}}function Ff(a){var b=a.type;return(a=a.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===b||"radio"===b)}function ti(a){var b=Ff(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=""+a[b];if(!a.hasOwnProperty(b)&&"undefined"!==typeof c&&"function"===typeof c.get&&"function"===typeof c.set){var e=c.get,f=c.set;Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=""+a;f.call(this,a)}});Object.defineProperty(a,
b,{enumerable:c.enumerable});return{getValue:function(){return d},setValue:function(a){d=""+a},stopTracking:function(){a._valueTracker=null;delete a[b]}}}}function mc(a){a._valueTracker||(a._valueTracker=ti(a))}function Gf(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue();var d="";a&&(d=Ff(a)?a.checked?"true":"false":a.value);a=d;return a!==c?(b.setValue(a),!0):!1}function Cd(a,b){var c=b.checked;return M({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=
c?c:a._wrapperState.initialChecked})}function Hf(a,b){var c=null==b.defaultValue?"":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=va(null!=b.value?b.value:c);a._wrapperState={initialChecked:d,initialValue:c,controlled:"checkbox"===b.type||"radio"===b.type?null!=b.checked:null!=b.value}}function If(a,b){b=b.checked;null!=b&&xd(a,"checked",b,!1)}function Dd(a,b){If(a,b);var c=va(b.value),d=b.type;if(null!=c)if("number"===d){if(0===c&&""===a.value||a.value!=c)a.value=""+c}else a.value!==
""+c&&(a.value=""+c);else if("submit"===d||"reset"===d){a.removeAttribute("value");return}b.hasOwnProperty("value")?Ed(a,b.type,c):b.hasOwnProperty("defaultValue")&&Ed(a,b.type,va(b.defaultValue));null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}function Jf(a,b,c){if(b.hasOwnProperty("value")||b.hasOwnProperty("defaultValue")){var d=b.type;if(!("submit"!==d&&"reset"!==d||void 0!==b.value&&null!==b.value))return;b=""+a._wrapperState.initialValue;c||b===a.value||(a.value=
b);a.defaultValue=b}c=a.name;""!==c&&(a.name="");a.defaultChecked=!!a._wrapperState.initialChecked;""!==c&&(a.name=c)}function Ed(a,b,c){if("number"!==b||a.ownerDocument.activeElement!==a)null==c?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+c&&(a.defaultValue=""+c)}function ui(a){var b="";ea.Children.forEach(a,function(a){null!=a&&(b+=a)});return b}function Fd(a,b){a=M({children:void 0},b);if(b=ui(b.children))a.children=b;return a}function hb(a,b,c,d){a=a.options;if(b){b={};
for(var e=0;e<c.length;e++)b["$"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty("$"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{c=""+va(c);b=null;for(e=0;e<a.length;e++){if(a[e].value===c){a[e].selected=!0;d&&(a[e].defaultSelected=!0);return}null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}function Gd(a,b){if(null!=b.dangerouslySetInnerHTML)throw Error(k(91));return M({},b,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}
function Kf(a,b){var c=b.value;if(null==c){c=b.children;b=b.defaultValue;if(null!=c){if(null!=b)throw Error(k(92));if(Array.isArray(c)){if(!(1>=c.length))throw Error(k(93));c=c[0]}b=c}null==b&&(b="");c=b}a._wrapperState={initialValue:va(c)}}function Lf(a,b){var c=va(b.value),d=va(b.defaultValue);null!=c&&(c=""+c,c!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c));null!=d&&(a.defaultValue=""+d)}function Mf(a,b){b=a.textContent;b===a._wrapperState.initialValue&&""!==
b&&null!==b&&(a.value=b)}function Nf(a){switch(a){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hd(a,b){return null==a||"http://www.w3.org/1999/xhtml"===a?Nf(b):"http://www.w3.org/2000/svg"===a&&"foreignObject"===b?"http://www.w3.org/1999/xhtml":a}function nc(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c["Webkit"+a]="webkit"+b;c["Moz"+a]="moz"+b;return c}function oc(a){if(Id[a])return Id[a];
if(!ib[a])return a;var b=ib[a],c;for(c in b)if(b.hasOwnProperty(c)&&c in Of)return Id[a]=b[c];return a}function Jd(a){var b=Pf.get(a);void 0===b&&(b=new Map,Pf.set(a,b));return b}function Na(a){var b=a,c=a;if(a.alternate)for(;b.return;)b=b.return;else{a=b;do b=a,0!==(b.effectTag&1026)&&(c=b.return),a=b.return;while(a)}return 3===b.tag?c:null}function Qf(a){if(13===a.tag){var b=a.memoizedState;null===b&&(a=a.alternate,null!==a&&(b=a.memoizedState));if(null!==b)return b.dehydrated}return null}function Rf(a){if(Na(a)!==
a)throw Error(k(188));}function vi(a){var b=a.alternate;if(!b){b=Na(a);if(null===b)throw Error(k(188));return b!==a?null:a}for(var c=a,d=b;;){var e=c.return;if(null===e)break;var f=e.alternate;if(null===f){d=e.return;if(null!==d){c=d;continue}break}if(e.child===f.child){for(f=e.child;f;){if(f===c)return Rf(e),a;if(f===d)return Rf(e),b;f=f.sibling}throw Error(k(188));}if(c.return!==d.return)c=e,d=f;else{for(var g=!1,h=e.child;h;){if(h===c){g=!0;c=e;d=f;break}if(h===d){g=!0;d=e;c=f;break}h=h.sibling}if(!g){for(h=
f.child;h;){if(h===c){g=!0;c=f;d=e;break}if(h===d){g=!0;d=f;c=e;break}h=h.sibling}if(!g)throw Error(k(189));}}if(c.alternate!==d)throw Error(k(190));}if(3!==c.tag)throw Error(k(188));return c.stateNode.current===c?a:b}function Sf(a){a=vi(a);if(!a)return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child)b.child.return=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}}return null}function jb(a,b){if(null==
b)throw Error(k(30));if(null==a)return b;if(Array.isArray(a)){if(Array.isArray(b))return a.push.apply(a,b),a;a.push(b);return a}return Array.isArray(b)?[a].concat(b):[a,b]}function Kd(a,b,c){Array.isArray(a)?a.forEach(b,c):a&&b.call(c,a)}function pc(a){null!==a&&(Ab=jb(Ab,a));a=Ab;Ab=null;if(a){Kd(a,wi);if(Ab)throw Error(k(95));if(hc)throw a=pd,hc=!1,pd=null,a;}}function Ld(a){a=a.target||a.srcElement||window;a.correspondingUseElement&&(a=a.correspondingUseElement);return 3===a.nodeType?a.parentNode:
a}function Tf(a){if(!wa)return!1;a="on"+a;var b=a in document;b||(b=document.createElement("div"),b.setAttribute(a,"return;"),b="function"===typeof b[a]);return b}function Uf(a){a.topLevelType=null;a.nativeEvent=null;a.targetInst=null;a.ancestors.length=0;10>qc.length&&qc.push(a)}function Vf(a,b,c,d){if(qc.length){var e=qc.pop();e.topLevelType=a;e.eventSystemFlags=d;e.nativeEvent=b;e.targetInst=c;return e}return{topLevelType:a,eventSystemFlags:d,nativeEvent:b,targetInst:c,ancestors:[]}}function Wf(a){var b=
a.targetInst,c=b;do{if(!c){a.ancestors.push(c);break}var d=c;if(3===d.tag)d=d.stateNode.containerInfo;else{for(;d.return;)d=d.return;d=3!==d.tag?null:d.stateNode.containerInfo}if(!d)break;b=c.tag;5!==b&&6!==b||a.ancestors.push(c);c=Bb(d)}while(c);for(c=0;c<a.ancestors.length;c++){b=a.ancestors[c];var e=Ld(a.nativeEvent);d=a.topLevelType;var f=a.nativeEvent,g=a.eventSystemFlags;0===c&&(g|=64);for(var h=null,m=0;m<jc.length;m++){var n=jc[m];n&&(n=n.extractEvents(d,b,f,e,g))&&(h=jb(h,n))}pc(h)}}function Md(a,
b,c){if(!c.has(a)){switch(a){case "scroll":Cb(b,"scroll",!0);break;case "focus":case "blur":Cb(b,"focus",!0);Cb(b,"blur",!0);c.set("blur",null);c.set("focus",null);break;case "cancel":case "close":Tf(a)&&Cb(b,a,!0);break;case "invalid":case "submit":case "reset":break;default:-1===Db.indexOf(a)&&w(a,b)}c.set(a,null)}}function xi(a,b){var c=Jd(b);Nd.forEach(function(a){Md(a,b,c)});yi.forEach(function(a){Md(a,b,c)})}function Od(a,b,c,d,e){return{blockedOn:a,topLevelType:b,eventSystemFlags:c|32,nativeEvent:e,
container:d}}function Xf(a,b){switch(a){case "focus":case "blur":xa=null;break;case "dragenter":case "dragleave":ya=null;break;case "mouseover":case "mouseout":za=null;break;case "pointerover":case "pointerout":Eb.delete(b.pointerId);break;case "gotpointercapture":case "lostpointercapture":Fb.delete(b.pointerId)}}function Gb(a,b,c,d,e,f){if(null===a||a.nativeEvent!==f)return a=Od(b,c,d,e,f),null!==b&&(b=Hb(b),null!==b&&Yf(b)),a;a.eventSystemFlags|=d;return a}function zi(a,b,c,d,e){switch(b){case "focus":return xa=
Gb(xa,a,b,c,d,e),!0;case "dragenter":return ya=Gb(ya,a,b,c,d,e),!0;case "mouseover":return za=Gb(za,a,b,c,d,e),!0;case "pointerover":var f=e.pointerId;Eb.set(f,Gb(Eb.get(f)||null,a,b,c,d,e));return!0;case "gotpointercapture":return f=e.pointerId,Fb.set(f,Gb(Fb.get(f)||null,a,b,c,d,e)),!0}return!1}function Ai(a){var b=Bb(a.target);if(null!==b){var c=Na(b);if(null!==c)if(b=c.tag,13===b){if(b=Qf(c),null!==b){a.blockedOn=b;Pd(a.priority,function(){Bi(c)});return}}else if(3===b&&c.stateNode.hydrate){a.blockedOn=
3===c.tag?c.stateNode.containerInfo:null;return}}a.blockedOn=null}function rc(a){if(null!==a.blockedOn)return!1;var b=Qd(a.topLevelType,a.eventSystemFlags,a.container,a.nativeEvent);if(null!==b){var c=Hb(b);null!==c&&Yf(c);a.blockedOn=b;return!1}return!0}function Zf(a,b,c){rc(a)&&c.delete(b)}function Ci(){for(Rd=!1;0<fa.length;){var a=fa[0];if(null!==a.blockedOn){a=Hb(a.blockedOn);null!==a&&Di(a);break}var b=Qd(a.topLevelType,a.eventSystemFlags,a.container,a.nativeEvent);null!==b?a.blockedOn=b:fa.shift()}null!==
xa&&rc(xa)&&(xa=null);null!==ya&&rc(ya)&&(ya=null);null!==za&&rc(za)&&(za=null);Eb.forEach(Zf);Fb.forEach(Zf)}function Ib(a,b){a.blockedOn===b&&(a.blockedOn=null,Rd||(Rd=!0,$f(ag,Ci)))}function bg(a){if(0<fa.length){Ib(fa[0],a);for(var b=1;b<fa.length;b++){var c=fa[b];c.blockedOn===a&&(c.blockedOn=null)}}null!==xa&&Ib(xa,a);null!==ya&&Ib(ya,a);null!==za&&Ib(za,a);b=function(b){return Ib(b,a)};Eb.forEach(b);Fb.forEach(b);for(b=0;b<Jb.length;b++)c=Jb[b],c.blockedOn===a&&(c.blockedOn=null);for(;0<Jb.length&&
(b=Jb[0],null===b.blockedOn);)Ai(b),null===b.blockedOn&&Jb.shift()}function Sd(a,b){for(var c=0;c<a.length;c+=2){var d=a[c],e=a[c+1],f="on"+(e[0].toUpperCase()+e.slice(1));f={phasedRegistrationNames:{bubbled:f,captured:f+"Capture"},dependencies:[d],eventPriority:b};Td.set(d,b);cg.set(d,f);dg[e]=f}}function w(a,b){Cb(b,a,!1)}function Cb(a,b,c){var d=Td.get(b);switch(void 0===d?2:d){case 0:d=Ei.bind(null,b,1,a);break;case 1:d=Fi.bind(null,b,1,a);break;default:d=sc.bind(null,b,1,a)}c?a.addEventListener(b,
d,!0):a.addEventListener(b,d,!1)}function Ei(a,b,c,d){Oa||vd();var e=sc,f=Oa;Oa=!0;try{eg(e,a,b,c,d)}finally{(Oa=f)||ud()}}function Fi(a,b,c,d){Gi(Hi,sc.bind(null,a,b,c,d))}function sc(a,b,c,d){if(tc)if(0<fa.length&&-1<Nd.indexOf(a))a=Od(null,a,b,c,d),fa.push(a);else{var e=Qd(a,b,c,d);if(null===e)Xf(a,d);else if(-1<Nd.indexOf(a))a=Od(e,a,b,c,d),fa.push(a);else if(!zi(e,a,b,c,d)){Xf(a,d);a=Vf(a,d,null,b);try{uf(Wf,a)}finally{Uf(a)}}}}function Qd(a,b,c,d){c=Ld(d);c=Bb(c);if(null!==c){var e=Na(c);if(null===
e)c=null;else{var f=e.tag;if(13===f){c=Qf(e);if(null!==c)return c;c=null}else if(3===f){if(e.stateNode.hydrate)return 3===e.tag?e.stateNode.containerInfo:null;c=null}else e!==c&&(c=null)}}a=Vf(a,d,c,b);try{uf(Wf,a)}finally{Uf(a)}return null}function fg(a,b,c){return null==b||"boolean"===typeof b||""===b?"":c||"number"!==typeof b||0===b||Kb.hasOwnProperty(a)&&Kb[a]?(""+b).trim():b+"px"}function gg(a,b){a=a.style;for(var c in b)if(b.hasOwnProperty(c)){var d=0===c.indexOf("--"),e=fg(c,b[c],d);"float"===
c&&(c="cssFloat");d?a.setProperty(c,e):a[c]=e}}function Ud(a,b){if(b){if(Ii[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML))throw Error(k(137,a,""));if(null!=b.dangerouslySetInnerHTML){if(null!=b.children)throw Error(k(60));if(!("object"===typeof b.dangerouslySetInnerHTML&&"__html"in b.dangerouslySetInnerHTML))throw Error(k(61));}if(null!=b.style&&"object"!==typeof b.style)throw Error(k(62,""));}}function Vd(a,b){if(-1===a.indexOf("-"))return"string"===typeof b.is;switch(a){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":return!1;
default:return!0}}function oa(a,b){a=9===a.nodeType||11===a.nodeType?a:a.ownerDocument;var c=Jd(a);b=rd[b];for(var d=0;d<b.length;d++)Md(b[d],a,c)}function uc(){}function Wd(a){a=a||("undefined"!==typeof document?document:void 0);if("undefined"===typeof a)return null;try{return a.activeElement||a.body}catch(b){return a.body}}function hg(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function ig(a,b){var c=hg(a);a=0;for(var d;c;){if(3===c.nodeType){d=a+c.textContent.length;if(a<=b&&d>=b)return{node:c,
offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=hg(c)}}function jg(a,b){return a&&b?a===b?!0:a&&3===a.nodeType?!1:b&&3===b.nodeType?jg(a,b.parentNode):"contains"in a?a.contains(b):a.compareDocumentPosition?!!(a.compareDocumentPosition(b)&16):!1:!1}function kg(){for(var a=window,b=Wd();b instanceof a.HTMLIFrameElement;){try{var c="string"===typeof b.contentWindow.location.href}catch(d){c=!1}if(c)a=b.contentWindow;else break;b=Wd(a.document)}return b}
function Xd(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&("input"===b&&("text"===a.type||"search"===a.type||"tel"===a.type||"url"===a.type||"password"===a.type)||"textarea"===b||"true"===a.contentEditable)}function lg(a,b){switch(a){case "button":case "input":case "select":case "textarea":return!!b.autoFocus}return!1}function Yd(a,b){return"textarea"===a||"option"===a||"noscript"===a||"string"===typeof b.children||"number"===typeof b.children||"object"===typeof b.dangerouslySetInnerHTML&&
null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}function kb(a){for(;null!=a;a=a.nextSibling){var b=a.nodeType;if(1===b||3===b)break}return a}function mg(a){a=a.previousSibling;for(var b=0;a;){if(8===a.nodeType){var c=a.data;if(c===ng||c===Zd||c===$d){if(0===b)return a;b--}else c===og&&b++}a=a.previousSibling}return null}function Bb(a){var b=a[Aa];if(b)return b;for(var c=a.parentNode;c;){if(b=c[Lb]||c[Aa]){c=b.alternate;if(null!==b.child||null!==c&&null!==c.child)for(a=mg(a);null!==
a;){if(c=a[Aa])return c;a=mg(a)}return b}a=c;c=a.parentNode}return null}function Hb(a){a=a[Aa]||a[Lb];return!a||5!==a.tag&&6!==a.tag&&13!==a.tag&&3!==a.tag?null:a}function Pa(a){if(5===a.tag||6===a.tag)return a.stateNode;throw Error(k(33));}function ae(a){return a[vc]||null}function pa(a){do a=a.return;while(a&&5!==a.tag);return a?a:null}function pg(a,b){var c=a.stateNode;if(!c)return null;var d=td(c);if(!d)return null;c=d[b];a:switch(b){case "onClick":case "onClickCapture":case "onDoubleClick":case "onDoubleClickCapture":case "onMouseDown":case "onMouseDownCapture":case "onMouseMove":case "onMouseMoveCapture":case "onMouseUp":case "onMouseUpCapture":case "onMouseEnter":(d=
!d.disabled)||(a=a.type,d=!("button"===a||"input"===a||"select"===a||"textarea"===a));a=!d;break a;default:a=!1}if(a)return null;if(c&&"function"!==typeof c)throw Error(k(231,b,typeof c));return c}function qg(a,b,c){if(b=pg(a,c.dispatchConfig.phasedRegistrationNames[b]))c._dispatchListeners=jb(c._dispatchListeners,b),c._dispatchInstances=jb(c._dispatchInstances,a)}function Ji(a){if(a&&a.dispatchConfig.phasedRegistrationNames){for(var b=a._targetInst,c=[];b;)c.push(b),b=pa(b);for(b=c.length;0<b--;)qg(c[b],
"captured",a);for(b=0;b<c.length;b++)qg(c[b],"bubbled",a)}}function be(a,b,c){a&&c&&c.dispatchConfig.registrationName&&(b=pg(a,c.dispatchConfig.registrationName))&&(c._dispatchListeners=jb(c._dispatchListeners,b),c._dispatchInstances=jb(c._dispatchInstances,a))}function Ki(a){a&&a.dispatchConfig.registrationName&&be(a._targetInst,null,a)}function lb(a){Kd(a,Ji)}function rg(){if(wc)return wc;var a,b=ce,c=b.length,d,e="value"in Ba?Ba.value:Ba.textContent,f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=
c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);return wc=e.slice(a,1<d?1-d:void 0)}function xc(){return!0}function yc(){return!1}function R(a,b,c,d){this.dispatchConfig=a;this._targetInst=b;this.nativeEvent=c;a=this.constructor.Interface;for(var e in a)a.hasOwnProperty(e)&&((b=a[e])?this[e]=b(c):"target"===e?this.target=d:this[e]=c[e]);this.isDefaultPrevented=(null!=c.defaultPrevented?c.defaultPrevented:!1===c.returnValue)?xc:yc;this.isPropagationStopped=yc;return this}function Li(a,b,c,d){if(this.eventPool.length){var e=
this.eventPool.pop();this.call(e,a,b,c,d);return e}return new this(a,b,c,d)}function Mi(a){if(!(a instanceof this))throw Error(k(279));a.destructor();10>this.eventPool.length&&this.eventPool.push(a)}function sg(a){a.eventPool=[];a.getPooled=Li;a.release=Mi}function tg(a,b){switch(a){case "keyup":return-1!==Ni.indexOf(b.keyCode);case "keydown":return 229!==b.keyCode;case "keypress":case "mousedown":case "blur":return!0;default:return!1}}function ug(a){a=a.detail;return"object"===typeof a&&"data"in
a?a.data:null}function Oi(a,b){switch(a){case "compositionend":return ug(b);case "keypress":if(32!==b.which)return null;vg=!0;return wg;case "textInput":return a=b.data,a===wg&&vg?null:a;default:return null}}function Pi(a,b){if(mb)return"compositionend"===a||!de&&tg(a,b)?(a=rg(),wc=ce=Ba=null,mb=!1,a):null;switch(a){case "paste":return null;case "keypress":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;
case "compositionend":return xg&&"ko"!==b.locale?null:b.data;default:return null}}function yg(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return"input"===b?!!Qi[a.type]:"textarea"===b?!0:!1}function zg(a,b,c){a=R.getPooled(Ag.change,a,b,c);a.type="change";sf(c);lb(a);return a}function Ri(a){pc(a)}function zc(a){var b=Pa(a);if(Gf(b))return a}function Si(a,b){if("change"===a)return b}function Bg(){Mb&&(Mb.detachEvent("onpropertychange",Cg),Nb=Mb=null)}function Cg(a){if("value"===a.propertyName&&
zc(Nb))if(a=zg(Nb,a,Ld(a)),Oa)pc(a);else{Oa=!0;try{ee(Ri,a)}finally{Oa=!1,ud()}}}function Ti(a,b,c){"focus"===a?(Bg(),Mb=b,Nb=c,Mb.attachEvent("onpropertychange",Cg)):"blur"===a&&Bg()}function Ui(a,b){if("selectionchange"===a||"keyup"===a||"keydown"===a)return zc(Nb)}function Vi(a,b){if("click"===a)return zc(b)}function Wi(a,b){if("input"===a||"change"===a)return zc(b)}function Xi(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):(a=Yi[a])?!!b[a]:!1}function fe(a){return Xi}
function Zi(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}function Ob(a,b){if(Qa(a,b))return!0;if("object"!==typeof a||null===a||"object"!==typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++)if(!$i.call(b,c[d])||!Qa(a[c[d]],b[c[d]]))return!1;return!0}function Dg(a,b){var c=b.window===b?b.document:9===b.nodeType?b:b.ownerDocument;if(ge||null==nb||nb!==Wd(c))return null;c=nb;"selectionStart"in c&&Xd(c)?c={start:c.selectionStart,
end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset});return Pb&&Ob(Pb,c)?null:(Pb=c,a=R.getPooled(Eg.select,he,a,b),a.type="select",a.target=nb,lb(a),a)}function Ac(a){var b=a.keyCode;"charCode"in a?(a=a.charCode,0===a&&13===b&&(a=13)):a=b;10===a&&(a=13);return 32<=a||13===a?a:0}function q(a,b){0>ob||(a.current=ie[ob],ie[ob]=null,ob--)}function y(a,b,c){ob++;
ie[ob]=a.current;a.current=b}function pb(a,b){var c=a.type.contextTypes;if(!c)return Ca;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=b[f];d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e);return e}function N(a){a=a.childContextTypes;return null!==a&&void 0!==a}function Fg(a,b,c){if(B.current!==Ca)throw Error(k(168));y(B,b);y(G,c)}
function Gg(a,b,c){var d=a.stateNode;a=b.childContextTypes;if("function"!==typeof d.getChildContext)return c;d=d.getChildContext();for(var e in d)if(!(e in a))throw Error(k(108,na(b)||"Unknown",e));return M({},c,{},d)}function Bc(a){a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Ca;Ra=B.current;y(B,a);y(G,G.current);return!0}function Hg(a,b,c){var d=a.stateNode;if(!d)throw Error(k(169));c?(a=Gg(a,b,Ra),d.__reactInternalMemoizedMergedChildContext=a,q(G),q(B),y(B,a)):q(G);y(G,c)}function Cc(){switch(aj()){case Dc:return 99;
case Ig:return 98;case Jg:return 97;case Kg:return 96;case Lg:return 95;default:throw Error(k(332));}}function Mg(a){switch(a){case 99:return Dc;case 98:return Ig;case 97:return Jg;case 96:return Kg;case 95:return Lg;default:throw Error(k(332));}}function Da(a,b){a=Mg(a);return bj(a,b)}function Ng(a,b,c){a=Mg(a);return je(a,b,c)}function Og(a){null===qa?(qa=[a],Ec=je(Dc,Pg)):qa.push(a);return Qg}function ha(){if(null!==Ec){var a=Ec;Ec=null;Rg(a)}Pg()}function Pg(){if(!ke&&null!==qa){ke=!0;var a=0;
try{var b=qa;Da(99,function(){for(;a<b.length;a++){var c=b[a];do c=c(!0);while(null!==c)}});qa=null}catch(c){throw null!==qa&&(qa=qa.slice(a+1)),je(Dc,ha),c;}finally{ke=!1}}}function Fc(a,b,c){c/=10;return 1073741821-(((1073741821-a+b/10)/c|0)+1)*c}function aa(a,b){if(a&&a.defaultProps){b=M({},b);a=a.defaultProps;for(var c in a)void 0===b[c]&&(b[c]=a[c])}return b}function le(){Gc=qb=Hc=null}function me(a){var b=Ic.current;q(Ic);a.type._context._currentValue=b}function Sg(a,b){for(;null!==a;){var c=
a.alternate;if(a.childExpirationTime<b)a.childExpirationTime=b,null!==c&&c.childExpirationTime<b&&(c.childExpirationTime=b);else if(null!==c&&c.childExpirationTime<b)c.childExpirationTime=b;else break;a=a.return}}function rb(a,b){Hc=a;Gc=qb=null;a=a.dependencies;null!==a&&null!==a.firstContext&&(a.expirationTime>=b&&(ia=!0),a.firstContext=null)}function W(a,b){if(Gc!==a&&!1!==b&&0!==b){if("number"!==typeof b||1073741823===b)Gc=a,b=1073741823;b={context:a,observedBits:b,next:null};if(null===qb){if(null===
Hc)throw Error(k(308));qb=b;Hc.dependencies={expirationTime:0,firstContext:b,responders:null}}else qb=qb.next=b}return a._currentValue}function ne(a){a.updateQueue={baseState:a.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function oe(a,b){a=a.updateQueue;b.updateQueue===a&&(b.updateQueue={baseState:a.baseState,baseQueue:a.baseQueue,shared:a.shared,effects:a.effects})}function Ea(a,b){a={expirationTime:a,suspenseConfig:b,tag:Tg,payload:null,callback:null,next:null};return a.next=
a}function Fa(a,b){a=a.updateQueue;if(null!==a){a=a.shared;var c=a.pending;null===c?b.next=b:(b.next=c.next,c.next=b);a.pending=b}}function Ug(a,b){var c=a.alternate;null!==c&&oe(c,a);a=a.updateQueue;c=a.baseQueue;null===c?(a.baseQueue=b.next=b,b.next=b):(b.next=c.next,c.next=b)}function Qb(a,b,c,d){var e=a.updateQueue;Ga=!1;var f=e.baseQueue,g=e.shared.pending;if(null!==g){if(null!==f){var h=f.next;f.next=g.next;g.next=h}f=g;e.shared.pending=null;h=a.alternate;null!==h&&(h=h.updateQueue,null!==h&&
(h.baseQueue=g))}if(null!==f){h=f.next;var m=e.baseState,n=0,k=null,ba=null,l=null;if(null!==h){var p=h;do{g=p.expirationTime;if(g<d){var t={expirationTime:p.expirationTime,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null};null===l?(ba=l=t,k=m):l=l.next=t;g>n&&(n=g)}else{null!==l&&(l=l.next={expirationTime:1073741823,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null});Vg(g,p.suspenseConfig);a:{var q=a,r=p;g=b;t=c;switch(r.tag){case 1:q=
r.payload;if("function"===typeof q){m=q.call(t,m,g);break a}m=q;break a;case 3:q.effectTag=q.effectTag&-4097|64;case Tg:q=r.payload;g="function"===typeof q?q.call(t,m,g):q;if(null===g||void 0===g)break a;m=M({},m,g);break a;case Jc:Ga=!0}}null!==p.callback&&(a.effectTag|=32,g=e.effects,null===g?e.effects=[p]:g.push(p))}p=p.next;if(null===p||p===h)if(g=e.shared.pending,null===g)break;else p=f.next=g.next,g.next=h,e.baseQueue=f=g,e.shared.pending=null}while(1)}null===l?k=m:l.next=ba;e.baseState=k;e.baseQueue=
l;Kc(n);a.expirationTime=n;a.memoizedState=m}}function Wg(a,b,c){a=b.effects;b.effects=null;if(null!==a)for(b=0;b<a.length;b++){var d=a[b],e=d.callback;if(null!==e){d.callback=null;d=e;e=c;if("function"!==typeof d)throw Error(k(191,d));d.call(e)}}}function Lc(a,b,c,d){b=a.memoizedState;c=c(d,b);c=null===c||void 0===c?b:M({},b,c);a.memoizedState=c;0===a.expirationTime&&(a.updateQueue.baseState=c)}function Xg(a,b,c,d,e,f,g){a=a.stateNode;return"function"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(d,
f,g):b.prototype&&b.prototype.isPureReactComponent?!Ob(c,d)||!Ob(e,f):!0}function Yg(a,b,c){var d=!1,e=Ca;var f=b.contextType;"object"===typeof f&&null!==f?f=W(f):(e=N(b)?Ra:B.current,d=b.contextTypes,f=(d=null!==d&&void 0!==d)?pb(a,e):Ca);b=new b(c,f);a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null;b.updater=Mc;a.stateNode=b;b._reactInternalFiber=a;d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f);return b}function Zg(a,
b,c,d){a=b.state;"function"===typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d);"function"===typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d);b.state!==a&&Mc.enqueueReplaceState(b,b.state,null)}function pe(a,b,c,d){var e=a.stateNode;e.props=c;e.state=a.memoizedState;e.refs=$g;ne(a);var f=b.contextType;"object"===typeof f&&null!==f?e.context=W(f):(f=N(b)?Ra:B.current,e.context=pb(a,f));Qb(a,c,e,d);e.state=a.memoizedState;f=b.getDerivedStateFromProps;
"function"===typeof f&&(Lc(a,b,f,c),e.state=a.memoizedState);"function"===typeof b.getDerivedStateFromProps||"function"===typeof e.getSnapshotBeforeUpdate||"function"!==typeof e.UNSAFE_componentWillMount&&"function"!==typeof e.componentWillMount||(b=e.state,"function"===typeof e.componentWillMount&&e.componentWillMount(),"function"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&Mc.enqueueReplaceState(e,e.state,null),Qb(a,c,e,d),e.state=a.memoizedState);"function"===
typeof e.componentDidMount&&(a.effectTag|=4)}function Rb(a,b,c){a=c.ref;if(null!==a&&"function"!==typeof a&&"object"!==typeof a){if(c._owner){c=c._owner;if(c){if(1!==c.tag)throw Error(k(309));var d=c.stateNode}if(!d)throw Error(k(147,a));var e=""+a;if(null!==b&&null!==b.ref&&"function"===typeof b.ref&&b.ref._stringRef===e)return b.ref;b=function(a){var b=d.refs;b===$g&&(b=d.refs={});null===a?delete b[e]:b[e]=a};b._stringRef=e;return b}if("string"!==typeof a)throw Error(k(284));if(!c._owner)throw Error(k(290,
a));}return a}function Nc(a,b){if("textarea"!==a.type)throw Error(k(31,"[object Object]"===Object.prototype.toString.call(b)?"object with keys {"+Object.keys(b).join(", ")+"}":b,""));}function ah(a){function b(b,c){if(a){var d=b.lastEffect;null!==d?(d.nextEffect=c,b.lastEffect=c):b.firstEffect=b.lastEffect=c;c.nextEffect=null;c.effectTag=8}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,
b),b=b.sibling;return a}function e(a,b){a=Sa(a,b);a.index=0;a.sibling=null;return a}function f(b,c,d){b.index=d;if(!a)return c;d=b.alternate;if(null!==d)return d=d.index,d<c?(b.effectTag=2,c):d;b.effectTag=2;return c}function g(b){a&&null===b.alternate&&(b.effectTag=2);return b}function h(a,b,c,d){if(null===b||6!==b.tag)return b=qe(c,a.mode,d),b.return=a,b;b=e(b,c);b.return=a;return b}function m(a,b,c,d){if(null!==b&&b.elementType===c.type)return d=e(b,c.props),d.ref=Rb(a,b,c),d.return=a,d;d=Oc(c.type,
c.key,c.props,null,a.mode,d);d.ref=Rb(a,b,c);d.return=a;return d}function n(a,b,c,d){if(null===b||4!==b.tag||b.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation)return b=re(c,a.mode,d),b.return=a,b;b=e(b,c.children||[]);b.return=a;return b}function l(a,b,c,d,f){if(null===b||7!==b.tag)return b=Ha(c,a.mode,d,f),b.return=a,b;b=e(b,c);b.return=a;return b}function ba(a,b,c){if("string"===typeof b||"number"===typeof b)return b=qe(""+b,a.mode,c),b.return=a,b;if("object"===
typeof b&&null!==b){switch(b.$$typeof){case Pc:return c=Oc(b.type,b.key,b.props,null,a.mode,c),c.ref=Rb(a,null,b),c.return=a,c;case gb:return b=re(b,a.mode,c),b.return=a,b}if(Qc(b)||zb(b))return b=Ha(b,a.mode,c,null),b.return=a,b;Nc(a,b)}return null}function p(a,b,c,d){var e=null!==b?b.key:null;if("string"===typeof c||"number"===typeof c)return null!==e?null:h(a,b,""+c,d);if("object"===typeof c&&null!==c){switch(c.$$typeof){case Pc:return c.key===e?c.type===Ma?l(a,b,c.props.children,d,e):m(a,b,c,
d):null;case gb:return c.key===e?n(a,b,c,d):null}if(Qc(c)||zb(c))return null!==e?null:l(a,b,c,d,null);Nc(a,c)}return null}function t(a,b,c,d,e){if("string"===typeof d||"number"===typeof d)return a=a.get(c)||null,h(b,a,""+d,e);if("object"===typeof d&&null!==d){switch(d.$$typeof){case Pc:return a=a.get(null===d.key?c:d.key)||null,d.type===Ma?l(b,a,d.props.children,e,d.key):m(b,a,d,e);case gb:return a=a.get(null===d.key?c:d.key)||null,n(b,a,d,e)}if(Qc(d)||zb(d))return a=a.get(c)||null,l(b,a,d,e,null);
Nc(b,d)}return null}function q(e,g,h,m){for(var n=null,k=null,l=g,r=g=0,C=null;null!==l&&r<h.length;r++){l.index>r?(C=l,l=null):C=l.sibling;var O=p(e,l,h[r],m);if(null===O){null===l&&(l=C);break}a&&l&&null===O.alternate&&b(e,l);g=f(O,g,r);null===k?n=O:k.sibling=O;k=O;l=C}if(r===h.length)return c(e,l),n;if(null===l){for(;r<h.length;r++)l=ba(e,h[r],m),null!==l&&(g=f(l,g,r),null===k?n=l:k.sibling=l,k=l);return n}for(l=d(e,l);r<h.length;r++)C=t(l,e,r,h[r],m),null!==C&&(a&&null!==C.alternate&&l.delete(null===
C.key?r:C.key),g=f(C,g,r),null===k?n=C:k.sibling=C,k=C);a&&l.forEach(function(a){return b(e,a)});return n}function w(e,g,h,n){var m=zb(h);if("function"!==typeof m)throw Error(k(150));h=m.call(h);if(null==h)throw Error(k(151));for(var l=m=null,r=g,C=g=0,O=null,v=h.next();null!==r&&!v.done;C++,v=h.next()){r.index>C?(O=r,r=null):O=r.sibling;var q=p(e,r,v.value,n);if(null===q){null===r&&(r=O);break}a&&r&&null===q.alternate&&b(e,r);g=f(q,g,C);null===l?m=q:l.sibling=q;l=q;r=O}if(v.done)return c(e,r),m;
if(null===r){for(;!v.done;C++,v=h.next())v=ba(e,v.value,n),null!==v&&(g=f(v,g,C),null===l?m=v:l.sibling=v,l=v);return m}for(r=d(e,r);!v.done;C++,v=h.next())v=t(r,e,C,v.value,n),null!==v&&(a&&null!==v.alternate&&r.delete(null===v.key?C:v.key),g=f(v,g,C),null===l?m=v:l.sibling=v,l=v);a&&r.forEach(function(a){return b(e,a)});return m}return function(a,d,f,h){var m="object"===typeof f&&null!==f&&f.type===Ma&&null===f.key;m&&(f=f.props.children);var n="object"===typeof f&&null!==f;if(n)switch(f.$$typeof){case Pc:a:{n=
f.key;for(m=d;null!==m;){if(m.key===n){switch(m.tag){case 7:if(f.type===Ma){c(a,m.sibling);d=e(m,f.props.children);d.return=a;a=d;break a}break;default:if(m.elementType===f.type){c(a,m.sibling);d=e(m,f.props);d.ref=Rb(a,m,f);d.return=a;a=d;break a}}c(a,m);break}else b(a,m);m=m.sibling}f.type===Ma?(d=Ha(f.props.children,a.mode,h,f.key),d.return=a,a=d):(h=Oc(f.type,f.key,f.props,null,a.mode,h),h.ref=Rb(a,d,f),h.return=a,a=h)}return g(a);case gb:a:{for(m=f.key;null!==d;){if(d.key===m)if(4===d.tag&&d.stateNode.containerInfo===
f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling);d=e(d,f.children||[]);d.return=a;a=d;break a}else{c(a,d);break}else b(a,d);d=d.sibling}d=re(f,a.mode,h);d.return=a;a=d}return g(a)}if("string"===typeof f||"number"===typeof f)return f=""+f,null!==d&&6===d.tag?(c(a,d.sibling),d=e(d,f),d.return=a,a=d):(c(a,d),d=qe(f,a.mode,h),d.return=a,a=d),g(a);if(Qc(f))return q(a,d,f,h);if(zb(f))return w(a,d,f,h);n&&Nc(a,f);if("undefined"===typeof f&&!m)switch(a.tag){case 1:case 0:throw a=
a.type,Error(k(152,a.displayName||a.name||"Component"));}return c(a,d)}}function Ta(a){if(a===Sb)throw Error(k(174));return a}function se(a,b){y(Tb,b);y(Ub,a);y(ja,Sb);a=b.nodeType;switch(a){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:Hd(null,"");break;default:a=8===a?b.parentNode:b,b=a.namespaceURI||null,a=a.tagName,b=Hd(b,a)}q(ja);y(ja,b)}function tb(a){q(ja);q(Ub);q(Tb)}function bh(a){Ta(Tb.current);var b=Ta(ja.current);var c=Hd(b,a.type);b!==c&&(y(Ub,a),y(ja,c))}function te(a){Ub.current===
a&&(q(ja),q(Ub))}function Rc(a){for(var b=a;null!==b;){if(13===b.tag){var c=b.memoizedState;if(null!==c&&(c=c.dehydrated,null===c||c.data===$d||c.data===Zd))return b}else if(19===b.tag&&void 0!==b.memoizedProps.revealOrder){if(0!==(b.effectTag&64))return b}else if(null!==b.child){b.child.return=b;b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}return null}function ue(a,b){return{responder:a,props:b}}
function S(){throw Error(k(321));}function ve(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!Qa(a[c],b[c]))return!1;return!0}function we(a,b,c,d,e,f){Ia=f;z=b;b.memoizedState=null;b.updateQueue=null;b.expirationTime=0;Sc.current=null===a||null===a.memoizedState?dj:ej;a=c(d,e);if(b.expirationTime===Ia){f=0;do{b.expirationTime=0;if(!(25>f))throw Error(k(301));f+=1;J=K=null;b.updateQueue=null;Sc.current=fj;a=c(d,e)}while(b.expirationTime===Ia)}Sc.current=Tc;b=null!==K&&null!==K.next;
Ia=0;J=K=z=null;Uc=!1;if(b)throw Error(k(300));return a}function ub(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};null===J?z.memoizedState=J=a:J=J.next=a;return J}function vb(){if(null===K){var a=z.alternate;a=null!==a?a.memoizedState:null}else a=K.next;var b=null===J?z.memoizedState:J.next;if(null!==b)J=b,K=a;else{if(null===a)throw Error(k(310));K=a;a={memoizedState:K.memoizedState,baseState:K.baseState,baseQueue:K.baseQueue,queue:K.queue,next:null};null===J?z.memoizedState=
J=a:J=J.next=a}return J}function Ua(a,b){return"function"===typeof b?b(a):b}function Vc(a,b,c){b=vb();c=b.queue;if(null===c)throw Error(k(311));c.lastRenderedReducer=a;var d=K,e=d.baseQueue,f=c.pending;if(null!==f){if(null!==e){var g=e.next;e.next=f.next;f.next=g}d.baseQueue=e=f;c.pending=null}if(null!==e){e=e.next;d=d.baseState;var h=g=f=null,m=e;do{var n=m.expirationTime;if(n<Ia){var l={expirationTime:m.expirationTime,suspenseConfig:m.suspenseConfig,action:m.action,eagerReducer:m.eagerReducer,eagerState:m.eagerState,
next:null};null===h?(g=h=l,f=d):h=h.next=l;n>z.expirationTime&&(z.expirationTime=n,Kc(n))}else null!==h&&(h=h.next={expirationTime:1073741823,suspenseConfig:m.suspenseConfig,action:m.action,eagerReducer:m.eagerReducer,eagerState:m.eagerState,next:null}),Vg(n,m.suspenseConfig),d=m.eagerReducer===a?m.eagerState:a(d,m.action);m=m.next}while(null!==m&&m!==e);null===h?f=d:h.next=g;Qa(d,b.memoizedState)||(ia=!0);b.memoizedState=d;b.baseState=f;b.baseQueue=h;c.lastRenderedState=d}return[b.memoizedState,
c.dispatch]}function Wc(a,b,c){b=vb();c=b.queue;if(null===c)throw Error(k(311));c.lastRenderedReducer=a;var d=c.dispatch,e=c.pending,f=b.memoizedState;if(null!==e){c.pending=null;var g=e=e.next;do f=a(f,g.action),g=g.next;while(g!==e);Qa(f,b.memoizedState)||(ia=!0);b.memoizedState=f;null===b.baseQueue&&(b.baseState=f);c.lastRenderedState=f}return[f,d]}function xe(a){var b=ub();"function"===typeof a&&(a=a());b.memoizedState=b.baseState=a;a=b.queue={pending:null,dispatch:null,lastRenderedReducer:Ua,
lastRenderedState:a};a=a.dispatch=ch.bind(null,z,a);return[b.memoizedState,a]}function ye(a,b,c,d){a={tag:a,create:b,destroy:c,deps:d,next:null};b=z.updateQueue;null===b?(b={lastEffect:null},z.updateQueue=b,b.lastEffect=a.next=a):(c=b.lastEffect,null===c?b.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,b.lastEffect=a));return a}function dh(a){return vb().memoizedState}function ze(a,b,c,d){var e=ub();z.effectTag|=a;e.memoizedState=ye(1|b,c,void 0,void 0===d?null:d)}function Ae(a,b,c,d){var e=vb();
d=void 0===d?null:d;var f=void 0;if(null!==K){var g=K.memoizedState;f=g.destroy;if(null!==d&&ve(d,g.deps)){ye(b,c,f,d);return}}z.effectTag|=a;e.memoizedState=ye(1|b,c,f,d)}function eh(a,b){return ze(516,4,a,b)}function Xc(a,b){return Ae(516,4,a,b)}function fh(a,b){return Ae(4,2,a,b)}function gh(a,b){if("function"===typeof b)return a=a(),b(a),function(){b(null)};if(null!==b&&void 0!==b)return a=a(),b.current=a,function(){b.current=null}}function hh(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;
return Ae(4,2,gh.bind(null,b,a),c)}function Be(a,b){}function ih(a,b){ub().memoizedState=[a,void 0===b?null:b];return a}function Yc(a,b){var c=vb();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&ve(b,d[1]))return d[0];c.memoizedState=[a,b];return a}function jh(a,b){var c=vb();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&ve(b,d[1]))return d[0];a=a();c.memoizedState=[a,b];return a}function Ce(a,b,c){var d=Cc();Da(98>d?98:d,function(){a(!0)});Da(97<d?97:d,function(){var d=
X.suspense;X.suspense=void 0===b?null:b;try{a(!1),c()}finally{X.suspense=d}})}function ch(a,b,c){var d=ka(),e=Vb.suspense;d=Va(d,a,e);e={expirationTime:d,suspenseConfig:e,action:c,eagerReducer:null,eagerState:null,next:null};var f=b.pending;null===f?e.next=e:(e.next=f.next,f.next=e);b.pending=e;f=a.alternate;if(a===z||null!==f&&f===z)Uc=!0,e.expirationTime=Ia,z.expirationTime=Ia;else{if(0===a.expirationTime&&(null===f||0===f.expirationTime)&&(f=b.lastRenderedReducer,null!==f))try{var g=b.lastRenderedState,
h=f(g,c);e.eagerReducer=f;e.eagerState=h;if(Qa(h,g))return}catch(m){}finally{}Ja(a,d)}}function kh(a,b){var c=la(5,null,null,0);c.elementType="DELETED";c.type="DELETED";c.stateNode=b;c.return=a;c.effectTag=8;null!==a.lastEffect?(a.lastEffect.nextEffect=c,a.lastEffect=c):a.firstEffect=a.lastEffect=c}function lh(a,b){switch(a.tag){case 5:var c=a.type;b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b;return null!==b?(a.stateNode=b,!0):!1;case 6:return b=""===a.pendingProps||3!==b.nodeType?
null:b,null!==b?(a.stateNode=b,!0):!1;case 13:return!1;default:return!1}}function De(a){if(Wa){var b=Ka;if(b){var c=b;if(!lh(a,b)){b=kb(c.nextSibling);if(!b||!lh(a,b)){a.effectTag=a.effectTag&-1025|2;Wa=!1;ra=a;return}kh(ra,c)}ra=a;Ka=kb(b.firstChild)}else a.effectTag=a.effectTag&-1025|2,Wa=!1,ra=a}}function mh(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&13!==a.tag;)a=a.return;ra=a}function Zc(a){if(a!==ra)return!1;if(!Wa)return mh(a),Wa=!0,!1;var b=a.type;if(5!==a.tag||"head"!==b&&"body"!==
b&&!Yd(b,a.memoizedProps))for(b=Ka;b;)kh(a,b),b=kb(b.nextSibling);mh(a);if(13===a.tag){a=a.memoizedState;a=null!==a?a.dehydrated:null;if(!a)throw Error(k(317));a:{a=a.nextSibling;for(b=0;a;){if(8===a.nodeType){var c=a.data;if(c===og){if(0===b){Ka=kb(a.nextSibling);break a}b--}else c!==ng&&c!==Zd&&c!==$d||b++}a=a.nextSibling}Ka=null}}else Ka=ra?kb(a.stateNode.nextSibling):null;return!0}function Ee(){Ka=ra=null;Wa=!1}function T(a,b,c,d){b.child=null===a?Fe(b,null,c,d):wb(b,a.child,c,d)}function nh(a,
b,c,d,e){c=c.render;var f=b.ref;rb(b,e);d=we(a,b,c,d,f,e);if(null!==a&&!ia)return b.updateQueue=a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),sa(a,b,e);b.effectTag|=1;T(a,b,d,e);return b.child}function oh(a,b,c,d,e,f){if(null===a){var g=c.type;if("function"===typeof g&&!Ge(g)&&void 0===g.defaultProps&&null===c.compare&&void 0===c.defaultProps)return b.tag=15,b.type=g,ph(a,b,g,d,e,f);a=Oc(c.type,null,d,null,b.mode,f);a.ref=b.ref;a.return=b;return b.child=a}g=a.child;if(e<
f&&(e=g.memoizedProps,c=c.compare,c=null!==c?c:Ob,c(e,d)&&a.ref===b.ref))return sa(a,b,f);b.effectTag|=1;a=Sa(g,d);a.ref=b.ref;a.return=b;return b.child=a}function ph(a,b,c,d,e,f){return null!==a&&Ob(a.memoizedProps,d)&&a.ref===b.ref&&(ia=!1,e<f)?(b.expirationTime=a.expirationTime,sa(a,b,f)):He(a,b,c,d,f)}function qh(a,b){var c=b.ref;if(null===a&&null!==c||null!==a&&a.ref!==c)b.effectTag|=128}function He(a,b,c,d,e){var f=N(c)?Ra:B.current;f=pb(b,f);rb(b,e);c=we(a,b,c,d,f,e);if(null!==a&&!ia)return b.updateQueue=
a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),sa(a,b,e);b.effectTag|=1;T(a,b,c,e);return b.child}function rh(a,b,c,d,e){if(N(c)){var f=!0;Bc(b)}else f=!1;rb(b,e);if(null===b.stateNode)null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),Yg(b,c,d),pe(b,c,d,e),d=!0;else if(null===a){var g=b.stateNode,h=b.memoizedProps;g.props=h;var m=g.context,n=c.contextType;"object"===typeof n&&null!==n?n=W(n):(n=N(c)?Ra:B.current,n=pb(b,n));var l=c.getDerivedStateFromProps,k="function"===
typeof l||"function"===typeof g.getSnapshotBeforeUpdate;k||"function"!==typeof g.UNSAFE_componentWillReceiveProps&&"function"!==typeof g.componentWillReceiveProps||(h!==d||m!==n)&&Zg(b,g,d,n);Ga=!1;var p=b.memoizedState;g.state=p;Qb(b,d,g,e);m=b.memoizedState;h!==d||p!==m||G.current||Ga?("function"===typeof l&&(Lc(b,c,l,d),m=b.memoizedState),(h=Ga||Xg(b,c,h,d,p,m,n))?(k||"function"!==typeof g.UNSAFE_componentWillMount&&"function"!==typeof g.componentWillMount||("function"===typeof g.componentWillMount&&
g.componentWillMount(),"function"===typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),"function"===typeof g.componentDidMount&&(b.effectTag|=4)):("function"===typeof g.componentDidMount&&(b.effectTag|=4),b.memoizedProps=d,b.memoizedState=m),g.props=d,g.state=m,g.context=n,d=h):("function"===typeof g.componentDidMount&&(b.effectTag|=4),d=!1)}else g=b.stateNode,oe(a,b),h=b.memoizedProps,g.props=b.type===b.elementType?h:aa(b.type,h),m=g.context,n=c.contextType,"object"===typeof n&&null!==
n?n=W(n):(n=N(c)?Ra:B.current,n=pb(b,n)),l=c.getDerivedStateFromProps,(k="function"===typeof l||"function"===typeof g.getSnapshotBeforeUpdate)||"function"!==typeof g.UNSAFE_componentWillReceiveProps&&"function"!==typeof g.componentWillReceiveProps||(h!==d||m!==n)&&Zg(b,g,d,n),Ga=!1,m=b.memoizedState,g.state=m,Qb(b,d,g,e),p=b.memoizedState,h!==d||m!==p||G.current||Ga?("function"===typeof l&&(Lc(b,c,l,d),p=b.memoizedState),(l=Ga||Xg(b,c,h,d,m,p,n))?(k||"function"!==typeof g.UNSAFE_componentWillUpdate&&
"function"!==typeof g.componentWillUpdate||("function"===typeof g.componentWillUpdate&&g.componentWillUpdate(d,p,n),"function"===typeof g.UNSAFE_componentWillUpdate&&g.UNSAFE_componentWillUpdate(d,p,n)),"function"===typeof g.componentDidUpdate&&(b.effectTag|=4),"function"===typeof g.getSnapshotBeforeUpdate&&(b.effectTag|=256)):("function"!==typeof g.componentDidUpdate||h===a.memoizedProps&&m===a.memoizedState||(b.effectTag|=4),"function"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&m===
a.memoizedState||(b.effectTag|=256),b.memoizedProps=d,b.memoizedState=p),g.props=d,g.state=p,g.context=n,d=l):("function"!==typeof g.componentDidUpdate||h===a.memoizedProps&&m===a.memoizedState||(b.effectTag|=4),"function"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&m===a.memoizedState||(b.effectTag|=256),d=!1);return Ie(a,b,c,d,f,e)}function Ie(a,b,c,d,e,f){qh(a,b);var g=0!==(b.effectTag&64);if(!d&&!g)return e&&Hg(b,c,!1),sa(a,b,f);d=b.stateNode;gj.current=b;var h=g&&"function"!==typeof c.getDerivedStateFromError?
null:d.render();b.effectTag|=1;null!==a&&g?(b.child=wb(b,a.child,null,f),b.child=wb(b,null,h,f)):T(a,b,h,f);b.memoizedState=d.state;e&&Hg(b,c,!0);return b.child}function sh(a){var b=a.stateNode;b.pendingContext?Fg(a,b.pendingContext,b.pendingContext!==b.context):b.context&&Fg(a,b.context,!1);se(a,b.containerInfo)}function th(a,b,c){var d=b.mode,e=b.pendingProps,f=D.current,g=!1,h;(h=0!==(b.effectTag&64))||(h=0!==(f&2)&&(null===a||null!==a.memoizedState));h?(g=!0,b.effectTag&=-65):null!==a&&null===
a.memoizedState||void 0===e.fallback||!0===e.unstable_avoidThisFallback||(f|=1);y(D,f&1);if(null===a){void 0!==e.fallback&&De(b);if(g){g=e.fallback;e=Ha(null,d,0,null);e.return=b;if(0===(b.mode&2))for(a=null!==b.memoizedState?b.child.child:b.child,e.child=a;null!==a;)a.return=e,a=a.sibling;c=Ha(g,d,c,null);c.return=b;e.sibling=c;b.memoizedState=Je;b.child=e;return c}d=e.children;b.memoizedState=null;return b.child=Fe(b,null,d,c)}if(null!==a.memoizedState){a=a.child;d=a.sibling;if(g){e=e.fallback;
c=Sa(a,a.pendingProps);c.return=b;if(0===(b.mode&2)&&(g=null!==b.memoizedState?b.child.child:b.child,g!==a.child))for(c.child=g;null!==g;)g.return=c,g=g.sibling;d=Sa(d,e);d.return=b;c.sibling=d;c.childExpirationTime=0;b.memoizedState=Je;b.child=c;return d}c=wb(b,a.child,e.children,c);b.memoizedState=null;return b.child=c}a=a.child;if(g){g=e.fallback;e=Ha(null,d,0,null);e.return=b;e.child=a;null!==a&&(a.return=e);if(0===(b.mode&2))for(a=null!==b.memoizedState?b.child.child:b.child,e.child=a;null!==
a;)a.return=e,a=a.sibling;c=Ha(g,d,c,null);c.return=b;e.sibling=c;c.effectTag|=2;e.childExpirationTime=0;b.memoizedState=Je;b.child=e;return c}b.memoizedState=null;return b.child=wb(b,a,e.children,c)}function uh(a,b){a.expirationTime<b&&(a.expirationTime=b);var c=a.alternate;null!==c&&c.expirationTime<b&&(c.expirationTime=b);Sg(a.return,b)}function Ke(a,b,c,d,e,f){var g=a.memoizedState;null===g?a.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:d,tail:c,tailExpiration:0,tailMode:e,
lastEffect:f}:(g.isBackwards=b,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=c,g.tailExpiration=0,g.tailMode=e,g.lastEffect=f)}function vh(a,b,c){var d=b.pendingProps,e=d.revealOrder,f=d.tail;T(a,b,d.children,c);d=D.current;if(0!==(d&2))d=d&1|2,b.effectTag|=64;else{if(null!==a&&0!==(a.effectTag&64))a:for(a=b.child;null!==a;){if(13===a.tag)null!==a.memoizedState&&uh(a,c);else if(19===a.tag)uh(a,c);else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===b)break a;for(;null===a.sibling;){if(null===
a.return||a.return===b)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}d&=1}y(D,d);if(0===(b.mode&2))b.memoizedState=null;else switch(e){case "forwards":c=b.child;for(e=null;null!==c;)a=c.alternate,null!==a&&null===Rc(a)&&(e=c),c=c.sibling;c=e;null===c?(e=b.child,b.child=null):(e=c.sibling,c.sibling=null);Ke(b,!1,e,c,f,b.lastEffect);break;case "backwards":c=null;e=b.child;for(b.child=null;null!==e;){a=e.alternate;if(null!==a&&null===Rc(a)){b.child=e;break}a=e.sibling;e.sibling=c;c=e;e=a}Ke(b,
!0,c,null,f,b.lastEffect);break;case "together":Ke(b,!1,null,null,void 0,b.lastEffect);break;default:b.memoizedState=null}return b.child}function sa(a,b,c){null!==a&&(b.dependencies=a.dependencies);var d=b.expirationTime;0!==d&&Kc(d);if(b.childExpirationTime<c)return null;if(null!==a&&b.child!==a.child)throw Error(k(153));if(null!==b.child){a=b.child;c=Sa(a,a.pendingProps);b.child=c;for(c.return=b;null!==a.sibling;)a=a.sibling,c=c.sibling=Sa(a,a.pendingProps),c.return=b;c.sibling=null}return b.child}
function $c(a,b){switch(a.tailMode){case "hidden":b=a.tail;for(var c=null;null!==b;)null!==b.alternate&&(c=b),b=b.sibling;null===c?a.tail=null:c.sibling=null;break;case "collapsed":c=a.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?b||null===a.tail?a.tail=null:a.tail.sibling=null:d.sibling=null}}function hj(a,b,c){var d=b.pendingProps;switch(b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return N(b.type)&&(q(G),q(B)),
null;case 3:return tb(),q(G),q(B),c=b.stateNode,c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),null!==a&&null!==a.child||!Zc(b)||(b.effectTag|=4),wh(b),null;case 5:te(b);c=Ta(Tb.current);var e=b.type;if(null!==a&&null!=b.stateNode)ij(a,b,e,d,c),a.ref!==b.ref&&(b.effectTag|=128);else{if(!d){if(null===b.stateNode)throw Error(k(166));return null}a=Ta(ja.current);if(Zc(b)){d=b.stateNode;e=b.type;var f=b.memoizedProps;d[Aa]=b;d[vc]=f;switch(e){case "iframe":case "object":case "embed":w("load",
d);break;case "video":case "audio":for(a=0;a<Db.length;a++)w(Db[a],d);break;case "source":w("error",d);break;case "img":case "image":case "link":w("error",d);w("load",d);break;case "form":w("reset",d);w("submit",d);break;case "details":w("toggle",d);break;case "input":Hf(d,f);w("invalid",d);oa(c,"onChange");break;case "select":d._wrapperState={wasMultiple:!!f.multiple};w("invalid",d);oa(c,"onChange");break;case "textarea":Kf(d,f),w("invalid",d),oa(c,"onChange")}Ud(e,f);a=null;for(var g in f)if(f.hasOwnProperty(g)){var h=
f[g];"children"===g?"string"===typeof h?d.textContent!==h&&(a=["children",h]):"number"===typeof h&&d.textContent!==""+h&&(a=["children",""+h]):db.hasOwnProperty(g)&&null!=h&&oa(c,g)}switch(e){case "input":mc(d);Jf(d,f,!0);break;case "textarea":mc(d);Mf(d);break;case "select":case "option":break;default:"function"===typeof f.onClick&&(d.onclick=uc)}c=a;b.updateQueue=c;null!==c&&(b.effectTag|=4)}else{g=9===c.nodeType?c:c.ownerDocument;"http://www.w3.org/1999/xhtml"===a&&(a=Nf(e));"http://www.w3.org/1999/xhtml"===
a?"script"===e?(a=g.createElement("div"),a.innerHTML="<script>\x3c/script>",a=a.removeChild(a.firstChild)):"string"===typeof d.is?a=g.createElement(e,{is:d.is}):(a=g.createElement(e),"select"===e&&(g=a,d.multiple?g.multiple=!0:d.size&&(g.size=d.size))):a=g.createElementNS(a,e);a[Aa]=b;a[vc]=d;jj(a,b,!1,!1);b.stateNode=a;g=Vd(e,d);switch(e){case "iframe":case "object":case "embed":w("load",a);h=d;break;case "video":case "audio":for(h=0;h<Db.length;h++)w(Db[h],a);h=d;break;case "source":w("error",a);
h=d;break;case "img":case "image":case "link":w("error",a);w("load",a);h=d;break;case "form":w("reset",a);w("submit",a);h=d;break;case "details":w("toggle",a);h=d;break;case "input":Hf(a,d);h=Cd(a,d);w("invalid",a);oa(c,"onChange");break;case "option":h=Fd(a,d);break;case "select":a._wrapperState={wasMultiple:!!d.multiple};h=M({},d,{value:void 0});w("invalid",a);oa(c,"onChange");break;case "textarea":Kf(a,d);h=Gd(a,d);w("invalid",a);oa(c,"onChange");break;default:h=d}Ud(e,h);var m=h;for(f in m)if(m.hasOwnProperty(f)){var n=
m[f];"style"===f?gg(a,n):"dangerouslySetInnerHTML"===f?(n=n?n.__html:void 0,null!=n&&xh(a,n)):"children"===f?"string"===typeof n?("textarea"!==e||""!==n)&&Wb(a,n):"number"===typeof n&&Wb(a,""+n):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(db.hasOwnProperty(f)?null!=n&&oa(c,f):null!=n&&xd(a,f,n,g))}switch(e){case "input":mc(a);Jf(a,d,!1);break;case "textarea":mc(a);Mf(a);break;case "option":null!=d.value&&a.setAttribute("value",""+va(d.value));break;case "select":a.multiple=
!!d.multiple;c=d.value;null!=c?hb(a,!!d.multiple,c,!1):null!=d.defaultValue&&hb(a,!!d.multiple,d.defaultValue,!0);break;default:"function"===typeof h.onClick&&(a.onclick=uc)}lg(e,d)&&(b.effectTag|=4)}null!==b.ref&&(b.effectTag|=128)}return null;case 6:if(a&&null!=b.stateNode)kj(a,b,a.memoizedProps,d);else{if("string"!==typeof d&&null===b.stateNode)throw Error(k(166));c=Ta(Tb.current);Ta(ja.current);Zc(b)?(c=b.stateNode,d=b.memoizedProps,c[Aa]=b,c.nodeValue!==d&&(b.effectTag|=4)):(c=(9===c.nodeType?
c:c.ownerDocument).createTextNode(d),c[Aa]=b,b.stateNode=c)}return null;case 13:q(D);d=b.memoizedState;if(0!==(b.effectTag&64))return b.expirationTime=c,b;c=null!==d;d=!1;null===a?void 0!==b.memoizedProps.fallback&&Zc(b):(e=a.memoizedState,d=null!==e,c||null===e||(e=a.child.sibling,null!==e&&(f=b.firstEffect,null!==f?(b.firstEffect=e,e.nextEffect=f):(b.firstEffect=b.lastEffect=e,e.nextEffect=null),e.effectTag=8)));if(c&&!d&&0!==(b.mode&2))if(null===a&&!0!==b.memoizedProps.unstable_avoidThisFallback||
0!==(D.current&1))F===Xa&&(F=ad);else{if(F===Xa||F===ad)F=bd;0!==Xb&&null!==U&&(Ya(U,P),yh(U,Xb))}if(c||d)b.effectTag|=4;return null;case 4:return tb(),wh(b),null;case 10:return me(b),null;case 17:return N(b.type)&&(q(G),q(B)),null;case 19:q(D);d=b.memoizedState;if(null===d)return null;e=0!==(b.effectTag&64);f=d.rendering;if(null===f)if(e)$c(d,!1);else{if(F!==Xa||null!==a&&0!==(a.effectTag&64))for(f=b.child;null!==f;){a=Rc(f);if(null!==a){b.effectTag|=64;$c(d,!1);e=a.updateQueue;null!==e&&(b.updateQueue=
e,b.effectTag|=4);null===d.lastEffect&&(b.firstEffect=null);b.lastEffect=d.lastEffect;for(d=b.child;null!==d;)e=d,f=c,e.effectTag&=2,e.nextEffect=null,e.firstEffect=null,e.lastEffect=null,a=e.alternate,null===a?(e.childExpirationTime=0,e.expirationTime=f,e.child=null,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null):(e.childExpirationTime=a.childExpirationTime,e.expirationTime=a.expirationTime,e.child=a.child,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,
e.updateQueue=a.updateQueue,f=a.dependencies,e.dependencies=null===f?null:{expirationTime:f.expirationTime,firstContext:f.firstContext,responders:f.responders}),d=d.sibling;y(D,D.current&1|2);return b.child}f=f.sibling}}else{if(!e)if(a=Rc(f),null!==a){if(b.effectTag|=64,e=!0,c=a.updateQueue,null!==c&&(b.updateQueue=c,b.effectTag|=4),$c(d,!0),null===d.tail&&"hidden"===d.tailMode&&!f.alternate)return b=b.lastEffect=d.lastEffect,null!==b&&(b.nextEffect=null),null}else 2*Y()-d.renderingStartTime>d.tailExpiration&&
1<c&&(b.effectTag|=64,e=!0,$c(d,!1),b.expirationTime=b.childExpirationTime=c-1);d.isBackwards?(f.sibling=b.child,b.child=f):(c=d.last,null!==c?c.sibling=f:b.child=f,d.last=f)}return null!==d.tail?(0===d.tailExpiration&&(d.tailExpiration=Y()+500),c=d.tail,d.rendering=c,d.tail=c.sibling,d.lastEffect=b.lastEffect,d.renderingStartTime=Y(),c.sibling=null,b=D.current,y(D,e?b&1|2:b&1),c):null}throw Error(k(156,b.tag));}function lj(a,b){switch(a.tag){case 1:return N(a.type)&&(q(G),q(B)),b=a.effectTag,b&4096?
(a.effectTag=b&-4097|64,a):null;case 3:tb();q(G);q(B);b=a.effectTag;if(0!==(b&64))throw Error(k(285));a.effectTag=b&-4097|64;return a;case 5:return te(a),null;case 13:return q(D),b=a.effectTag,b&4096?(a.effectTag=b&-4097|64,a):null;case 19:return q(D),null;case 4:return tb(),null;case 10:return me(a),null;default:return null}}function Le(a,b){return{value:a,source:b,stack:Bd(b)}}function Me(a,b){var c=b.source,d=b.stack;null===d&&null!==c&&(d=Bd(c));null!==c&&na(c.type);b=b.value;null!==a&&1===a.tag&&
na(a.type);try{console.error(b)}catch(e){setTimeout(function(){throw e;})}}function mj(a,b){try{b.props=a.memoizedProps,b.state=a.memoizedState,b.componentWillUnmount()}catch(c){Za(a,c)}}function zh(a){var b=a.ref;if(null!==b)if("function"===typeof b)try{b(null)}catch(c){Za(a,c)}else b.current=null}function nj(a,b){switch(b.tag){case 0:case 11:case 15:case 22:return;case 1:if(b.effectTag&256&&null!==a){var c=a.memoizedProps,d=a.memoizedState;a=b.stateNode;b=a.getSnapshotBeforeUpdate(b.elementType===
b.type?c:aa(b.type,c),d);a.__reactInternalSnapshotBeforeUpdate=b}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(k(163));}function Ah(a,b){b=b.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){var c=b=b.next;do{if((c.tag&a)===a){var d=c.destroy;c.destroy=void 0;void 0!==d&&d()}c=c.next}while(c!==b)}}function Bh(a,b){b=b.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){var c=b=b.next;do{if((c.tag&a)===a){var d=c.create;c.destroy=d()}c=c.next}while(c!==b)}}function oj(a,b,c,d){switch(c.tag){case 0:case 11:case 15:case 22:Bh(3,
c);return;case 1:a=c.stateNode;c.effectTag&4&&(null===b?a.componentDidMount():(d=c.elementType===c.type?b.memoizedProps:aa(c.type,b.memoizedProps),a.componentDidUpdate(d,b.memoizedState,a.__reactInternalSnapshotBeforeUpdate)));b=c.updateQueue;null!==b&&Wg(c,b,a);return;case 3:b=c.updateQueue;if(null!==b){a=null;if(null!==c.child)switch(c.child.tag){case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}Wg(c,b,a)}return;case 5:a=c.stateNode;null===b&&c.effectTag&4&&lg(c.type,c.memoizedProps)&&
a.focus();return;case 6:return;case 4:return;case 12:return;case 13:null===c.memoizedState&&(c=c.alternate,null!==c&&(c=c.memoizedState,null!==c&&(c=c.dehydrated,null!==c&&bg(c))));return;case 19:case 17:case 20:case 21:return}throw Error(k(163));}function Ch(a,b,c){"function"===typeof Ne&&Ne(b);switch(b.tag){case 0:case 11:case 14:case 15:case 22:a=b.updateQueue;if(null!==a&&(a=a.lastEffect,null!==a)){var d=a.next;Da(97<c?97:c,function(){var a=d;do{var c=a.destroy;if(void 0!==c){var g=b;try{c()}catch(h){Za(g,
h)}}a=a.next}while(a!==d)})}break;case 1:zh(b);c=b.stateNode;"function"===typeof c.componentWillUnmount&&mj(b,c);break;case 5:zh(b);break;case 4:Dh(a,b,c)}}function Eh(a){var b=a.alternate;a.return=null;a.child=null;a.memoizedState=null;a.updateQueue=null;a.dependencies=null;a.alternate=null;a.firstEffect=null;a.lastEffect=null;a.pendingProps=null;a.memoizedProps=null;a.stateNode=null;null!==b&&Eh(b)}function Fh(a){return 5===a.tag||3===a.tag||4===a.tag}function Gh(a){a:{for(var b=a.return;null!==
b;){if(Fh(b)){var c=b;break a}b=b.return}throw Error(k(160));}b=c.stateNode;switch(c.tag){case 5:var d=!1;break;case 3:b=b.containerInfo;d=!0;break;case 4:b=b.containerInfo;d=!0;break;default:throw Error(k(161));}c.effectTag&16&&(Wb(b,""),c.effectTag&=-17);a:b:for(c=a;;){for(;null===c.sibling;){if(null===c.return||Fh(c.return)){c=null;break a}c=c.return}c.sibling.return=c.return;for(c=c.sibling;5!==c.tag&&6!==c.tag&&18!==c.tag;){if(c.effectTag&2)continue b;if(null===c.child||4===c.tag)continue b;
else c.child.return=c,c=c.child}if(!(c.effectTag&2)){c=c.stateNode;break a}}d?Oe(a,c,b):Pe(a,c,b)}function Oe(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?8===c.nodeType?c.parentNode.insertBefore(a,b):c.insertBefore(a,b):(8===c.nodeType?(b=c.parentNode,b.insertBefore(a,c)):(b=c,b.appendChild(a)),c=c._reactRootContainer,null!==c&&void 0!==c||null!==b.onclick||(b.onclick=uc));else if(4!==d&&(a=a.child,null!==a))for(Oe(a,b,c),a=a.sibling;null!==a;)Oe(a,b,c),a=a.sibling}
function Pe(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?c.insertBefore(a,b):c.appendChild(a);else if(4!==d&&(a=a.child,null!==a))for(Pe(a,b,c),a=a.sibling;null!==a;)Pe(a,b,c),a=a.sibling}function Dh(a,b,c){for(var d=b,e=!1,f,g;;){if(!e){e=d.return;a:for(;;){if(null===e)throw Error(k(160));f=e.stateNode;switch(e.tag){case 5:g=!1;break a;case 3:f=f.containerInfo;g=!0;break a;case 4:f=f.containerInfo;g=!0;break a}e=e.return}e=!0}if(5===d.tag||6===d.tag){a:for(var h=
a,m=d,n=c,l=m;;)if(Ch(h,l,n),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===m)break a;for(;null===l.sibling;){if(null===l.return||l.return===m)break a;l=l.return}l.sibling.return=l.return;l=l.sibling}g?(h=f,m=d.stateNode,8===h.nodeType?h.parentNode.removeChild(m):h.removeChild(m)):f.removeChild(d.stateNode)}else if(4===d.tag){if(null!==d.child){f=d.stateNode.containerInfo;g=!0;d.child.return=d;d=d.child;continue}}else if(Ch(a,d,c),null!==d.child){d.child.return=d;d=d.child;continue}if(d===
b)break;for(;null===d.sibling;){if(null===d.return||d.return===b)return;d=d.return;4===d.tag&&(e=!1)}d.sibling.return=d.return;d=d.sibling}}function Qe(a,b){switch(b.tag){case 0:case 11:case 14:case 15:case 22:Ah(3,b);return;case 1:return;case 5:var c=b.stateNode;if(null!=c){var d=b.memoizedProps,e=null!==a?a.memoizedProps:d;a=b.type;var f=b.updateQueue;b.updateQueue=null;if(null!==f){c[vc]=d;"input"===a&&"radio"===d.type&&null!=d.name&&If(c,d);Vd(a,e);b=Vd(a,d);for(e=0;e<f.length;e+=2){var g=f[e],
h=f[e+1];"style"===g?gg(c,h):"dangerouslySetInnerHTML"===g?xh(c,h):"children"===g?Wb(c,h):xd(c,g,h,b)}switch(a){case "input":Dd(c,d);break;case "textarea":Lf(c,d);break;case "select":b=c._wrapperState.wasMultiple,c._wrapperState.wasMultiple=!!d.multiple,a=d.value,null!=a?hb(c,!!d.multiple,a,!1):b!==!!d.multiple&&(null!=d.defaultValue?hb(c,!!d.multiple,d.defaultValue,!0):hb(c,!!d.multiple,d.multiple?[]:"",!1))}}}return;case 6:if(null===b.stateNode)throw Error(k(162));b.stateNode.nodeValue=b.memoizedProps;
return;case 3:b=b.stateNode;b.hydrate&&(b.hydrate=!1,bg(b.containerInfo));return;case 12:return;case 13:c=b;null===b.memoizedState?d=!1:(d=!0,c=b.child,Re=Y());if(null!==c)a:for(a=c;;){if(5===a.tag)f=a.stateNode,d?(f=f.style,"function"===typeof f.setProperty?f.setProperty("display","none","important"):f.display="none"):(f=a.stateNode,e=a.memoizedProps.style,e=void 0!==e&&null!==e&&e.hasOwnProperty("display")?e.display:null,f.style.display=fg("display",e));else if(6===a.tag)a.stateNode.nodeValue=d?
"":a.memoizedProps;else if(13===a.tag&&null!==a.memoizedState&&null===a.memoizedState.dehydrated){f=a.child.sibling;f.return=a;a=f;continue}else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===c)break;for(;null===a.sibling;){if(null===a.return||a.return===c)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}Hh(b);return;case 19:Hh(b);return;case 17:return}throw Error(k(163));}function Hh(a){var b=a.updateQueue;if(null!==b){a.updateQueue=null;var c=a.stateNode;null===c&&(c=a.stateNode=
new pj);b.forEach(function(b){var d=qj.bind(null,a,b);c.has(b)||(c.add(b),b.then(d,d))})}}function Ih(a,b,c){c=Ea(c,null);c.tag=3;c.payload={element:null};var d=b.value;c.callback=function(){cd||(cd=!0,Se=d);Me(a,b)};return c}function Jh(a,b,c){c=Ea(c,null);c.tag=3;var d=a.type.getDerivedStateFromError;if("function"===typeof d){var e=b.value;c.payload=function(){Me(a,b);return d(e)}}var f=a.stateNode;null!==f&&"function"===typeof f.componentDidCatch&&(c.callback=function(){"function"!==typeof d&&
(null===La?La=new Set([this]):La.add(this),Me(a,b));var c=b.stack;this.componentDidCatch(b.value,{componentStack:null!==c?c:""})});return c}function ka(){return(p&(ca|ma))!==H?1073741821-(Y()/10|0):0!==dd?dd:dd=1073741821-(Y()/10|0)}function Va(a,b,c){b=b.mode;if(0===(b&2))return 1073741823;var d=Cc();if(0===(b&4))return 99===d?1073741823:1073741822;if((p&ca)!==H)return P;if(null!==c)a=Fc(a,c.timeoutMs|0||5E3,250);else switch(d){case 99:a=1073741823;break;case 98:a=Fc(a,150,100);break;case 97:case 96:a=
Fc(a,5E3,250);break;case 95:a=2;break;default:throw Error(k(326));}null!==U&&a===P&&--a;return a}function ed(a,b){a.expirationTime<b&&(a.expirationTime=b);var c=a.alternate;null!==c&&c.expirationTime<b&&(c.expirationTime=b);var d=a.return,e=null;if(null===d&&3===a.tag)e=a.stateNode;else for(;null!==d;){c=d.alternate;d.childExpirationTime<b&&(d.childExpirationTime=b);null!==c&&c.childExpirationTime<b&&(c.childExpirationTime=b);if(null===d.return&&3===d.tag){e=d.stateNode;break}d=d.return}null!==e&&
(U===e&&(Kc(b),F===bd&&Ya(e,P)),yh(e,b));return e}function fd(a){var b=a.lastExpiredTime;if(0!==b)return b;b=a.firstPendingTime;if(!Kh(a,b))return b;var c=a.lastPingedTime;a=a.nextKnownPendingLevel;a=c>a?c:a;return 2>=a&&b!==a?0:a}function V(a){if(0!==a.lastExpiredTime)a.callbackExpirationTime=1073741823,a.callbackPriority=99,a.callbackNode=Og(Te.bind(null,a));else{var b=fd(a),c=a.callbackNode;if(0===b)null!==c&&(a.callbackNode=null,a.callbackExpirationTime=0,a.callbackPriority=90);else{var d=ka();
1073741823===b?d=99:1===b||2===b?d=95:(d=10*(1073741821-b)-10*(1073741821-d),d=0>=d?99:250>=d?98:5250>=d?97:95);if(null!==c){var e=a.callbackPriority;if(a.callbackExpirationTime===b&&e>=d)return;c!==Qg&&Rg(c)}a.callbackExpirationTime=b;a.callbackPriority=d;b=1073741823===b?Og(Te.bind(null,a)):Ng(d,Lh.bind(null,a),{timeout:10*(1073741821-b)-Y()});a.callbackNode=b}}}function Lh(a,b){dd=0;if(b)return b=ka(),Ue(a,b),V(a),null;var c=fd(a);if(0!==c){b=a.callbackNode;if((p&(ca|ma))!==H)throw Error(k(327));
xb();a===U&&c===P||$a(a,c);if(null!==t){var d=p;p|=ca;var e=Mh();do try{rj();break}catch(h){Nh(a,h)}while(1);le();p=d;gd.current=e;if(F===hd)throw b=id,$a(a,c),Ya(a,c),V(a),b;if(null===t)switch(e=a.finishedWork=a.current.alternate,a.finishedExpirationTime=c,d=F,U=null,d){case Xa:case hd:throw Error(k(345));case Oh:Ue(a,2<c?2:c);break;case ad:Ya(a,c);d=a.lastSuspendedTime;c===d&&(a.nextKnownPendingLevel=Ve(e));if(1073741823===ta&&(e=Re+Ph-Y(),10<e)){if(jd){var f=a.lastPingedTime;if(0===f||f>=c){a.lastPingedTime=
c;$a(a,c);break}}f=fd(a);if(0!==f&&f!==c)break;if(0!==d&&d!==c){a.lastPingedTime=d;break}a.timeoutHandle=We(ab.bind(null,a),e);break}ab(a);break;case bd:Ya(a,c);d=a.lastSuspendedTime;c===d&&(a.nextKnownPendingLevel=Ve(e));if(jd&&(e=a.lastPingedTime,0===e||e>=c)){a.lastPingedTime=c;$a(a,c);break}e=fd(a);if(0!==e&&e!==c)break;if(0!==d&&d!==c){a.lastPingedTime=d;break}1073741823!==Yb?d=10*(1073741821-Yb)-Y():1073741823===ta?d=0:(d=10*(1073741821-ta)-5E3,e=Y(),c=10*(1073741821-c)-e,d=e-d,0>d&&(d=0),d=
(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3E3>d?3E3:4320>d?4320:1960*sj(d/1960))-d,c<d&&(d=c));if(10<d){a.timeoutHandle=We(ab.bind(null,a),d);break}ab(a);break;case Xe:if(1073741823!==ta&&null!==kd){f=ta;var g=kd;d=g.busyMinDurationMs|0;0>=d?d=0:(e=g.busyDelayMs|0,f=Y()-(10*(1073741821-f)-(g.timeoutMs|0||5E3)),d=f<=e?0:e+d-f);if(10<d){Ya(a,c);a.timeoutHandle=We(ab.bind(null,a),d);break}}ab(a);break;default:throw Error(k(329));}V(a);if(a.callbackNode===b)return Lh.bind(null,a)}}return null}function Te(a){var b=
a.lastExpiredTime;b=0!==b?b:1073741823;if((p&(ca|ma))!==H)throw Error(k(327));xb();a===U&&b===P||$a(a,b);if(null!==t){var c=p;p|=ca;var d=Mh();do try{tj();break}catch(e){Nh(a,e)}while(1);le();p=c;gd.current=d;if(F===hd)throw c=id,$a(a,b),Ya(a,b),V(a),c;if(null!==t)throw Error(k(261));a.finishedWork=a.current.alternate;a.finishedExpirationTime=b;U=null;ab(a);V(a)}return null}function uj(){if(null!==bb){var a=bb;bb=null;a.forEach(function(a,c){Ue(c,a);V(c)});ha()}}function Qh(a,b){var c=p;p|=1;try{return a(b)}finally{p=
c,p===H&&ha()}}function Rh(a,b){var c=p;p&=-2;p|=Ye;try{return a(b)}finally{p=c,p===H&&ha()}}function $a(a,b){a.finishedWork=null;a.finishedExpirationTime=0;var c=a.timeoutHandle;-1!==c&&(a.timeoutHandle=-1,vj(c));if(null!==t)for(c=t.return;null!==c;){var d=c;switch(d.tag){case 1:d=d.type.childContextTypes;null!==d&&void 0!==d&&(q(G),q(B));break;case 3:tb();q(G);q(B);break;case 5:te(d);break;case 4:tb();break;case 13:q(D);break;case 19:q(D);break;case 10:me(d)}c=c.return}U=a;t=Sa(a.current,null);
P=b;F=Xa;id=null;Yb=ta=1073741823;kd=null;Xb=0;jd=!1}function Nh(a,b){do{try{le();Sc.current=Tc;if(Uc)for(var c=z.memoizedState;null!==c;){var d=c.queue;null!==d&&(d.pending=null);c=c.next}Ia=0;J=K=z=null;Uc=!1;if(null===t||null===t.return)return F=hd,id=b,t=null;a:{var e=a,f=t.return,g=t,h=b;b=P;g.effectTag|=2048;g.firstEffect=g.lastEffect=null;if(null!==h&&"object"===typeof h&&"function"===typeof h.then){var m=h;if(0===(g.mode&2)){var n=g.alternate;n?(g.updateQueue=n.updateQueue,g.memoizedState=
n.memoizedState,g.expirationTime=n.expirationTime):(g.updateQueue=null,g.memoizedState=null)}var l=0!==(D.current&1),k=f;do{var p;if(p=13===k.tag){var q=k.memoizedState;if(null!==q)p=null!==q.dehydrated?!0:!1;else{var w=k.memoizedProps;p=void 0===w.fallback?!1:!0!==w.unstable_avoidThisFallback?!0:l?!1:!0}}if(p){var y=k.updateQueue;if(null===y){var r=new Set;r.add(m);k.updateQueue=r}else y.add(m);if(0===(k.mode&2)){k.effectTag|=64;g.effectTag&=-2981;if(1===g.tag)if(null===g.alternate)g.tag=17;else{var O=
Ea(1073741823,null);O.tag=Jc;Fa(g,O)}g.expirationTime=1073741823;break a}h=void 0;g=b;var v=e.pingCache;null===v?(v=e.pingCache=new wj,h=new Set,v.set(m,h)):(h=v.get(m),void 0===h&&(h=new Set,v.set(m,h)));if(!h.has(g)){h.add(g);var x=xj.bind(null,e,m,g);m.then(x,x)}k.effectTag|=4096;k.expirationTime=b;break a}k=k.return}while(null!==k);h=Error((na(g.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+
Bd(g))}F!==Xe&&(F=Oh);h=Le(h,g);k=f;do{switch(k.tag){case 3:m=h;k.effectTag|=4096;k.expirationTime=b;var A=Ih(k,m,b);Ug(k,A);break a;case 1:m=h;var u=k.type,B=k.stateNode;if(0===(k.effectTag&64)&&("function"===typeof u.getDerivedStateFromError||null!==B&&"function"===typeof B.componentDidCatch&&(null===La||!La.has(B)))){k.effectTag|=4096;k.expirationTime=b;var H=Jh(k,m,b);Ug(k,H);break a}}k=k.return}while(null!==k)}t=Sh(t)}catch(cj){b=cj;continue}break}while(1)}function Mh(a){a=gd.current;gd.current=
Tc;return null===a?Tc:a}function Vg(a,b){a<ta&&2<a&&(ta=a);null!==b&&a<Yb&&2<a&&(Yb=a,kd=b)}function Kc(a){a>Xb&&(Xb=a)}function tj(){for(;null!==t;)t=Th(t)}function rj(){for(;null!==t&&!yj();)t=Th(t)}function Th(a){var b=zj(a.alternate,a,P);a.memoizedProps=a.pendingProps;null===b&&(b=Sh(a));Uh.current=null;return b}function Sh(a){t=a;do{var b=t.alternate;a=t.return;if(0===(t.effectTag&2048)){b=hj(b,t,P);if(1===P||1!==t.childExpirationTime){for(var c=0,d=t.child;null!==d;){var e=d.expirationTime,
f=d.childExpirationTime;e>c&&(c=e);f>c&&(c=f);d=d.sibling}t.childExpirationTime=c}if(null!==b)return b;null!==a&&0===(a.effectTag&2048)&&(null===a.firstEffect&&(a.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==a.lastEffect&&(a.lastEffect.nextEffect=t.firstEffect),a.lastEffect=t.lastEffect),1<t.effectTag&&(null!==a.lastEffect?a.lastEffect.nextEffect=t:a.firstEffect=t,a.lastEffect=t))}else{b=lj(t);if(null!==b)return b.effectTag&=2047,b;null!==a&&(a.firstEffect=a.lastEffect=null,a.effectTag|=
2048)}b=t.sibling;if(null!==b)return b;t=a}while(null!==t);F===Xa&&(F=Xe);return null}function Ve(a){var b=a.expirationTime;a=a.childExpirationTime;return b>a?b:a}function ab(a){var b=Cc();Da(99,Aj.bind(null,a,b));return null}function Aj(a,b){do xb();while(null!==Zb);if((p&(ca|ma))!==H)throw Error(k(327));var c=a.finishedWork,d=a.finishedExpirationTime;if(null===c)return null;a.finishedWork=null;a.finishedExpirationTime=0;if(c===a.current)throw Error(k(177));a.callbackNode=null;a.callbackExpirationTime=
0;a.callbackPriority=90;a.nextKnownPendingLevel=0;var e=Ve(c);a.firstPendingTime=e;d<=a.lastSuspendedTime?a.firstSuspendedTime=a.lastSuspendedTime=a.nextKnownPendingLevel=0:d<=a.firstSuspendedTime&&(a.firstSuspendedTime=d-1);d<=a.lastPingedTime&&(a.lastPingedTime=0);d<=a.lastExpiredTime&&(a.lastExpiredTime=0);a===U&&(t=U=null,P=0);1<c.effectTag?null!==c.lastEffect?(c.lastEffect.nextEffect=c,e=c.firstEffect):e=c:e=c.firstEffect;if(null!==e){var f=p;p|=ma;Uh.current=null;Ze=tc;var g=kg();if(Xd(g)){if("selectionStart"in
g)var h={start:g.selectionStart,end:g.selectionEnd};else a:{h=(h=g.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&0!==m.rangeCount){h=m.anchorNode;var n=m.anchorOffset,q=m.focusNode;m=m.focusOffset;try{h.nodeType,q.nodeType}catch(sb){h=null;break a}var ba=0,w=-1,y=-1,B=0,D=0,r=g,z=null;b:for(;;){for(var v;;){r!==h||0!==n&&3!==r.nodeType||(w=ba+n);r!==q||0!==m&&3!==r.nodeType||(y=ba+m);3===r.nodeType&&(ba+=r.nodeValue.length);if(null===(v=r.firstChild))break;z=r;
r=v}for(;;){if(r===g)break b;z===h&&++B===n&&(w=ba);z===q&&++D===m&&(y=ba);if(null!==(v=r.nextSibling))break;r=z;z=r.parentNode}r=v}h=-1===w||-1===y?null:{start:w,end:y}}else h=null}h=h||{start:0,end:0}}else h=null;$e={activeElementDetached:null,focusedElem:g,selectionRange:h};tc=!1;l=e;do try{Bj()}catch(sb){if(null===l)throw Error(k(330));Za(l,sb);l=l.nextEffect}while(null!==l);l=e;do try{for(g=a,h=b;null!==l;){var x=l.effectTag;x&16&&Wb(l.stateNode,"");if(x&128){var A=l.alternate;if(null!==A){var u=
A.ref;null!==u&&("function"===typeof u?u(null):u.current=null)}}switch(x&1038){case 2:Gh(l);l.effectTag&=-3;break;case 6:Gh(l);l.effectTag&=-3;Qe(l.alternate,l);break;case 1024:l.effectTag&=-1025;break;case 1028:l.effectTag&=-1025;Qe(l.alternate,l);break;case 4:Qe(l.alternate,l);break;case 8:n=l,Dh(g,n,h),Eh(n)}l=l.nextEffect}}catch(sb){if(null===l)throw Error(k(330));Za(l,sb);l=l.nextEffect}while(null!==l);u=$e;A=kg();x=u.focusedElem;h=u.selectionRange;if(A!==x&&x&&x.ownerDocument&&jg(x.ownerDocument.documentElement,
x)){null!==h&&Xd(x)&&(A=h.start,u=h.end,void 0===u&&(u=A),"selectionStart"in x?(x.selectionStart=A,x.selectionEnd=Math.min(u,x.value.length)):(u=(A=x.ownerDocument||document)&&A.defaultView||window,u.getSelection&&(u=u.getSelection(),n=x.textContent.length,g=Math.min(h.start,n),h=void 0===h.end?g:Math.min(h.end,n),!u.extend&&g>h&&(n=h,h=g,g=n),n=ig(x,g),q=ig(x,h),n&&q&&(1!==u.rangeCount||u.anchorNode!==n.node||u.anchorOffset!==n.offset||u.focusNode!==q.node||u.focusOffset!==q.offset)&&(A=A.createRange(),
A.setStart(n.node,n.offset),u.removeAllRanges(),g>h?(u.addRange(A),u.extend(q.node,q.offset)):(A.setEnd(q.node,q.offset),u.addRange(A))))));A=[];for(u=x;u=u.parentNode;)1===u.nodeType&&A.push({element:u,left:u.scrollLeft,top:u.scrollTop});"function"===typeof x.focus&&x.focus();for(x=0;x<A.length;x++)u=A[x],u.element.scrollLeft=u.left,u.element.scrollTop=u.top}tc=!!Ze;$e=Ze=null;a.current=c;l=e;do try{for(x=a;null!==l;){var F=l.effectTag;F&36&&oj(x,l.alternate,l);if(F&128){A=void 0;var E=l.ref;if(null!==
E){var G=l.stateNode;switch(l.tag){case 5:A=G;break;default:A=G}"function"===typeof E?E(A):E.current=A}}l=l.nextEffect}}catch(sb){if(null===l)throw Error(k(330));Za(l,sb);l=l.nextEffect}while(null!==l);l=null;Cj();p=f}else a.current=c;if(ld)ld=!1,Zb=a,$b=b;else for(l=e;null!==l;)b=l.nextEffect,l.nextEffect=null,l=b;b=a.firstPendingTime;0===b&&(La=null);1073741823===b?a===af?ac++:(ac=0,af=a):ac=0;"function"===typeof bf&&bf(c.stateNode,d);V(a);if(cd)throw cd=!1,a=Se,Se=null,a;if((p&Ye)!==H)return null;
ha();return null}function Bj(){for(;null!==l;){var a=l.effectTag;0!==(a&256)&&nj(l.alternate,l);0===(a&512)||ld||(ld=!0,Ng(97,function(){xb();return null}));l=l.nextEffect}}function xb(){if(90!==$b){var a=97<$b?97:$b;$b=90;return Da(a,Dj)}}function Dj(){if(null===Zb)return!1;var a=Zb;Zb=null;if((p&(ca|ma))!==H)throw Error(k(331));var b=p;p|=ma;for(a=a.current.firstEffect;null!==a;){try{var c=a;if(0!==(c.effectTag&512))switch(c.tag){case 0:case 11:case 15:case 22:Ah(5,c),Bh(5,c)}}catch(d){if(null===
a)throw Error(k(330));Za(a,d)}c=a.nextEffect;a.nextEffect=null;a=c}p=b;ha();return!0}function Vh(a,b,c){b=Le(c,b);b=Ih(a,b,1073741823);Fa(a,b);a=ed(a,1073741823);null!==a&&V(a)}function Za(a,b){if(3===a.tag)Vh(a,a,b);else for(var c=a.return;null!==c;){if(3===c.tag){Vh(c,a,b);break}else if(1===c.tag){var d=c.stateNode;if("function"===typeof c.type.getDerivedStateFromError||"function"===typeof d.componentDidCatch&&(null===La||!La.has(d))){a=Le(b,a);a=Jh(c,a,1073741823);Fa(c,a);c=ed(c,1073741823);null!==
c&&V(c);break}}c=c.return}}function xj(a,b,c){var d=a.pingCache;null!==d&&d.delete(b);U===a&&P===c?F===bd||F===ad&&1073741823===ta&&Y()-Re<Ph?$a(a,P):jd=!0:Kh(a,c)&&(b=a.lastPingedTime,0!==b&&b<c||(a.lastPingedTime=c,V(a)))}function qj(a,b){var c=a.stateNode;null!==c&&c.delete(b);b=0;0===b&&(b=ka(),b=Va(b,a,null));a=ed(a,b);null!==a&&V(a)}function Ej(a){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var b=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(b.isDisabled||!b.supportsFiber)return!0;try{var c=
b.inject(a);bf=function(a,e){try{b.onCommitFiberRoot(c,a,void 0,64===(a.current.effectTag&64))}catch(f){}};Ne=function(a){try{b.onCommitFiberUnmount(c,a)}catch(e){}}}catch(d){}return!0}function Fj(a,b,c,d){this.tag=a;this.key=c;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=b;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=d;this.effectTag=0;this.lastEffect=this.firstEffect=this.nextEffect=
null;this.childExpirationTime=this.expirationTime=0;this.alternate=null}function Ge(a){a=a.prototype;return!(!a||!a.isReactComponent)}function Gj(a){if("function"===typeof a)return Ge(a)?1:0;if(void 0!==a&&null!==a){a=a.$$typeof;if(a===zd)return 11;if(a===Ad)return 14}return 2}function Sa(a,b){var c=a.alternate;null===c?(c=la(a.tag,b,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.effectTag=0,c.nextEffect=null,c.firstEffect=
null,c.lastEffect=null);c.childExpirationTime=a.childExpirationTime;c.expirationTime=a.expirationTime;c.child=a.child;c.memoizedProps=a.memoizedProps;c.memoizedState=a.memoizedState;c.updateQueue=a.updateQueue;b=a.dependencies;c.dependencies=null===b?null:{expirationTime:b.expirationTime,firstContext:b.firstContext,responders:b.responders};c.sibling=a.sibling;c.index=a.index;c.ref=a.ref;return c}function Oc(a,b,c,d,e,f){var g=2;d=a;if("function"===typeof a)Ge(a)&&(g=1);else if("string"===typeof a)g=
5;else a:switch(a){case Ma:return Ha(c.children,e,f,b);case Hj:g=8;e|=7;break;case Af:g=8;e|=1;break;case kc:return a=la(12,c,b,e|8),a.elementType=kc,a.type=kc,a.expirationTime=f,a;case lc:return a=la(13,c,b,e),a.type=lc,a.elementType=lc,a.expirationTime=f,a;case yd:return a=la(19,c,b,e),a.elementType=yd,a.expirationTime=f,a;default:if("object"===typeof a&&null!==a)switch(a.$$typeof){case Cf:g=10;break a;case Bf:g=9;break a;case zd:g=11;break a;case Ad:g=14;break a;case Ef:g=16;d=null;break a;case Df:g=
22;break a}throw Error(k(130,null==a?a:typeof a,""));}b=la(g,c,b,e);b.elementType=a;b.type=d;b.expirationTime=f;return b}function Ha(a,b,c,d){a=la(7,a,d,b);a.expirationTime=c;return a}function qe(a,b,c){a=la(6,a,null,b);a.expirationTime=c;return a}function re(a,b,c){b=la(4,null!==a.children?a.children:[],a.key,b);b.expirationTime=c;b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation};return b}function Ij(a,b,c){this.tag=b;this.current=null;this.containerInfo=
a;this.pingCache=this.pendingChildren=null;this.finishedExpirationTime=0;this.finishedWork=null;this.timeoutHandle=-1;this.pendingContext=this.context=null;this.hydrate=c;this.callbackNode=null;this.callbackPriority=90;this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Kh(a,b){var c=a.firstSuspendedTime;a=a.lastSuspendedTime;return 0!==c&&c>=b&&a<=b}function Ya(a,b){var c=a.firstSuspendedTime,d=a.lastSuspendedTime;
c<b&&(a.firstSuspendedTime=b);if(d>b||0===c)a.lastSuspendedTime=b;b<=a.lastPingedTime&&(a.lastPingedTime=0);b<=a.lastExpiredTime&&(a.lastExpiredTime=0)}function yh(a,b){b>a.firstPendingTime&&(a.firstPendingTime=b);var c=a.firstSuspendedTime;0!==c&&(b>=c?a.firstSuspendedTime=a.lastSuspendedTime=a.nextKnownPendingLevel=0:b>=a.lastSuspendedTime&&(a.lastSuspendedTime=b+1),b>a.nextKnownPendingLevel&&(a.nextKnownPendingLevel=b))}function Ue(a,b){var c=a.lastExpiredTime;if(0===c||c>b)a.lastExpiredTime=b}
function md(a,b,c,d){var e=b.current,f=ka(),g=Vb.suspense;f=Va(f,e,g);a:if(c){c=c._reactInternalFiber;b:{if(Na(c)!==c||1!==c.tag)throw Error(k(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break b;case 1:if(N(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break b}}h=h.return}while(null!==h);throw Error(k(171));}if(1===c.tag){var m=c.type;if(N(m)){c=Gg(c,m,h);break a}}c=h}else c=Ca;null===b.context?b.context=c:b.pendingContext=c;b=Ea(f,g);b.payload={element:a};d=void 0===
d?null:d;null!==d&&(b.callback=d);Fa(e,b);Ja(e,f);return f}function cf(a){a=a.current;if(!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function Wh(a,b){a=a.memoizedState;null!==a&&null!==a.dehydrated&&a.retryTime<b&&(a.retryTime=b)}function df(a,b){Wh(a,b);(a=a.alternate)&&Wh(a,b)}function ef(a,b,c){c=null!=c&&!0===c.hydrate;var d=new Ij(a,b,c),e=la(3,null,null,2===b?7:1===b?3:0);d.current=e;e.stateNode=d;ne(e);a[Lb]=d.current;c&&0!==b&&
xi(a,9===a.nodeType?a:a.ownerDocument);this._internalRoot=d}function bc(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||" react-mount-point-unstable "!==a.nodeValue))}function Jj(a,b){b||(b=a?9===a.nodeType?a.documentElement:a.firstChild:null,b=!(!b||1!==b.nodeType||!b.hasAttribute("data-reactroot")));if(!b)for(var c;c=a.lastChild;)a.removeChild(c);return new ef(a,0,b?{hydrate:!0}:void 0)}function nd(a,b,c,d,e){var f=c._reactRootContainer;if(f){var g=f._internalRoot;
if("function"===typeof e){var h=e;e=function(){var a=cf(g);h.call(a)}}md(b,g,a,e)}else{f=c._reactRootContainer=Jj(c,d);g=f._internalRoot;if("function"===typeof e){var m=e;e=function(){var a=cf(g);m.call(a)}}Rh(function(){md(b,g,a,e)})}return cf(g)}function Kj(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:gb,key:null==d?null:""+d,children:a,containerInfo:b,implementation:c}}function Xh(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;
if(!bc(b))throw Error(k(200));return Kj(a,b,null,c)}if(!ea)throw Error(k(227));var ki=function(a,b,c,d,e,f,g,h,m){var n=Array.prototype.slice.call(arguments,3);try{b.apply(c,n)}catch(C){this.onError(C)}},yb=!1,gc=null,hc=!1,pd=null,li={onError:function(a){yb=!0;gc=a}},td=null,rf=null,mf=null,ic=null,cb={},jc=[],qd={},db={},rd={},wa=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),M=ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.assign,
sd=null,eb=null,fb=null,ee=function(a,b){return a(b)},eg=function(a,b,c,d,e){return a(b,c,d,e)},vd=function(){},vf=ee,Oa=!1,wd=!1,Z=ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.Scheduler,Lj=Z.unstable_cancelCallback,ff=Z.unstable_now,$f=Z.unstable_scheduleCallback,Mj=Z.unstable_shouldYield,Yh=Z.unstable_requestPaint,Pd=Z.unstable_runWithPriority,Nj=Z.unstable_getCurrentPriorityLevel,Oj=Z.unstable_ImmediatePriority,Zh=Z.unstable_UserBlockingPriority,ag=Z.unstable_NormalPriority,Pj=Z.unstable_LowPriority,
Qj=Z.unstable_IdlePriority,oi=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wf=Object.prototype.hasOwnProperty,yf={},xf={},E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){E[a]=
new L(a,0,!1,a,null,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var b=a[0];E[b]=new L(b,1,!1,a[1],null,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(a){E[a]=new L(a,2,!1,a.toLowerCase(),null,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){E[a]=new L(a,2,!1,a,null,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){E[a]=
new L(a,3,!1,a.toLowerCase(),null,!1)});["checked","multiple","muted","selected"].forEach(function(a){E[a]=new L(a,3,!0,a,null,!1)});["capture","download"].forEach(function(a){E[a]=new L(a,4,!1,a,null,!1)});["cols","rows","size","span"].forEach(function(a){E[a]=new L(a,6,!1,a,null,!1)});["rowSpan","start"].forEach(function(a){E[a]=new L(a,5,!1,a.toLowerCase(),null,!1)});var gf=/[\-:]([a-z])/g,hf=function(a){return a[1].toUpperCase()};"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var b=
a.replace(gf,hf);E[b]=new L(b,1,!1,a,null,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var b=a.replace(gf,hf);E[b]=new L(b,1,!1,a,"http://www.w3.org/1999/xlink",!1)});["xml:base","xml:lang","xml:space"].forEach(function(a){var b=a.replace(gf,hf);E[b]=new L(b,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1)});["tabIndex","crossOrigin"].forEach(function(a){E[a]=new L(a,1,!1,a.toLowerCase(),null,!1)});E.xlinkHref=new L("xlinkHref",1,
!1,"xlink:href","http://www.w3.org/1999/xlink",!0);["src","href","action","formAction"].forEach(function(a){E[a]=new L(a,1,!1,a.toLowerCase(),null,!0)});var da=ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;da.hasOwnProperty("ReactCurrentDispatcher")||(da.ReactCurrentDispatcher={current:null});da.hasOwnProperty("ReactCurrentBatchConfig")||(da.ReactCurrentBatchConfig={suspense:null});var si=/^(.*)[\\\/]/,Q="function"===typeof Symbol&&Symbol.for,Pc=Q?Symbol.for("react.element"):60103,gb=Q?Symbol.for("react.portal"):
60106,Ma=Q?Symbol.for("react.fragment"):60107,Af=Q?Symbol.for("react.strict_mode"):60108,kc=Q?Symbol.for("react.profiler"):60114,Cf=Q?Symbol.for("react.provider"):60109,Bf=Q?Symbol.for("react.context"):60110,Hj=Q?Symbol.for("react.concurrent_mode"):60111,zd=Q?Symbol.for("react.forward_ref"):60112,lc=Q?Symbol.for("react.suspense"):60113,yd=Q?Symbol.for("react.suspense_list"):60120,Ad=Q?Symbol.for("react.memo"):60115,Ef=Q?Symbol.for("react.lazy"):60116,Df=Q?Symbol.for("react.block"):60121,zf="function"===
typeof Symbol&&Symbol.iterator,od,xh=function(a){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c,d,e)})}:a}(function(a,b){if("http://www.w3.org/2000/svg"!==a.namespaceURI||"innerHTML"in a)a.innerHTML=b;else{od=od||document.createElement("div");od.innerHTML="<svg>"+b.valueOf().toString()+"</svg>";for(b=od.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}}),Wb=function(a,
b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType){c.nodeValue=b;return}}a.textContent=b},ib={animationend:nc("Animation","AnimationEnd"),animationiteration:nc("Animation","AnimationIteration"),animationstart:nc("Animation","AnimationStart"),transitionend:nc("Transition","TransitionEnd")},Id={},Of={};wa&&(Of=document.createElement("div").style,"AnimationEvent"in window||(delete ib.animationend.animation,delete ib.animationiteration.animation,delete ib.animationstart.animation),"TransitionEvent"in
window||delete ib.transitionend.transition);var $h=oc("animationend"),ai=oc("animationiteration"),bi=oc("animationstart"),ci=oc("transitionend"),Db="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pf=new ("function"===typeof WeakMap?WeakMap:Map),Ab=null,wi=function(a){if(a){var b=a._dispatchListeners,c=a._dispatchInstances;
if(Array.isArray(b))for(var d=0;d<b.length&&!a.isPropagationStopped();d++)lf(a,b[d],c[d]);else b&&lf(a,b,c);a._dispatchListeners=null;a._dispatchInstances=null;a.isPersistent()||a.constructor.release(a)}},qc=[],Rd=!1,fa=[],xa=null,ya=null,za=null,Eb=new Map,Fb=new Map,Jb=[],Nd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),
yi="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" "),dg={},cg=new Map,Td=new Map,Rj=["abort","abort",$h,"animationEnd",ai,"animationIteration",bi,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata",
"loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",ci,"transitionEnd","waiting","waiting"];Sd("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),
0);Sd("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Sd(Rj,2);(function(a,b){for(var c=0;c<a.length;c++)Td.set(a[c],b)})("change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),0);var Hi=Zh,Gi=Pd,tc=!0,Kb={animationIterationCount:!0,
borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,
strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sj=["Webkit","ms","Moz","O"];Object.keys(Kb).forEach(function(a){Sj.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1);Kb[b]=Kb[a]})});var Ii=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),ng="$",og="/$",$d="$?",Zd="$!",Ze=null,$e=null,We="function"===typeof setTimeout?setTimeout:void 0,vj="function"===
typeof clearTimeout?clearTimeout:void 0,jf=Math.random().toString(36).slice(2),Aa="__reactInternalInstance$"+jf,vc="__reactEventHandlers$"+jf,Lb="__reactContainere$"+jf,Ba=null,ce=null,wc=null;M(R.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():"unknown"!==typeof a.returnValue&&(a.returnValue=!1),this.isDefaultPrevented=xc)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():"unknown"!==
typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=xc)},persist:function(){this.isPersistent=xc},isPersistent:yc,destructor:function(){var a=this.constructor.Interface,b;for(b in a)this[b]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null;this.isPropagationStopped=this.isDefaultPrevented=yc;this._dispatchInstances=this._dispatchListeners=null}});R.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(a){return a.timeStamp||
Date.now()},defaultPrevented:null,isTrusted:null};R.extend=function(a){function b(){return c.apply(this,arguments)}var c=this,d=function(){};d.prototype=c.prototype;d=new d;M(d,b.prototype);b.prototype=d;b.prototype.constructor=b;b.Interface=M({},c.Interface,a);b.extend=c.extend;sg(b);return b};sg(R);var Tj=R.extend({data:null}),Uj=R.extend({data:null}),Ni=[9,13,27,32],de=wa&&"CompositionEvent"in window,cc=null;wa&&"documentMode"in document&&(cc=document.documentMode);var Vj=wa&&"TextEvent"in window&&
!cc,xg=wa&&(!de||cc&&8<cc&&11>=cc),wg=String.fromCharCode(32),ua={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},
dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},vg=!1,mb=!1,Wj={eventTypes:ua,extractEvents:function(a,b,c,d,e){var f;if(de)b:{switch(a){case "compositionstart":var g=ua.compositionStart;break b;case "compositionend":g=ua.compositionEnd;break b;case "compositionupdate":g=
ua.compositionUpdate;break b}g=void 0}else mb?tg(a,c)&&(g=ua.compositionEnd):"keydown"===a&&229===c.keyCode&&(g=ua.compositionStart);g?(xg&&"ko"!==c.locale&&(mb||g!==ua.compositionStart?g===ua.compositionEnd&&mb&&(f=rg()):(Ba=d,ce="value"in Ba?Ba.value:Ba.textContent,mb=!0)),e=Tj.getPooled(g,b,c,d),f?e.data=f:(f=ug(c),null!==f&&(e.data=f)),lb(e),f=e):f=null;(a=Vj?Oi(a,c):Pi(a,c))?(b=Uj.getPooled(ua.beforeInput,b,c,d),b.data=a,lb(b)):b=null;return null===f?b:null===b?f:[f,b]}},Qi={color:!0,date:!0,
datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},Ag={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}},Mb=null,Nb=null,kf=!1;wa&&(kf=Tf("input")&&(!document.documentMode||9<document.documentMode));var Xj={eventTypes:Ag,_isInputEventSupported:kf,extractEvents:function(a,b,c,d,e){e=b?Pa(b):window;var f=
e.nodeName&&e.nodeName.toLowerCase();if("select"===f||"input"===f&&"file"===e.type)var g=Si;else if(yg(e))if(kf)g=Wi;else{g=Ui;var h=Ti}else(f=e.nodeName)&&"input"===f.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)&&(g=Vi);if(g&&(g=g(a,b)))return zg(g,c,d);h&&h(a,e,b);"blur"===a&&(a=e._wrapperState)&&a.controlled&&"number"===e.type&&Ed(e,"number",e.value)}},dc=R.extend({view:null,detail:null}),Yi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},di=0,ei=0,fi=!1,gi=!1,ec=dc.extend({screenX:null,
screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:fe,button:null,buttons:null,relatedTarget:function(a){return a.relatedTarget||(a.fromElement===a.srcElement?a.toElement:a.fromElement)},movementX:function(a){if("movementX"in a)return a.movementX;var b=di;di=a.screenX;return fi?"mousemove"===a.type?a.screenX-b:0:(fi=!0,0)},movementY:function(a){if("movementY"in a)return a.movementY;var b=ei;ei=a.screenY;return gi?"mousemove"===
a.type?a.screenY-b:0:(gi=!0,0)}}),hi=ec.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),fc={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout",
"pointerover"]}},Yj={eventTypes:fc,extractEvents:function(a,b,c,d,e){var f="mouseover"===a||"pointerover"===a,g="mouseout"===a||"pointerout"===a;if(f&&0===(e&32)&&(c.relatedTarget||c.fromElement)||!g&&!f)return null;f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window;if(g){if(g=b,b=(b=c.relatedTarget||c.toElement)?Bb(b):null,null!==b){var h=Na(b);if(b!==h||5!==b.tag&&6!==b.tag)b=null}}else g=null;if(g===b)return null;if("mouseout"===a||"mouseover"===a){var m=ec;var n=fc.mouseLeave;
var l=fc.mouseEnter;var k="mouse"}else if("pointerout"===a||"pointerover"===a)m=hi,n=fc.pointerLeave,l=fc.pointerEnter,k="pointer";a=null==g?f:Pa(g);f=null==b?f:Pa(b);n=m.getPooled(n,g,c,d);n.type=k+"leave";n.target=a;n.relatedTarget=f;c=m.getPooled(l,b,c,d);c.type=k+"enter";c.target=f;c.relatedTarget=a;d=g;k=b;if(d&&k)a:{m=d;l=k;g=0;for(a=m;a;a=pa(a))g++;a=0;for(b=l;b;b=pa(b))a++;for(;0<g-a;)m=pa(m),g--;for(;0<a-g;)l=pa(l),a--;for(;g--;){if(m===l||m===l.alternate)break a;m=pa(m);l=pa(l)}m=null}else m=
null;l=m;for(m=[];d&&d!==l;){g=d.alternate;if(null!==g&&g===l)break;m.push(d);d=pa(d)}for(d=[];k&&k!==l;){g=k.alternate;if(null!==g&&g===l)break;d.push(k);k=pa(k)}for(k=0;k<m.length;k++)be(m[k],"bubbled",n);for(k=d.length;0<k--;)be(d[k],"captured",c);return 0===(e&64)?[n]:[n,c]}},Qa="function"===typeof Object.is?Object.is:Zi,$i=Object.prototype.hasOwnProperty,Zj=wa&&"documentMode"in document&&11>=document.documentMode,Eg={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},
dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},nb=null,he=null,Pb=null,ge=!1,ak={eventTypes:Eg,extractEvents:function(a,b,c,d,e,f){e=f||(d.window===d?d.document:9===d.nodeType?d:d.ownerDocument);if(!(f=!e)){a:{e=Jd(e);f=rd.onSelect;for(var g=0;g<f.length;g++)if(!e.has(f[g])){e=!1;break a}e=!0}f=!e}if(f)return null;e=b?Pa(b):window;switch(a){case "focus":if(yg(e)||"true"===e.contentEditable)nb=e,he=b,Pb=null;break;case "blur":Pb=he=nb=null;
break;case "mousedown":ge=!0;break;case "contextmenu":case "mouseup":case "dragend":return ge=!1,Dg(c,d);case "selectionchange":if(Zj)break;case "keydown":case "keyup":return Dg(c,d)}return null}},bk=R.extend({animationName:null,elapsedTime:null,pseudoElement:null}),ck=R.extend({clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),dk=dc.extend({relatedTarget:null}),ek={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",
Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",
224:"Meta"},gk=dc.extend({key:function(a){if(a.key){var b=ek[a.key]||a.key;if("Unidentified"!==b)return b}return"keypress"===a.type?(a=Ac(a),13===a?"Enter":String.fromCharCode(a)):"keydown"===a.type||"keyup"===a.type?fk[a.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:fe,charCode:function(a){return"keypress"===a.type?Ac(a):0},keyCode:function(a){return"keydown"===a.type||"keyup"===a.type?a.keyCode:0},which:function(a){return"keypress"===
a.type?Ac(a):"keydown"===a.type||"keyup"===a.type?a.keyCode:0}}),hk=ec.extend({dataTransfer:null}),ik=dc.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:fe}),jk=R.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),kk=ec.extend({deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?
-a.wheelDelta:0},deltaZ:null,deltaMode:null}),lk={eventTypes:dg,extractEvents:function(a,b,c,d,e){e=cg.get(a);if(!e)return null;switch(a){case "keypress":if(0===Ac(c))return null;case "keydown":case "keyup":a=gk;break;case "blur":case "focus":a=dk;break;case "click":if(2===c.button)return null;case "auxclick":case "dblclick":case "mousedown":case "mousemove":case "mouseup":case "mouseout":case "mouseover":case "contextmenu":a=ec;break;case "drag":case "dragend":case "dragenter":case "dragexit":case "dragleave":case "dragover":case "dragstart":case "drop":a=
hk;break;case "touchcancel":case "touchend":case "touchmove":case "touchstart":a=ik;break;case $h:case ai:case bi:a=bk;break;case ci:a=jk;break;case "scroll":a=dc;break;case "wheel":a=kk;break;case "copy":case "cut":case "paste":a=ck;break;case "gotpointercapture":case "lostpointercapture":case "pointercancel":case "pointerdown":case "pointermove":case "pointerout":case "pointerover":case "pointerup":a=hi;break;default:a=R}b=a.getPooled(e,b,c,d);lb(b);return b}};(function(a){if(ic)throw Error(k(101));
ic=Array.prototype.slice.call(a);nf()})("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" "));(function(a,b,c){td=a;rf=b;mf=c})(ae,Hb,Pa);pf({SimpleEventPlugin:lk,EnterLeaveEventPlugin:Yj,ChangeEventPlugin:Xj,SelectEventPlugin:ak,BeforeInputEventPlugin:Wj});var ie=[],ob=-1,Ca={},B={current:Ca},G={current:!1},Ra=Ca,bj=Pd,je=$f,Rg=Lj,aj=Nj,Dc=Oj,Ig=Zh,Jg=ag,Kg=Pj,Lg=Qj,Qg={},yj=Mj,Cj=void 0!==Yh?Yh:function(){},qa=null,
Ec=null,ke=!1,ii=ff(),Y=1E4>ii?ff:function(){return ff()-ii},Ic={current:null},Hc=null,qb=null,Gc=null,Tg=0,Jc=2,Ga=!1,Vb=da.ReactCurrentBatchConfig,$g=(new ea.Component).refs,Mc={isMounted:function(a){return(a=a._reactInternalFiber)?Na(a)===a:!1},enqueueSetState:function(a,b,c){a=a._reactInternalFiber;var d=ka(),e=Vb.suspense;d=Va(d,a,e);e=Ea(d,e);e.payload=b;void 0!==c&&null!==c&&(e.callback=c);Fa(a,e);Ja(a,d)},enqueueReplaceState:function(a,b,c){a=a._reactInternalFiber;var d=ka(),e=Vb.suspense;
d=Va(d,a,e);e=Ea(d,e);e.tag=1;e.payload=b;void 0!==c&&null!==c&&(e.callback=c);Fa(a,e);Ja(a,d)},enqueueForceUpdate:function(a,b){a=a._reactInternalFiber;var c=ka(),d=Vb.suspense;c=Va(c,a,d);d=Ea(c,d);d.tag=Jc;void 0!==b&&null!==b&&(d.callback=b);Fa(a,d);Ja(a,c)}},Qc=Array.isArray,wb=ah(!0),Fe=ah(!1),Sb={},ja={current:Sb},Ub={current:Sb},Tb={current:Sb},D={current:0},Sc=da.ReactCurrentDispatcher,X=da.ReactCurrentBatchConfig,Ia=0,z=null,K=null,J=null,Uc=!1,Tc={readContext:W,useCallback:S,useContext:S,
useEffect:S,useImperativeHandle:S,useLayoutEffect:S,useMemo:S,useReducer:S,useRef:S,useState:S,useDebugValue:S,useResponder:S,useDeferredValue:S,useTransition:S},dj={readContext:W,useCallback:ih,useContext:W,useEffect:eh,useImperativeHandle:function(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return ze(4,2,gh.bind(null,b,a),c)},useLayoutEffect:function(a,b){return ze(4,2,a,b)},useMemo:function(a,b){var c=ub();b=void 0===b?null:b;a=a();c.memoizedState=[a,b];return a},useReducer:function(a,b,c){var d=
ub();b=void 0!==c?c(b):b;d.memoizedState=d.baseState=b;a=d.queue={pending:null,dispatch:null,lastRenderedReducer:a,lastRenderedState:b};a=a.dispatch=ch.bind(null,z,a);return[d.memoizedState,a]},useRef:function(a){var b=ub();a={current:a};return b.memoizedState=a},useState:xe,useDebugValue:Be,useResponder:ue,useDeferredValue:function(a,b){var c=xe(a),d=c[0],e=c[1];eh(function(){var c=X.suspense;X.suspense=void 0===b?null:b;try{e(a)}finally{X.suspense=c}},[a,b]);return d},useTransition:function(a){var b=
xe(!1),c=b[0];b=b[1];return[ih(Ce.bind(null,b,a),[b,a]),c]}},ej={readContext:W,useCallback:Yc,useContext:W,useEffect:Xc,useImperativeHandle:hh,useLayoutEffect:fh,useMemo:jh,useReducer:Vc,useRef:dh,useState:function(a){return Vc(Ua)},useDebugValue:Be,useResponder:ue,useDeferredValue:function(a,b){var c=Vc(Ua),d=c[0],e=c[1];Xc(function(){var c=X.suspense;X.suspense=void 0===b?null:b;try{e(a)}finally{X.suspense=c}},[a,b]);return d},useTransition:function(a){var b=Vc(Ua),c=b[0];b=b[1];return[Yc(Ce.bind(null,
b,a),[b,a]),c]}},fj={readContext:W,useCallback:Yc,useContext:W,useEffect:Xc,useImperativeHandle:hh,useLayoutEffect:fh,useMemo:jh,useReducer:Wc,useRef:dh,useState:function(a){return Wc(Ua)},useDebugValue:Be,useResponder:ue,useDeferredValue:function(a,b){var c=Wc(Ua),d=c[0],e=c[1];Xc(function(){var c=X.suspense;X.suspense=void 0===b?null:b;try{e(a)}finally{X.suspense=c}},[a,b]);return d},useTransition:function(a){var b=Wc(Ua),c=b[0];b=b[1];return[Yc(Ce.bind(null,b,a),[b,a]),c]}},ra=null,Ka=null,Wa=
!1,gj=da.ReactCurrentOwner,ia=!1,Je={dehydrated:null,retryTime:0};var jj=function(a,b,c,d){for(c=b.child;null!==c;){if(5===c.tag||6===c.tag)a.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return;c=c.sibling}};var wh=function(a){};var ij=function(a,b,c,d,e){var f=a.memoizedProps;if(f!==d){var g=b.stateNode;Ta(ja.current);a=null;switch(c){case "input":f=
Cd(g,f);d=Cd(g,d);a=[];break;case "option":f=Fd(g,f);d=Fd(g,d);a=[];break;case "select":f=M({},f,{value:void 0});d=M({},d,{value:void 0});a=[];break;case "textarea":f=Gd(g,f);d=Gd(g,d);a=[];break;default:"function"!==typeof f.onClick&&"function"===typeof d.onClick&&(g.onclick=uc)}Ud(c,d);var h,m;c=null;for(h in f)if(!d.hasOwnProperty(h)&&f.hasOwnProperty(h)&&null!=f[h])if("style"===h)for(m in g=f[h],g)g.hasOwnProperty(m)&&(c||(c={}),c[m]="");else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==
h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(db.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in d){var k=d[h];g=null!=f?f[h]:void 0;if(d.hasOwnProperty(h)&&k!==g&&(null!=k||null!=g))if("style"===h)if(g){for(m in g)!g.hasOwnProperty(m)||k&&k.hasOwnProperty(m)||(c||(c={}),c[m]="");for(m in k)k.hasOwnProperty(m)&&g[m]!==k[m]&&(c||(c={}),c[m]=k[m])}else c||(a||(a=[]),a.push(h,c)),c=k;else"dangerouslySetInnerHTML"===h?(k=k?k.__html:void 0,g=g?g.__html:void 0,null!=k&&g!==k&&(a=a||
[]).push(h,k)):"children"===h?g===k||"string"!==typeof k&&"number"!==typeof k||(a=a||[]).push(h,""+k):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(db.hasOwnProperty(h)?(null!=k&&oa(e,h),a||g===k||(a=[])):(a=a||[]).push(h,k))}c&&(a=a||[]).push("style",c);e=a;if(b.updateQueue=e)b.effectTag|=4}};var kj=function(a,b,c,d){c!==d&&(b.effectTag|=4)};var pj="function"===typeof WeakSet?WeakSet:Set,wj="function"===typeof WeakMap?WeakMap:Map,sj=Math.ceil,gd=da.ReactCurrentDispatcher,
Uh=da.ReactCurrentOwner,H=0,Ye=8,ca=16,ma=32,Xa=0,hd=1,Oh=2,ad=3,bd=4,Xe=5,p=H,U=null,t=null,P=0,F=Xa,id=null,ta=1073741823,Yb=1073741823,kd=null,Xb=0,jd=!1,Re=0,Ph=500,l=null,cd=!1,Se=null,La=null,ld=!1,Zb=null,$b=90,bb=null,ac=0,af=null,dd=0,Ja=function(a,b){if(50<ac)throw ac=0,af=null,Error(k(185));a=ed(a,b);if(null!==a){var c=Cc();1073741823===b?(p&Ye)!==H&&(p&(ca|ma))===H?Te(a):(V(a),p===H&&ha()):V(a);(p&4)===H||98!==c&&99!==c||(null===bb?bb=new Map([[a,b]]):(c=bb.get(a),(void 0===c||c>b)&&bb.set(a,
b)))}};var zj=function(a,b,c){var d=b.expirationTime;if(null!==a){var e=b.pendingProps;if(a.memoizedProps!==e||G.current)ia=!0;else{if(d<c){ia=!1;switch(b.tag){case 3:sh(b);Ee();break;case 5:bh(b);if(b.mode&4&&1!==c&&e.hidden)return b.expirationTime=b.childExpirationTime=1,null;break;case 1:N(b.type)&&Bc(b);break;case 4:se(b,b.stateNode.containerInfo);break;case 10:d=b.memoizedProps.value;e=b.type._context;y(Ic,e._currentValue);e._currentValue=d;break;case 13:if(null!==b.memoizedState){d=b.child.childExpirationTime;
if(0!==d&&d>=c)return th(a,b,c);y(D,D.current&1);b=sa(a,b,c);return null!==b?b.sibling:null}y(D,D.current&1);break;case 19:d=b.childExpirationTime>=c;if(0!==(a.effectTag&64)){if(d)return vh(a,b,c);b.effectTag|=64}e=b.memoizedState;null!==e&&(e.rendering=null,e.tail=null);y(D,D.current);if(!d)return null}return sa(a,b,c)}ia=!1}}else ia=!1;b.expirationTime=0;switch(b.tag){case 2:d=b.type;null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2);a=b.pendingProps;e=pb(b,B.current);rb(b,c);e=we(null,
b,d,a,e,c);b.effectTag|=1;if("object"===typeof e&&null!==e&&"function"===typeof e.render&&void 0===e.$$typeof){b.tag=1;b.memoizedState=null;b.updateQueue=null;if(N(d)){var f=!0;Bc(b)}else f=!1;b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null;ne(b);var g=d.getDerivedStateFromProps;"function"===typeof g&&Lc(b,d,g,a);e.updater=Mc;b.stateNode=e;e._reactInternalFiber=b;pe(b,d,a,c);b=Ie(null,b,d,!0,f,c)}else b.tag=0,T(null,b,e,c),b=b.child;return b;case 16:a:{e=b.elementType;null!==a&&(a.alternate=
null,b.alternate=null,b.effectTag|=2);a=b.pendingProps;ri(e);if(1!==e._status)throw e._result;e=e._result;b.type=e;f=b.tag=Gj(e);a=aa(e,a);switch(f){case 0:b=He(null,b,e,a,c);break a;case 1:b=rh(null,b,e,a,c);break a;case 11:b=nh(null,b,e,a,c);break a;case 14:b=oh(null,b,e,aa(e.type,a),d,c);break a}throw Error(k(306,e,""));}return b;case 0:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),He(a,b,d,e,c);case 1:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),rh(a,b,d,e,c);
case 3:sh(b);d=b.updateQueue;if(null===a||null===d)throw Error(k(282));d=b.pendingProps;e=b.memoizedState;e=null!==e?e.element:null;oe(a,b);Qb(b,d,null,c);d=b.memoizedState.element;if(d===e)Ee(),b=sa(a,b,c);else{if(e=b.stateNode.hydrate)Ka=kb(b.stateNode.containerInfo.firstChild),ra=b,e=Wa=!0;if(e)for(c=Fe(b,null,d,c),b.child=c;c;)c.effectTag=c.effectTag&-3|1024,c=c.sibling;else T(a,b,d,c),Ee();b=b.child}return b;case 5:return bh(b),null===a&&De(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:
null,g=e.children,Yd(d,e)?g=null:null!==f&&Yd(d,f)&&(b.effectTag|=16),qh(a,b),b.mode&4&&1!==c&&e.hidden?(b.expirationTime=b.childExpirationTime=1,b=null):(T(a,b,g,c),b=b.child),b;case 6:return null===a&&De(b),null;case 13:return th(a,b,c);case 4:return se(b,b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=wb(b,null,d,c):T(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),nh(a,b,d,e,c);case 7:return T(a,b,b.pendingProps,c),b.child;case 8:return T(a,
b,b.pendingProps.children,c),b.child;case 12:return T(a,b,b.pendingProps.children,c),b.child;case 10:a:{d=b.type._context;e=b.pendingProps;g=b.memoizedProps;f=e.value;var h=b.type._context;y(Ic,h._currentValue);h._currentValue=f;if(null!==g)if(h=g.value,f=Qa(h,f)?0:("function"===typeof d._calculateChangedBits?d._calculateChangedBits(h,f):1073741823)|0,0===f){if(g.children===e.children&&!G.current){b=sa(a,b,c);break a}}else for(h=b.child,null!==h&&(h.return=b);null!==h;){var m=h.dependencies;if(null!==
m){g=h.child;for(var l=m.firstContext;null!==l;){if(l.context===d&&0!==(l.observedBits&f)){1===h.tag&&(l=Ea(c,null),l.tag=Jc,Fa(h,l));h.expirationTime<c&&(h.expirationTime=c);l=h.alternate;null!==l&&l.expirationTime<c&&(l.expirationTime=c);Sg(h.return,c);m.expirationTime<c&&(m.expirationTime=c);break}l=l.next}}else g=10===h.tag?h.type===b.type?null:h.child:h.child;if(null!==g)g.return=h;else for(g=h;null!==g;){if(g===b){g=null;break}h=g.sibling;if(null!==h){h.return=g.return;g=h;break}g=g.return}h=
g}T(a,b,e.children,c);b=b.child}return b;case 9:return e=b.type,f=b.pendingProps,d=f.children,rb(b,c),e=W(e,f.unstable_observedBits),d=d(e),b.effectTag|=1,T(a,b,d,c),b.child;case 14:return e=b.type,f=aa(e,b.pendingProps),f=aa(e.type,f),oh(a,b,e,f,d,c);case 15:return ph(a,b,b.type,b.pendingProps,d,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),b.tag=1,N(d)?(a=!0,Bc(b)):a=!1,rb(b,c),Yg(b,d,e),pe(b,d,e,c),Ie(null,
b,d,!0,a,c);case 19:return vh(a,b,c)}throw Error(k(156,b.tag));};var bf=null,Ne=null,la=function(a,b,c,d){return new Fj(a,b,c,d)};ef.prototype.render=function(a){md(a,this._internalRoot,null,null)};ef.prototype.unmount=function(){var a=this._internalRoot,b=a.containerInfo;md(null,a,null,function(){b[Lb]=null})};var Di=function(a){if(13===a.tag){var b=Fc(ka(),150,100);Ja(a,b);df(a,b)}};var Yf=function(a){13===a.tag&&(Ja(a,3),df(a,3))};var Bi=function(a){if(13===a.tag){var b=ka();b=Va(b,a,null);Ja(a,
b);df(a,b)}};sd=function(a,b,c){switch(b){case "input":Dd(a,c);b=c.name;if("radio"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;c=c.querySelectorAll("input[name="+JSON.stringify(""+b)+'][type="radio"]');for(b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=ae(d);if(!e)throw Error(k(90));Gf(d);Dd(d,e)}}}break;case "textarea":Lf(a,c);break;case "select":b=c.value,null!=b&&hb(a,!!c.multiple,b,!1)}};(function(a,b,c,d){ee=a;eg=b;vd=c;vf=d})(Qh,function(a,b,c,d,e){var f=p;p|=4;
try{return Da(98,a.bind(null,b,c,d,e))}finally{p=f,p===H&&ha()}},function(){(p&(1|ca|ma))===H&&(uj(),xb())},function(a,b){var c=p;p|=2;try{return a(b)}finally{p=c,p===H&&ha()}});var mk={Events:[Hb,Pa,ae,pf,qd,lb,function(a){Kd(a,Ki)},sf,tf,sc,pc,xb,{current:!1}]};(function(a){var b=a.findFiberByHostInstance;return Ej(M({},a,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:da.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){a=Sf(a);
return null===a?null:a.stateNode},findFiberByHostInstance:function(a){return b?b(a):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))})({findFiberByHostInstance:Bb,bundleType:0,version:"16.13.1",rendererPackageName:"react-dom"});I.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mk;I.createPortal=Xh;I.findDOMNode=function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternalFiber;if(void 0===
b){if("function"===typeof a.render)throw Error(k(188));throw Error(k(268,Object.keys(a)));}a=Sf(b);a=null===a?null:a.stateNode;return a};I.flushSync=function(a,b){if((p&(ca|ma))!==H)throw Error(k(187));var c=p;p|=1;try{return Da(99,a.bind(null,b))}finally{p=c,ha()}};I.hydrate=function(a,b,c){if(!bc(b))throw Error(k(200));return nd(null,a,b,!0,c)};I.render=function(a,b,c){if(!bc(b))throw Error(k(200));return nd(null,a,b,!1,c)};I.unmountComponentAtNode=function(a){if(!bc(a))throw Error(k(40));return a._reactRootContainer?
(Rh(function(){nd(null,null,a,!1,function(){a._reactRootContainer=null;a[Lb]=null})}),!0):!1};I.unstable_batchedUpdates=Qh;I.unstable_createPortal=function(a,b){return Xh(a,b,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)};I.unstable_renderSubtreeIntoContainer=function(a,b,c,d){if(!bc(c))throw Error(k(200));if(null==a||void 0===a._reactInternalFiber)throw Error(k(38));return nd(a,b,c,!1,d)};I.version="16.13.1"});
</script>
    <script>const e = React.createElement;

function pathToString(path) {
  if (path[0] === '/') {
    return '/' + path.slice(1).join('/');
  } else {
    return path.join('/');
  }
}

function findCommonPath(files) {
  if (!files || !files.length) {
    return [];
  }

  function isPrefix(arr, prefix) {
    if (arr.length < prefix.length) {
      return false;
    }
    for (let i = prefix.length - 1; i >= 0; --i) {
      if (arr[i] !== prefix[i]) {
        return false;
      }
    }
    return true;
  }

  let commonPath = files[0].path.slice(0, -1);
  while (commonPath.length) {
    if (files.every(file => isPrefix(file.path, commonPath))) {
      break;
    }
    commonPath.pop();
  }
  return commonPath;
}

function findFolders(files) {
  if (!files || !files.length) {
    return [];
  }

  let folders = files.filter(file => file.path.length > 1).map(file => file.path[0]);
  folders = [...new Set(folders)]; // unique
  folders.sort();

  folders = folders.map(folder => {
    let filesInFolder = files
      .filter(file => file.path[0] === folder)
      .map(file => ({
        ...file,
        path: file.path.slice(1),
        parent: [...file.parent, file.path[0]],
      }));

    const children = findFolders(filesInFolder); // recursion

    return {
      is_folder: true,
      path: [folder],
      parent: files[0].parent,
      children,
      covered: children.reduce((sum, file) => sum + file.covered, 0),
      coverable: children.reduce((sum, file) => sum + file.coverable, 0),
      prevRun: {
        covered: children.reduce((sum, file) => sum + file.prevRun.covered, 0),
        coverable: children.reduce((sum, file) => sum + file.prevRun.coverable, 0),
      }
    };
  });

  return [
    ...folders,
    ...files.filter(file => file.path.length === 1),
  ];
}

class App extends React.Component {
  constructor(...args) {
    super(...args);

    this.state = {
      current: [],
    };
  }

  componentDidMount() {
    this.updateStateFromLocation();
    window.addEventListener("hashchange", () => this.updateStateFromLocation(), false);
  }

  updateStateFromLocation() {
    if (window.location.hash.length > 1) {
      const current = window.location.hash.substr(1).split('/');
      this.setState({current});
    } else {
      this.setState({current: []});
    }
  }

  getCurrentPath() {
    let file = this.props.root;
    let path = [file];
    for (let p of this.state.current) {
      file = file.children.find(file => file.path[0] === p);
      if (!file) {
        return path;
      }
      path.push(file);
    }
    return path;
  }

  render() {
    const path = this.getCurrentPath();
    const file = path[path.length - 1];

    let w = null;
    if (file.is_folder) {
      w = e(FilesList, {
        folder: file,
        onSelectFile: this.selectFile.bind(this),
        onBack: path.length > 1 ? this.back.bind(this) : null,
      });
    } else {
      w = e(DisplayFile, {
        file,
        onBack: this.back.bind(this),
      });
    }

    return e('div', {className: 'app'}, w);
  }

  selectFile(file) {
    this.setState(({current}) => {
      return {current: [...current, file.path[0]]};
    }, () => this.updateHash());
  }

  back(file) {
    this.setState(({current}) => {
      return {current: current.slice(0, current.length - 1)};
    }, () => this.updateHash());
  }

  updateHash() {
    if (!this.state.current || !this.state.current.length) {
      window.location = '#';
    } else {
      window.location = '#' + this.state.current.join('/');
    }
  }
}

function FilesList({folder, onSelectFile, onBack}) {
  let files = folder.children;
  return e('div', {className: 'display-folder'},
    e(FileHeader, {file: folder, onBack}),
    e('table', {className: 'files-list'},
      e('thead', {className: 'files-list__head'},
        e('tr', null,
          e('th', null, "Path"),
          e('th', null, "Coverage")
        )
      ),
      e('tbody', {className: 'files-list__body'},
        files.map(file => e(File, {file, onClick: onSelectFile}))
      )
    )
  );
}

function File({file, onClick}) {
  const coverage = file.coverable ? file.covered / file.coverable * 100 : -1;
  const coverageDelta = file.prevRun &&
    (file.covered / file.coverable * 100 - file.prevRun.covered / file.prevRun.coverable * 100);

  return e('tr', {
      className: 'files-list__file'
        + (coverage >= 0 && coverage < 50 ? ' files-list__file_low': '')
        + (coverage >= 50 && coverage < 80 ? ' files-list__file_medium': '')
        + (coverage >= 80 ? ' files-list__file_high': '')
        + (file.is_folder ? ' files-list__file_folder': ''),
      onClick: () => onClick(file),
    },
    e('td', null, pathToString(file.path)),
    e('td', null,
      file.covered + ' / ' + file.coverable +
      (coverage >= 0 ? ' (' + coverage.toFixed(2) + '%)' : ''),
      e('span', {title: 'Change from the previous run'},
        (coverageDelta ? ` (${coverageDelta > 0 ? '+' : ''}${coverageDelta.toFixed(2)}%)` : ''))
    )
  );
}

function DisplayFile({file, onBack}) {
  return e('div', {className: 'display-file'},
    e(FileHeader, {file, onBack}),
    e(FileContent, {file})
  );
}

function FileHeader({file, onBack}) {
  const coverage = file.covered / file.coverable * 100;
  const coverageDelta = file.prevRun && (coverage - file.prevRun.covered / file.prevRun.coverable * 100);

  return e('div', {className: 'file-header'},
    onBack ? e('a', {className: 'file-header__back', onClick: onBack}, 'Back') : null,
    e('div', {className: 'file-header__name'}, pathToString([...file.parent, ...file.path])),
    e('div', {className: 'file-header__stat'},
      'Covered: ' + file.covered + ' of ' + file.coverable +
      (file.coverable ? ' (' + coverage.toFixed(2) + '%)' : ''),
      e('span', {title: 'Change from the previous run'},
        (coverageDelta ? ` (${coverageDelta > 0 ? '+' : ''}${coverageDelta.toFixed(2)}%)` : ''))
    )
  );
}

function FileContent({file}) {
  return e('div', {className: 'file-content'},
    file.content.split(/\r?\n/).map((line, index) => {
      const trace = file.traces.find(trace => trace.line === index + 1);
      const covered = trace && trace.stats.Line;
      const uncovered = trace && !trace.stats.Line;
      return e('pre', {
          className: 'code-line'
            + (covered ? ' code-line_covered' : '')
            + (uncovered ? ' code-line_uncovered' : ''),
          title: trace ? JSON.stringify(trace.stats, null, 2) : null,
        }, line);
    })
  );
}

(function(){
  const commonPath = findCommonPath(data.files);
  const prevFilesMap = new Map();

  previousData && previousData.files.forEach((file) => {
    const path = file.path.slice(commonPath.length).join('/');
    prevFilesMap.set(path, file);
  });

  const files = data.files.map((file) => {
    const path = file.path.slice(commonPath.length);
    const { covered = 0, coverable = 0 } = prevFilesMap.get(path.join('/')) || {};
    return {
      ...file,
      path,
      parent: commonPath,
      prevRun: { covered, coverable },
    };
  });

  const children = findFolders(files);

  const root = {
    is_folder: true,
    children,
    path: commonPath,
    parent: [],
    covered: children.reduce((sum, file) => sum + file.covered, 0),
    coverable: children.reduce((sum, file) => sum + file.coverable, 0),
    prevRun: {
      covered: children.reduce((sum, file) => sum + file.prevRun.covered, 0),
      coverable: children.reduce((sum, file) => sum + file.prevRun.coverable, 0),
    }
  };

  ReactDOM.render(e(App, {root, prevFilesMap}), document.getElementById('root'));
}());
</script>
</body>
</html>